const a27_0x27632b=a27_0x5a36;(function(_0xe662c4,_0x4c8271){const _0x10099a=a27_0x5a36,_0x2a09d1=_0xe662c4();while(!![]){try{const _0x4ece72=-parseInt(_0x10099a(0x250))/0x1+-parseInt(_0x10099a(0x1ef))/0x2+parseInt(_0x10099a(0x37a))/0x3*(-parseInt(_0x10099a(0x30b))/0x4)+-parseInt(_0x10099a(0x1fa))/0x5+parseInt(_0x10099a(0x364))/0x6*(parseInt(_0x10099a(0x2ba))/0x7)+-parseInt(_0x10099a(0x31b))/0x8*(parseInt(_0x10099a(0x21c))/0x9)+-parseInt(_0x10099a(0x2f5))/0xa*(-parseInt(_0x10099a(0x20e))/0xb);if(_0x4ece72===_0x4c8271)break;else _0x2a09d1['push'](_0x2a09d1['shift']());}catch(_0x5b1f14){_0x2a09d1['push'](_0x2a09d1['shift']());}}}(a27_0x268e,0x44954));const express=require(a27_0x27632b(0x1e7)),router=express[a27_0x27632b(0x30d)](),multer=require(a27_0x27632b(0x2ca)),fs=require('fs'),path=require(a27_0x27632b(0x2c7)),getHotConfig=require(a27_0x27632b(0x230))[a27_0x27632b(0x2b2)],{exec}=require('child_process'),os=require('os'),conn=require(a27_0x27632b(0x2de)),bcrypt=require(a27_0x27632b(0x214)),osu=require(a27_0x27632b(0x2b9)),schedule=require(a27_0x27632b(0x27b)),counter=require('../libs/counter.js'),{randomUUID}=require('crypto'),logStream=require(a27_0x27632b(0x216)),config=require('../CADViewer_config.json'),basicAuth=require(a27_0x27632b(0x228)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x27632b(0x2f3)),protectedRoute=basicAuth({'users':{[config['settingsUserBasicAuth']]:config[a27_0x27632b(0x1ec)]},'challenge':!![],'realm':'CADViewer\x20Settings'});function a27_0x268e(){const _0x16c660=['DWG\x20file\x20in\x20multiple\x20files','autoxchange_executable_windows','folderLocation','converterLocation','file','ServerLocation','/folders/delete','totalGb','radio|monthly,biweekly','conversionTimeSpend','usedPercentage','express-basic-auth','File\x20renamed.','filename','availableFormats','.dwg','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','/folders','dwg','../libs/config','writeFile','https','exports','usage','File\x20not\x20found','\x20does\x20not\x20exist.','/doctor','./uploads/','demo_user','maxUploadFiles','log','`crypted_password`\x20=\x20?,\x20','Folder\x20not\x20found','application/octet-stream','autodetect_platform','File\x20deleted.','./tmp','/config','cadviewer/settings/cache-stats.js','Old\x20demo_user\x20accounts\x20(','getMonth','Folder\x20created.','cadviewer/settings/rest-api-parameters.json','/cache/files/:id','info','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','setHeader','replace','/cache/stats','Folder\x20deleted.','usedMemMb','141835mOzBhp','Error\x20getting\x20cache\x20stats:','/export-users','converterpathWin','type','uptime','Display\x20of\x20DWG','Error\x20creating\x20folder.','{version}','toUpperCase','role','DWG\x20to\x20SVG\x20Conversion','avatars/','dwgmerge_executable','/tailwind.js','Mail\x20Server\x20Settings','Error\x20reading\x20last\x20export\x20info:','\x20MB','cadviewer/settings/tailwind.js','mysqlDatabase','User\x20updated\x20successfully','totalGB','Failed\x20to\x20flush\x20cache','Error\x20cleaning\x20cache\x20for\x20user\x20files:','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','params','cadviewer/settings/logs.html','proc','\x20days\x20have\x20been\x20deleted.','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','isFile','isDirectory','catch','Error\x20getting\x20total\x20users','cadviewer/settings/chart.min.js','scheduleJob','win32','tmp','existsSync','cadviewer/settings/vanilla-toast.css','Error\x20triggering\x20Users\x20export:','split','node-schedule','Monitoring\x20file\x20cleaned.','clean','readFileSync','/folders/create','Server\x20Settings','Cache\x20directory\x20','mimetype','createdAt','Content-Disposition','ceil','mkdirSync','/conversion/memorydata','send','.rl.json','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','reduce','users-export-','userId','isFolder','access','sendFile','fileLoad_Password','blue','converters','whoami','SVGZ','updatedAt','Parameters\x20saved.','/folders/upload','globalBearerAutentication','callbackMethod_gatewayUrl_flag','/metrics/reset','folderName','/cache','/licences','darwin','toLocaleLowerCase','Cache\x20flushed\x20successfully','Export\x20file\x20not\x20found','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','rmSync','filter','model','Read\x20and\x20write\x20permission\x20for\x20folder\x20','RL/TL\x20Processing','/conversion/clean','vmstats','linklist_executable_linux','.pdf','blocks','File\x20or\x20Folder\x20not\x20found','maxUploadFileSize','User\x20directory\x20flushed\x20successfully','Error\x20getting\x20Users\x20export\x20export\x20history:','getHotConfig','/content/redlines/v7/','/conversion/list','length','linux','put','attachment;\x20filename=\x22','node-os-utils','1119706GBTrYC','download','cvjs_svgz_compress','query','.svgz','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','/cache/flush','dwgmerge_executable_windows','then','getDate','fileLocationUrl','cadviewer/settings/vanilla-toast.js','licenseLocation','path','DWG\x20to\x20PDF\x20Conversion','image/svg+xml','multer','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','cadviewer/settings/style.css','settings','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','conversionMemoryUsage','demoUserRetentionDays','write','/logs','DwgMerge\x20Settings','cadviewer/settings/conversion-cache.html','Error\x20flushing\x20cache:','renameSync','folder_name','/restapi-test','last_name','toISOString','callbackMethod','.gitkeep','includes','../libs/mysql.js','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','cadviewer/settings/doctor.html','\x20KB','Error\x20getting\x20memory\x20info','ServerUrl','ContentSecurityPolicy','Error!\x20Something\x20went\x20wrong.','padStart','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','platform','UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','Error\x20getting\x20process\x20info','/users/list','AutoXchange\x20Settings','PDF','usedGb','cadviewer/settings/config.html','files','svg','Error\x20getting\x20disk\x20usage','../libs/email-utils','name','10nvmxNO','promise',')\x20older\x20than\x20','/converters/files/','utf8','SVG','statSync','body','CADViewer_config.json','/users','Demo\x20period\x20extended\x20successfully\x20by\x20','Error\x20getting\x20upload\x20configuration:','totalMemMb','fontLocation','stringify','main','Error\x20deleting\x20folder.','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','readFile','zombieProcesses','Error\x20deleting\x20user\x20folder:','cadviewer/settings/home.html','4ewcGQa','/restapi-test/parameters/save','Router','Cache\x20conversion','\x20users\x20to\x20','constants','/users-export/trigger','===================error===================','toString','mysqlUsername','usedGB','mkdir','linklist_executable_windows','all','\x20days','/style.css','1153784DxUEIo','usedMemPercentage','writeFileSync','push','logs','Content-Type','join','cadviewer/settings/folders.html','linklistLocation','autoxchange_executable','mem','setDate','email','windows','copyFileSync','mode','JSON\x20Data\x20Extraction','LinkList\x20Settings','radio|','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','hostname','svgz','endsWith','monthly','formatedSize','mysqlPassword','/users-export/download/:fileName','version','\x20\x20\x20','Config\x20updated.','total','parse','trim','/users/extend-demo','User\x20created\x20successfully','resolve','Error\x20retrieving\x20upload\x20configuration','number','.dwg.json','/converters/files/merged/','percentage','error','dwgmergeLocation','readdirSync','cadviewer/settings/requests-callapiconversion-monitoring.json','some','startsWith','W_OK','.png','execute','gunzipSync','cadviewer/settings/users-export.html','Error\x20deleting\x20cache\x20file\x20','test','/cache/files','0\x201\x20*\x20*\x20*','cadviewer/settings/users.html','converter-files-analysis.json','freeGb','memorydata.csv','red','originalname','forEach','\x22\x20executable','Error\x20deleting\x20old\x20demo_user\x20accounts:','ServerPort','getStats','getFullYear','Invalid\x20user','admin','map','autoxchange_executable_linux','dwgmerge_executable_linux','6ewzbPV','fileLocation','post','cadviewer/settings/converter-files-analysis.json','size','callbackMethod_gatewayUrl','linklist_executable','atime','Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)','purple','arch','R_OK','cached_conversion','totalProcesses','extname','single','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','sort','/restapi-test/parameters/search','first_name','.json','call-Api_Conversion_','743052nsNOSO','json','Failed\x20to\x20get\x20cache\x20stats','User\x20deleted\x20successfully','sub_dirs','This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users','/chart.min.js','osCmd','cadviewer/settings/licences.html','/content/redlines/','hlall','Callback\x20and\x20Authentication\x20Settings','dirname','cadviewer/settings/rest-api.html','cachedfiles','/logs/clean','express','boolean','get','rmdirSync','unlink','settingsPasswordBasicAuth','Database\x20Settings','.log','673700eWocfS','pop','user','cadviewer','.csv','keys','/config/global-update','zlib','delete','hash','No\x20files\x20uploaded','2039965KYDheo','Error\x20finding\x20log\x20files:','status','/cache-stats.js','standard','birthtime','Failed\x20to\x20trigger\x20export','unlinkSync','ctime','Log\x20file\x20cleaned.','ContentSecurityPolicyReportOnly','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','X_OK','count','*\x20*\x20*\x20*\x20*','slice','JSON','pdf','Error\x20getting\x20os\x20info','who','18567879DebbOD','array','Cache\x20cleaned\x20for\x20files\x20in\x20','replaceAll','toFixed','avatar_url','bcrypt','Folder\x20not\x20found.','../libs/log','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','Error\x20deleting\x20file','usersExportFrequency','Error\x20saving\x20parameters.','Permission\x20750\x20for\x20the\x20\x22','27TPIucJ'];a27_0x268e=function(){return _0x16c660;};return a27_0x268e();}router[a27_0x27632b(0x1e9)](a27_0x27632b(0x25e),async(_0xa3a485,_0x47ab53)=>{const _0x4cdbc7=a27_0x27632b;_0x47ab53['sendFile'](path[_0x4cdbc7(0x321)](path[_0x4cdbc7(0x1e3)](require[_0x4cdbc7(0x304)][_0x4cdbc7(0x22a)]),_0x4cdbc7(0x262)));}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x380),async(_0x5f4328,_0x1e65dc)=>{const _0x27b1c1=a27_0x27632b;_0x1e65dc[_0x27b1c1(0x290)](path['join'](path['dirname'](require[_0x27b1c1(0x304)][_0x27b1c1(0x22a)]),_0x27b1c1(0x273)));}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x31a),async(_0xeeb2ab,_0xa8e72c)=>{const _0x2bcdf0=a27_0x27632b;_0xa8e72c[_0x2bcdf0(0x290)](path['join'](path[_0x2bcdf0(0x1e3)](require[_0x2bcdf0(0x304)][_0x2bcdf0(0x22a)]),_0x2bcdf0(0x2cc)));}),router['get']('/vanilla-toast.css',async(_0x363aff,_0x2b7664)=>{const _0x443101=a27_0x27632b;_0x2b7664['sendFile'](path['join'](path[_0x443101(0x1e3)](require[_0x443101(0x304)][_0x443101(0x22a)]),_0x443101(0x278)));}),router[a27_0x27632b(0x1e9)]('/vanilla-toast.js',async(_0x2eee7a,_0x36b6e4)=>{const _0x15b895=a27_0x27632b;_0x36b6e4[_0x15b895(0x290)](path[_0x15b895(0x321)](path[_0x15b895(0x1e3)](require[_0x15b895(0x304)][_0x15b895(0x22a)]),_0x15b895(0x2c5)));}),router[a27_0x27632b(0x1e9)]('/icons.js',async(_0x346a09,_0x4a588f)=>{const _0x2a3c3=a27_0x27632b;_0x4a588f[_0x2a3c3(0x290)](path[_0x2a3c3(0x321)](path[_0x2a3c3(0x1e3)](require['main'][_0x2a3c3(0x22a)]),'cadviewer/settings/icons.js'));}),router[a27_0x27632b(0x1e9)]('/',protectedRoute,async(_0xcc885b,_0x3891bd)=>{const _0x4948e5=a27_0x27632b,_0x30bb9a=fs[_0x4948e5(0x27e)](path['join'](path[_0x4948e5(0x1e3)](require['main'][_0x4948e5(0x22a)]),_0x4948e5(0x30a)),_0x4948e5(0x2f9)),_0x5af28d=_0x30bb9a[_0x4948e5(0x211)](_0x4948e5(0x258),_0xcc885b[_0x4948e5(0x336)]);_0x3891bd[_0x4948e5(0x288)](_0x5af28d);}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x29e),protectedRoute,async(_0x24ebe4,_0x57926e)=>{const _0x4affb3=a27_0x27632b,_0x1abe18=fs['readFileSync'](path[_0x4affb3(0x321)](path['dirname'](require[_0x4affb3(0x304)][_0x4affb3(0x22a)]),_0x4affb3(0x382)),'utf8'),_0x4bf34e=_0x1abe18['replaceAll'](_0x4affb3(0x258),_0x24ebe4[_0x4affb3(0x336)]);_0x57926e[_0x4affb3(0x288)](_0x4bf34e);}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x242),protectedRoute,async(_0x9bde15,_0x317650)=>{const _0x238ac6=a27_0x27632b,_0x1b1a03=fs['readFileSync'](path[_0x238ac6(0x321)](path[_0x238ac6(0x1e3)](require[_0x238ac6(0x304)]['filename']),_0x238ac6(0x2ef)),_0x238ac6(0x2f9)),_0x3bb6ab=_0x1b1a03['replaceAll'](_0x238ac6(0x258),_0x9bde15['version']);_0x317650[_0x238ac6(0x288)](_0x3bb6ab);}),router[a27_0x27632b(0x1e9)]('/folders',protectedRoute,async(_0x183467,_0x1216a8)=>{const _0xe6093d=a27_0x27632b,_0x2e0800=fs[_0xe6093d(0x27e)](path[_0xe6093d(0x321)](path['dirname'](require['main'][_0xe6093d(0x22a)]),_0xe6093d(0x322)),_0xe6093d(0x2f9)),_0x2f1a2d=_0x2e0800[_0xe6093d(0x211)](_0xe6093d(0x258),_0x183467[_0xe6093d(0x336)]);_0x1216a8['send'](_0x2f1a2d);}),router[a27_0x27632b(0x366)](a27_0x27632b(0x22e),async(_0x6c52f3,_0x5d5d26)=>{const _0x2a0668=a27_0x27632b,_0x41df61=path[_0x2a0668(0x321)](path[_0x2a0668(0x1e3)](require['main'][_0x2a0668(0x22a)]),_0x2a0668(0x2fd)),_0x42a82f=JSON[_0x2a0668(0x33a)](fs[_0x2a0668(0x27e)](_0x41df61,'utf8')),_0x4b4d6f=_0x42a82f[_0x2a0668(0x21f)];if(!fs[_0x2a0668(0x277)](_0x4b4d6f))return _0x5d5d26[_0x2a0668(0x1fc)](0x194)[_0x2a0668(0x37b)]({'message':_0x2a0668(0x26d)});const _0xa79a05=_0x85491d=>{const _0x22dba8=_0x2a0668;let _0x47321f=0x0;return _0x85491d[_0x22dba8(0x359)](_0x40aac6=>{const _0xa4e06b=_0x22dba8;_0x40aac6[_0xa4e06b(0x28e)]?_0x47321f+=_0xa79a05(_0x40aac6[_0xa4e06b(0x37e)]):_0x47321f+=_0x40aac6[_0xa4e06b(0x368)];}),_0x47321f;},_0x51c29a=_0x436729=>{const _0x28e978=_0x2a0668;if(_0x436729<0x400)return _0x436729+'\x20B';else{if(_0x436729<0x400*0x400)return(_0x436729/0x400)[_0x28e978(0x212)](0x2)+_0x28e978(0x2e1);else return _0x436729<0x400*0x400*0x400?(_0x436729/0x400/0x400)[_0x28e978(0x212)](0x2)+_0x28e978(0x261):(_0x436729/0x400/0x400/0x400)[_0x28e978(0x212)](0x2)+'\x20GB';}},_0x3c0c57=(_0x35b428,_0x137199='')=>{const _0x4b7a46=_0x2a0668,_0x3b75f9=fs['readdirSync'](_0x35b428),_0x4caf83=[];return _0x3b75f9[_0x4b7a46(0x359)](_0x16925f=>{const _0x325ceb=_0x4b7a46,_0xcd9375=path[_0x325ceb(0x321)](_0x35b428,_0x16925f)[_0x325ceb(0x211)]('\x5c','/'),_0x422ce2=fs[_0x325ceb(0x2fb)](_0xcd9375);if(_0x422ce2[_0x325ceb(0x270)]()){const _0x1ea5e2=_0x3c0c57(_0xcd9375,_0x137199+_0x325ceb(0x337));_0x4caf83[_0x325ceb(0x31e)]({'name':_0x16925f,'size':_0x422ce2[_0x325ceb(0x368)],'path':_0xcd9375,'permissions':_0x422ce2[_0x325ceb(0x32a)],'isFolder':!![],'sub_dirs':_0x1ea5e2});}else _0x4caf83[_0x325ceb(0x31e)]({'name':_0x16925f,'size':_0x422ce2[_0x325ceb(0x368)],'path':_0xcd9375,'permissions':_0x422ce2[_0x325ceb(0x32a)],'isFolder':![]});}),_0x4caf83;};let _0x3c9517=_0x3c0c57(_0x4b4d6f);const _0x60b678=_0x1c9915=>{return _0x1c9915['forEach'](_0x12c721=>{const _0x3af2c8=a27_0x5a36;_0x12c721[_0x3af2c8(0x28e)]?(_0x12c721[_0x3af2c8(0x333)]=_0x51c29a(_0xa79a05(_0x12c721[_0x3af2c8(0x37e)])),_0x12c721[_0x3af2c8(0x37e)]=_0x60b678(_0x12c721[_0x3af2c8(0x37e)])):_0x12c721[_0x3af2c8(0x333)]=_0x51c29a(_0x12c721[_0x3af2c8(0x368)]);}),_0x1c9915;};_0x5d5d26['status'](0xc8)[_0x2a0668(0x37b)](_0x60b678(_0x3c9517));}),router[a27_0x27632b(0x366)]('/folders/download',async(_0x3d139a,_0x3c9a00)=>{const _0x367795=a27_0x27632b,{path:_0x4062f7}=_0x3d139a[_0x367795(0x2fc)],_0x506b44=_0x4062f7[_0x367795(0x27a)]('/')[_0x367795(0x1f0)]();if(!fs[_0x367795(0x277)](_0x4062f7))return _0x3c9a00[_0x367795(0x1fc)](0x194)[_0x367795(0x37b)]({'message':_0x367795(0x235)});_0x3c9a00[_0x367795(0x24b)](_0x367795(0x320),_0x367795(0x23e)),_0x3c9a00['setHeader'](_0x367795(0x284),_0x367795(0x2b8)+_0x506b44+'\x22'),_0x3c9a00[_0x367795(0x2bb)](_0x4062f7,_0x1d08b0=>{const _0x38cd29=_0x367795;_0x1d08b0&&_0x3c9a00[_0x38cd29(0x1fc)](0x1f4)['json']({'message':'Error\x20downloading\x20file.'});});}),router['post'](a27_0x27632b(0x27f),async(_0x4d87db,_0x2e9cfa)=>{const _0x590a3f=a27_0x27632b,_0xd2139a=_0x4d87db[_0x590a3f(0x2fc)],_0x417d6e=getHotConfig()['folderLocation'],_0x1f91fb=path[_0x590a3f(0x321)](_0x417d6e,_0xd2139a['path']);if(!fs['existsSync'](_0x1f91fb))return _0x2e9cfa[_0x590a3f(0x1fc)](0x194)['json']({'message':_0x590a3f(0x215)});if(fs[_0x590a3f(0x277)](path[_0x590a3f(0x321)](_0x1f91fb,_0xd2139a[_0x590a3f(0x29c)])))return _0x2e9cfa['status'](0x199)[_0x590a3f(0x37b)]({'message':'Folder\x20already\x20exists.'});fs[_0x590a3f(0x316)](path[_0x590a3f(0x321)](_0x1f91fb,_0xd2139a['folderName']),_0x2a873b=>{const _0x3423e4=_0x590a3f;_0x2a873b&&_0x2e9cfa[_0x3423e4(0x1fc)](0x1f4)[_0x3423e4(0x37b)]({'message':_0x3423e4(0x257)}),_0x2e9cfa['status'](0xc8)['json']({'message':_0x3423e4(0x246)});});}),router[a27_0x27632b(0x2b7)]('/folders/update',async(_0x25a0e8,_0x5493c7)=>{const _0x375891=a27_0x27632b,{newName:_0x2336f6,isFolder:_0x42090e,path:_0x6adc87}=_0x25a0e8[_0x375891(0x2fc)];if(!fs[_0x375891(0x277)](_0x6adc87))return _0x5493c7[_0x375891(0x1fc)](0x194)['json']({'message':_0x42090e?_0x375891(0x23d):_0x375891(0x235)});const _0x742369=_0x6adc87[_0x375891(0x24c)](_0x6adc87[_0x375891(0x27a)]('/')[_0x375891(0x1f0)](),_0x2336f6),_0x1762d0=fs['statSync'](_0x6adc87);_0x1762d0[_0x375891(0x270)]()?fs[_0x375891(0x2d6)](_0x6adc87,_0x742369):(fs[_0x375891(0x329)](_0x6adc87,_0x742369),fs[_0x375891(0x201)](_0x6adc87)),_0x5493c7['status'](0xc8)[_0x375891(0x37b)]({'message':_0x42090e?'Folder\x20renamed.':_0x375891(0x229)});}),router[a27_0x27632b(0x1f7)](a27_0x27632b(0x223),async(_0xd70e44,_0x1d1844)=>{const _0x3565eb=a27_0x27632b,{path:_0x532391}=_0xd70e44['body'];if(!fs[_0x3565eb(0x277)](_0x532391))return _0x1d1844[_0x3565eb(0x1fc)](0x194)[_0x3565eb(0x37b)]({'message':_0x3565eb(0x2ae)});const _0x4128ca=fs[_0x3565eb(0x2fb)](_0x532391);if(_0x4128ca[_0x3565eb(0x26f)]())fs[_0x3565eb(0x1eb)](_0x532391,_0x123b95=>{const _0x38b59b=_0x3565eb;_0x123b95&&_0x1d1844[_0x38b59b(0x1fc)](0x1f4)[_0x38b59b(0x37b)]({'message':'Error\x20deleting\x20file.'}),_0x1d1844[_0x38b59b(0x1fc)](0xc8)[_0x38b59b(0x37b)]({'message':_0x38b59b(0x240)});});else _0x4128ca['isDirectory']()&&fs['rmdir'](_0x532391,{'recursive':!![]},_0x17fcd3=>{const _0x588404=_0x3565eb;_0x17fcd3&&_0x1d1844[_0x588404(0x1fc)](0x1f4)[_0x588404(0x37b)]({'message':_0x588404(0x305)}),_0x1d1844[_0x588404(0x1fc)](0xc8)[_0x588404(0x37b)]({'message':_0x588404(0x24e)});});});!fs['existsSync']('./tmp')&&fs['mkdirSync'](a27_0x27632b(0x241));const storage=multer['diskStorage']({'destination':(_0x33d445,_0x3ac6a7,_0x2ac5a0)=>{const _0x1efb7a=a27_0x27632b;_0x2ac5a0(null,_0x1efb7a(0x276));},'filename':(_0x47e90f,_0x30df03,_0x3eeb59)=>{const _0x5cbdbc=a27_0x27632b;_0x3eeb59(null,Date['now']()+path[_0x5cbdbc(0x372)](_0x30df03[_0x5cbdbc(0x358)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()['maxUploadFileSize']?getHotConfig()[a27_0x27632b(0x2af)]*0x400*0x400:0x32*0x400*0x400}});router[a27_0x27632b(0x366)](a27_0x27632b(0x298),upload[a27_0x27632b(0x20f)]('files'),async(_0x4dbc5d,_0x540dae)=>{const _0x3ff162=a27_0x27632b,_0x1de9d2=_0x4dbc5d[_0x3ff162(0x2fc)];if(!_0x4dbc5d['files']||_0x4dbc5d['files'][_0x3ff162(0x2b5)]===0x0)return _0x540dae['status'](0x190)['json']({'message':_0x3ff162(0x1f9)});const _0x409aa8=getHotConfig()['folderLocation'],_0x1e6355=path['join'](_0x409aa8,_0x1de9d2[_0x3ff162(0x2c7)]);if(!fs[_0x3ff162(0x277)](_0x1e6355))return _0x540dae['status'](0x194)['json']({'message':_0x3ff162(0x215)});const _0x2f84b9=_0x4dbc5d['files']['map'](_0x5e959c=>({'originalname':_0x5e959c[_0x3ff162(0x358)],'filename':_0x5e959c[_0x3ff162(0x22a)],'mimetype':_0x5e959c[_0x3ff162(0x282)],'size':_0x5e959c[_0x3ff162(0x368)]}));_0x2f84b9[_0x3ff162(0x359)](_0x40a708=>{const _0x5a757e=_0x3ff162;fs[_0x5a757e(0x329)](path[_0x5a757e(0x321)](_0x5a757e(0x276),_0x40a708['filename']),path[_0x5a757e(0x321)](_0x1e6355,_0x40a708[_0x5a757e(0x358)])),fs[_0x5a757e(0x201)](path[_0x5a757e(0x321)](_0x5a757e(0x276),_0x40a708[_0x5a757e(0x22a)]));}),_0x540dae['status'](0xc8)[_0x3ff162(0x37b)]({'message':'Files\x20uploaded\x20successfully','files':_0x2f84b9});}),router[a27_0x27632b(0x2b7)](a27_0x27632b(0x1f5),async(_0x390e77,_0x35952b)=>{const _0x33422e=a27_0x27632b,_0x5f3b82=path[_0x33422e(0x321)](path[_0x33422e(0x1e3)](require[_0x33422e(0x304)][_0x33422e(0x22a)]),_0x33422e(0x2fd)),{config:_0x436187}=_0x390e77[_0x33422e(0x2fc)];if(!_0x436187)return _0x35952b[_0x33422e(0x1fc)](0x190)[_0x33422e(0x37b)]({'message':'No\x20config\x20object\x20provided'});try{fs[_0x33422e(0x31d)](_0x5f3b82,JSON[_0x33422e(0x303)](_0x436187,null,0x4)),_0x35952b[_0x33422e(0x1fc)](0xc8)[_0x33422e(0x37b)]({'message':'Config\x20updated\x20successfully'});}catch(_0x2ffb27){_0x35952b[_0x33422e(0x1fc)](0x1f4)['json']({'message':'Error\x20updating\x20config'});}}),router['put']('/config/update',async(_0x310487,_0x256902)=>{const _0x2df9ff=a27_0x27632b,{key:_0x1e10a2,value:_0x4cdabd}=_0x310487[_0x2df9ff(0x2fc)],_0x46af8d=path[_0x2df9ff(0x321)](path[_0x2df9ff(0x1e3)](require['main'][_0x2df9ff(0x22a)]),'CADViewer_config.json');fs[_0x2df9ff(0x307)](_0x46af8d,_0x2df9ff(0x2f9),function(_0x5bb55e,_0x2a895f){const _0x20e2d3=_0x2df9ff;_0x5bb55e&&_0x256902[_0x20e2d3(0x1fc)](0x1f4)[_0x20e2d3(0x288)](_0x5bb55e);const _0x5542f5=JSON[_0x20e2d3(0x33a)](_0x2a895f);_0x5542f5[_0x1e10a2]=_0x4cdabd;if(_0x1e10a2==='autodetect_location'){let _0x2a5e54='';if(_0x5542f5[_0x20e2d3(0x23f)]){_0x2a5e54=os[_0x20e2d3(0x2e8)]();if(_0x2a5e54===_0x20e2d3(0x275))_0x2a5e54='windows';else{if(_0x2a5e54===_0x20e2d3(0x29f))_0x2a5e54=_0x20e2d3(0x2b6);}}else _0x2a5e54=_0x5542f5[_0x20e2d3(0x2e8)];if(_0x2a5e54===_0x20e2d3(0x328)){_0x5542f5[_0x20e2d3(0x222)]=path['resolve'](__dirname,'..')+'/';const _0x546e2d=/\\/g;_0x5542f5[_0x20e2d3(0x222)]=_0x5542f5[_0x20e2d3(0x222)][_0x20e2d3(0x24c)](_0x546e2d,'/');}else _0x5542f5['ServerLocation']=path[_0x20e2d3(0x33e)](__dirname,'..')+'/';}if(_0x1e10a2==='autodetect_platform'){let _0x157fb2=os[_0x20e2d3(0x2e8)]();if(_0x157fb2==='win32')_0x157fb2=_0x20e2d3(0x328);else _0x157fb2=_0x20e2d3(0x2b6);_0x157fb2===_0x20e2d3(0x328)?_0x4cdabd===!![]&&(_0x5542f5[_0x20e2d3(0x324)]=_0x5542f5['autoxchange_executable_windows'],_0x5542f5['dwgmerge_executable']=_0x5542f5[_0x20e2d3(0x2c1)],_0x5542f5[_0x20e2d3(0x36a)]=_0x5542f5['linklist_executable_windows']):_0x4cdabd===!![]&&(_0x5542f5[_0x20e2d3(0x324)]=_0x5542f5[_0x20e2d3(0x362)],_0x5542f5[_0x20e2d3(0x25d)]=_0x5542f5[_0x20e2d3(0x363)],_0x5542f5[_0x20e2d3(0x36a)]=_0x5542f5[_0x20e2d3(0x2ab)]),_0x5542f5['platform']=_0x157fb2;}if(_0x5542f5[_0x20e2d3(0x23f)]){let _0xa267f=os[_0x20e2d3(0x2e8)]();if(_0xa267f===_0x20e2d3(0x275))_0xa267f=_0x20e2d3(0x328);else _0xa267f=_0x20e2d3(0x2b6);if(_0xa267f===_0x20e2d3(0x328)){if(_0x1e10a2===_0x20e2d3(0x21e))_0x5542f5[_0x20e2d3(0x324)]=_0x4cdabd;else{if(_0x1e10a2===_0x20e2d3(0x2c1))_0x5542f5[_0x20e2d3(0x25d)]=_0x4cdabd;else _0x1e10a2===_0x20e2d3(0x317)&&(_0x5542f5[_0x20e2d3(0x36a)]=_0x4cdabd);}}else{if(_0x1e10a2===_0x20e2d3(0x362))_0x5542f5[_0x20e2d3(0x324)]=_0x4cdabd;else{if(_0x1e10a2==='dwgmerge_executable_linux')_0x5542f5[_0x20e2d3(0x25d)]=_0x4cdabd;else _0x1e10a2===_0x20e2d3(0x2ab)&&(_0x5542f5[_0x20e2d3(0x36a)]=_0x4cdabd);}}}fs['writeFile'](_0x46af8d,JSON[_0x20e2d3(0x303)](_0x5542f5,null,0x4),function(_0x2ea009){const _0x193be1=_0x20e2d3;_0x2ea009&&_0x256902[_0x193be1(0x1fc)](0x1f4)[_0x193be1(0x288)](_0x2ea009),_0x256902[_0x193be1(0x1fc)](0xc8)['json']({'message':_0x193be1(0x338)});});});}),router['post']('/config/content',async(_0x4b755f,_0x213407)=>{const _0x325260=a27_0x27632b,_0x212a29=getHotConfig(),_0x2a2cf3=(_0x212a29['dwgmergeLocation'][_0x325260(0x2dd)](_0x212a29[_0x325260(0x222)])?'':_0x212a29[_0x325260(0x222)])+_0x212a29[_0x325260(0x345)],_0xe16a2=(_0x212a29['dwgmergeLocation'][_0x325260(0x2dd)](_0x212a29[_0x325260(0x222)])?'':_0x212a29['ServerLocation'])+_0x212a29[_0x325260(0x323)],_0xbff24b=(_0x212a29[_0x325260(0x220)]['includes'](_0x212a29[_0x325260(0x222)])?'':_0x212a29[_0x325260(0x222)])+_0x212a29[_0x325260(0x220)],_0x3aa186=/ax202.*\.exe/,_0x5446ca=/ax202.*/,_0x5998b5=/dwgmerge202.*\.exe/,_0x522f32=/dwgmerge_202.*/,_0x381b1a=/linklist_202.*\.exe/,_0x4d61fc=/linklist_202.*/,_0x17e87f=[],_0x3e09e2=[],_0x3bb70e=[],_0x563f67=[],_0x42b1ec=[],_0x690489=[];let _0x335536='';if(_0x212a29['autodetect_platform']){_0x335536=os[_0x325260(0x2e8)]();if(_0x335536===_0x325260(0x275))_0x335536=_0x325260(0x328);else{if(_0x335536===_0x325260(0x29f))_0x335536=_0x325260(0x2b6);}}else _0x335536=_0x212a29[_0x325260(0x2e8)];fs[_0x325260(0x346)](_0xbff24b[_0x325260(0x211)]('linux',_0x325260(0x328)))['forEach'](_0x345ca9=>{const _0x37dbe0=_0x325260;if(_0x3aa186['test'](_0x345ca9['toLocaleLowerCase']()))_0x17e87f[_0x37dbe0(0x31e)](_0x345ca9);}),fs[_0x325260(0x346)](_0x2a2cf3[_0x325260(0x211)](_0x325260(0x2b6),'windows'))[_0x325260(0x359)](_0x5bfa5e=>{const _0x2908da=_0x325260;if(_0x5998b5[_0x2908da(0x350)](_0x5bfa5e[_0x2908da(0x2a0)]()))_0x3e09e2[_0x2908da(0x31e)](_0x5bfa5e);}),fs['readdirSync'](_0xe16a2[_0x325260(0x211)](_0x325260(0x2b6),_0x325260(0x328)))['forEach'](_0x4ac20b=>{const _0x2bc800=_0x325260;if(_0x381b1a[_0x2bc800(0x350)](_0x4ac20b['toLocaleLowerCase']()))_0x3bb70e[_0x2bc800(0x31e)](_0x4ac20b);}),fs[_0x325260(0x346)](_0xbff24b['replaceAll'](_0x325260(0x328),_0x325260(0x2b6)))[_0x325260(0x359)](_0x320600=>{const _0x1a0273=_0x325260;if(_0x5446ca[_0x1a0273(0x350)](_0x320600[_0x1a0273(0x2a0)]()))_0x563f67[_0x1a0273(0x31e)](_0x320600);}),fs[_0x325260(0x346)](_0x2a2cf3[_0x325260(0x211)](_0x325260(0x328),'linux'))[_0x325260(0x359)](_0x5c2243=>{const _0x120f8c=_0x325260;if(_0x522f32[_0x120f8c(0x350)](_0x5c2243[_0x120f8c(0x2a0)]()))_0x42b1ec['push'](_0x5c2243);}),fs['readdirSync'](_0xe16a2[_0x325260(0x211)]('windows','linux'))[_0x325260(0x359)](_0x585fba=>{const _0x562948=_0x325260;if(_0x4d61fc['test'](_0x585fba[_0x562948(0x2a0)]()))_0x690489[_0x562948(0x31e)](_0x585fba);});const _0x537da2=[_0x325260(0x35c),_0x325260(0x232),_0x325260(0x253),'converterpathLin',_0x325260(0x302)],_0x118619=[_0x325260(0x365),_0x325260(0x2c4),_0x325260(0x220),_0x325260(0x2c6),'xpathLocation','temp_print_folder',_0x325260(0x2db),_0x325260(0x345),_0x325260(0x323),'version'],_0x5200e9=['ServerUrl','mysqlHost',_0x325260(0x314),_0x325260(0x334),_0x325260(0x263),_0x325260(0x370),_0x325260(0x2bc)],_0xb9ad35={'ServerUrl':_0x325260(0x280),'autoxchange_executable':_0x325260(0x2ec),'linklist_executable':_0x325260(0x32c),'dwgmerge_executable':_0x325260(0x2d3),'setup_mysqlHost':_0x325260(0x1ed),'callbackMethod_gatewayUrl_flag':_0x325260(0x1e2),'userFolderMaximumFiles':'Demo\x20and\x20Base\x20User\x20Settings','smtpHost':_0x325260(0x25f)},_0x5a87aa={'https':_0x325260(0x1e8),'ServerFrontEndUrlAsAllowedOriginOnly':_0x325260(0x1e8),'autodetect_platform':_0x325260(0x1e8),'cvjs_svgz_compress':_0x325260(0x1e8),'cached_conversion':'boolean','remainOnServer':_0x325260(0x1e8),'cvjs_debug':_0x325260(0x1e8),'autodetect_location':_0x325260(0x1e8),'platform':'radio|windows,linux','autoxchange_executable':_0x325260(0x32d)+(_0x335536==='windows'?_0x17e87f['join'](','):_0x563f67[_0x325260(0x321)](',')),'autoxchange_executable_windows':_0x325260(0x32d)+_0x17e87f[_0x325260(0x321)](','),'autoxchange_executable_linux':_0x325260(0x32d)+_0x563f67['join'](','),'dwgmerge_executable':_0x325260(0x32d)+(_0x335536===_0x325260(0x328)?_0x3e09e2[_0x325260(0x321)](','):_0x42b1ec['join'](',')),'dwgmerge_executable_windows':'radio|'+_0x3e09e2[_0x325260(0x321)](','),'dwgmerge_executable_linux':_0x325260(0x32d)+_0x42b1ec[_0x325260(0x321)](','),'linklist_executable':_0x325260(0x32d)+(_0x335536===_0x325260(0x328)?_0x3bb70e[_0x325260(0x321)](','):_0x690489['join'](',')),'linklist_executable_windows':_0x325260(0x32d)+_0x3bb70e[_0x325260(0x321)](','),'linklist_executable_linux':_0x325260(0x32d)+_0x690489[_0x325260(0x321)](','),'callbackMethod_gatewayUrl_flag':_0x325260(0x1e8),'setup_mysqlHost':_0x325260(0x1e8),'ContentSecurityPolicyReportOnly':_0x325260(0x1e8),'fileLoad_PasswordAuthentication':_0x325260(0x1e8),'contentLocationCheck':_0x325260(0x1e8),'globalBearerAutentication':_0x325260(0x1e8),'bcryptSaltRounds':_0x325260(0x340),'userFolderMaximumFiles':_0x325260(0x340),'userFolderMaximumSizeInMB':_0x325260(0x340),'recaptchaEnabled':_0x325260(0x1e8),'usersExportFrequency':_0x325260(0x225),'enableEmailVerification':'boolean','demoUserRetentionDaysAlertBeforeDeletion':_0x325260(0x340),'demoUserRetentionDays':'number'},_0x3f497a={},_0x4543cd=Object[_0x325260(0x1f4)](_0x212a29);_0x212a29[_0x325260(0x23f)]&&_0x537da2[_0x325260(0x31e)](_0x325260(0x2e8)),_0x212a29['autodetect_location']&&(_0x118619[_0x325260(0x31e)]('ServerLocation'),_0x118619[_0x325260(0x31e)]('autoxchange_executable'),_0x118619[_0x325260(0x31e)]('dwgmerge_executable'),_0x118619[_0x325260(0x31e)](_0x325260(0x36a))),!_0x212a29[_0x325260(0x29a)]&&_0x118619[_0x325260(0x31e)]('callbackMethod_gatewayUrl'),!_0x212a29['setup_mysqlHost']&&(_0x118619[_0x325260(0x31e)]('mysqlHost'),_0x118619['push'](_0x325260(0x314)),_0x118619[_0x325260(0x31e)](_0x325260(0x334)),_0x118619[_0x325260(0x31e)]('mysqlDatabase')),!_0x212a29[_0x325260(0x204)]&&_0x118619['push'](_0x325260(0x2e4)),!_0x212a29['fileLoad_PasswordAuthentication']&&(_0x118619[_0x325260(0x31e)]('fileLoad_UserName'),_0x118619['push'](_0x325260(0x291))),!_0x212a29[_0x325260(0x299)]&&_0x118619['push']('globalBearerAutenticationToken'),_0x4543cd['forEach'](_0x496be0=>{const _0x4b52b1=_0x325260;!_0x537da2[_0x4b52b1(0x2dd)](_0x496be0)&&(_0x3f497a[_0x496be0]=_0x212a29[_0x496be0]);}),_0x3f497a['fileLocationUrl']=''+_0x212a29[_0x325260(0x2e3)]+_0x212a29[_0x325260(0x365)],_0x213407[_0x325260(0x1fc)](0xc8)[_0x325260(0x37b)]({'notEditableFields':_0x118619,'customFieldTypes':_0x5a87aa,'notHotEditableFields':_0x5200e9,'config':_0x3f497a,'fieldsTitle':_0xb9ad35,'configData':_0x212a29});}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x2d2),protectedRoute,async(_0x4f3521,_0x43c05e)=>{const _0x17f9b9=a27_0x27632b,_0x38d821=fs[_0x17f9b9(0x27e)](path['join'](path[_0x17f9b9(0x1e3)](require[_0x17f9b9(0x304)][_0x17f9b9(0x22a)]),_0x17f9b9(0x26a)),'utf8'),_0x25a0f5=_0x38d821[_0x17f9b9(0x211)]('{version}',_0x4f3521[_0x17f9b9(0x336)]);_0x43c05e['send'](_0x25a0f5);});function a27_0x5a36(_0x3cc550,_0x537c8c){const _0x268e6b=a27_0x268e();return a27_0x5a36=function(_0x5a3633,_0x50ed74){_0x5a3633=_0x5a3633-0x1e2;let _0x8585c0=_0x268e6b[_0x5a3633];return _0x8585c0;},a27_0x5a36(_0x3cc550,_0x537c8c);}function findMatchingLogFiles(_0x42de70,_0x3ce7ac=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0xf3fb1f=a27_0x27632b;try{const _0x57d7f8=fs['readdirSync'](_0x42de70);return _0x57d7f8[_0xf3fb1f(0x2a5)](_0x17ea65=>_0x3ce7ac[_0xf3fb1f(0x350)](_0x17ea65))['map'](_0x1ab5a6=>_0x1ab5a6['replaceAll'](_0xf3fb1f(0x379),'')[_0xf3fb1f(0x211)](_0xf3fb1f(0x1ee),''));}catch(_0x5805bc){return console[_0xf3fb1f(0x344)](_0xf3fb1f(0x1fb),_0x5805bc),[];}}router['post']('/logs/content',async(_0x2548d8,_0x3684a4)=>{const _0x15aafe=a27_0x27632b,_0x219b57=new Date(),_0x5a95d3=_0x219b57['getDate']()['toString']()[_0x15aafe(0x2e6)](0x2,'0')+'_'+(_0x219b57[_0x15aafe(0x245)]()+0x1)['toString']()[_0x15aafe(0x2e6)](0x2,'0')+'_'+_0x219b57[_0x15aafe(0x35e)](),{displayDay:_0x3da2aa}=_0x2548d8[_0x15aafe(0x2fc)],_0x465c12=path[_0x15aafe(0x321)](path[_0x15aafe(0x1e3)](require['main'][_0x15aafe(0x22a)]),_0x15aafe(0x31f),_0x15aafe(0x379)+(_0x3da2aa??_0x5a95d3)+_0x15aafe(0x1ee));fs[_0x15aafe(0x277)](_0x465c12)?fs[_0x15aafe(0x307)](_0x465c12,'utf8',function(_0x3ed78c,_0x496694){const _0x4f1c25=_0x15aafe;_0x3ed78c&&_0x3684a4[_0x4f1c25(0x1fc)](0x1f4)[_0x4f1c25(0x288)](_0x3ed78c),_0x3684a4[_0x4f1c25(0x1fc)](0xc8)['json']({'content':_0x496694,'days':findMatchingLogFiles(path[_0x4f1c25(0x321)](path[_0x4f1c25(0x1e3)](require['main']['filename']),_0x4f1c25(0x31f)))});}):_0x3684a4[_0x15aafe(0x1fc)](0xc8)['json']({'content':'','days':findMatchingLogFiles(path[_0x15aafe(0x321)](path[_0x15aafe(0x1e3)](require[_0x15aafe(0x304)][_0x15aafe(0x22a)]),_0x15aafe(0x31f)))});}),router['delete'](a27_0x27632b(0x1e6),async(_0x169ec6,_0x56b838)=>{const _0x412efc=a27_0x27632b,_0x3fe825=new Date(),_0x52290c=_0x3fe825[_0x412efc(0x2c3)]()[_0x412efc(0x313)]()[_0x412efc(0x2e6)](0x2,'0')+'_'+(_0x3fe825[_0x412efc(0x245)]()+0x1)[_0x412efc(0x313)]()[_0x412efc(0x2e6)](0x2,'0')+'_'+_0x3fe825[_0x412efc(0x35e)](),_0x1ff688=findMatchingLogFiles(path[_0x412efc(0x321)](path[_0x412efc(0x1e3)](require[_0x412efc(0x304)][_0x412efc(0x22a)]),_0x412efc(0x31f)));_0x1ff688[_0x412efc(0x359)](_0x2a55ba=>{const _0x3e3aea=_0x412efc;if(_0x2a55ba!==_0x52290c)fs[_0x3e3aea(0x201)](path['join'](path[_0x3e3aea(0x1e3)](require[_0x3e3aea(0x304)][_0x3e3aea(0x22a)]),'logs',_0x3e3aea(0x379)+_0x2a55ba+_0x3e3aea(0x1ee)));}),logStream[_0x412efc(0x27d)](),_0x56b838['status'](0xc8)['json']({'message':_0x412efc(0x203)});}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x2d8),protectedRoute,async(_0x305dd4,_0x43a5d1)=>{const _0x17afe0=a27_0x27632b,_0x41e797=path[_0x17afe0(0x321)](path[_0x17afe0(0x1e3)](require[_0x17afe0(0x304)][_0x17afe0(0x22a)]),_0x17afe0(0x247));if(!fs[_0x17afe0(0x277)](_0x41e797)){const _0x581e7d={'jsonDataExtraction':{'standard':[{'paramName':_0x17afe0(0x37b),'paramValue':''},{'paramName':_0x17afe0(0x2ad),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x17afe0(0x2f1)},{'paramName':_0x17afe0(0x2a6),'paramValue':''},{'paramName':_0x17afe0(0x384),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x17afe0(0x20b)},{'paramName':_0x17afe0(0x2a6),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x17afe0(0x2f1)},{'paramName':_0x17afe0(0x2a6),'paramValue':''},{'paramName':_0x17afe0(0x384),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':'splity','paramValue':''}]}};fs[_0x17afe0(0x31d)](_0x41e797,JSON[_0x17afe0(0x303)](_0x581e7d,null,0x4));}const _0x2bace1=fs[_0x17afe0(0x27e)](path['join'](path[_0x17afe0(0x1e3)](require[_0x17afe0(0x304)][_0x17afe0(0x22a)]),_0x17afe0(0x1e4)),_0x17afe0(0x2f9)),_0x844a07=_0x2bace1[_0x17afe0(0x211)](_0x17afe0(0x258),_0x305dd4[_0x17afe0(0x336)]);_0x43a5d1[_0x17afe0(0x288)](_0x844a07);}),router['post'](a27_0x27632b(0x376),async(_0x2d56aa,_0x44f2a5)=>{const _0x4d06dc=a27_0x27632b,{actionName:_0x4c8c8d,contentLocation:_0x2ec5c9}=_0x2d56aa['body'],_0x35ad82=path[_0x4d06dc(0x321)](path['dirname'](require['main'][_0x4d06dc(0x22a)]),'cadviewer/settings/rest-api-parameters.json');fs['readFile'](_0x35ad82,'utf8',function(_0x5da717,_0x33595c){const _0x5edb22=_0x4d06dc;if(_0x5da717)_0x44f2a5['status'](0xc8)['json']({'parameters':[]});else{const _0x1e537e=JSON['parse'](_0x33595c);if(_0x1e537e[_0x4c8c8d]&&_0x1e537e[_0x4c8c8d][_0x2ec5c9])_0x44f2a5['status'](0xc8)[_0x5edb22(0x37b)]({'parameters':_0x1e537e[_0x4c8c8d][_0x2ec5c9]});else _0x1e537e[_0x4c8c8d]&&_0x1e537e[_0x4c8c8d][_0x5edb22(0x1fe)]?_0x44f2a5['status'](0xc8)[_0x5edb22(0x37b)]({'parameters':_0x1e537e[_0x4c8c8d][_0x5edb22(0x1fe)]}):_0x44f2a5[_0x5edb22(0x1fc)](0xc8)[_0x5edb22(0x37b)]({'parameters':[]});}});}),router[a27_0x27632b(0x366)](a27_0x27632b(0x30c),async(_0x18afb4,_0x184cad)=>{const _0x43fc2a=a27_0x27632b,{actionName:_0x501d01,contentLocation:_0x4c9ae6,parameters:_0x38ed46}=_0x18afb4[_0x43fc2a(0x2fc)],_0x59c523=path[_0x43fc2a(0x321)](path[_0x43fc2a(0x1e3)](require['main'][_0x43fc2a(0x22a)]),_0x43fc2a(0x247));fs['readFile'](_0x59c523,_0x43fc2a(0x2f9),function(_0x2e1e76,_0x18fc58){const _0x3d128a=_0x43fc2a;if(_0x2e1e76)_0x184cad[_0x3d128a(0x1fc)](0x199)[_0x3d128a(0x37b)]({'message':_0x3d128a(0x21a)});else{const _0xd119b8=JSON[_0x3d128a(0x33a)](_0x18fc58);!_0xd119b8[_0x501d01]&&(_0xd119b8[_0x501d01]={}),_0xd119b8[_0x501d01][_0x4c9ae6]=_0x38ed46,fs[_0x3d128a(0x231)](_0x59c523,JSON['stringify'](_0xd119b8,null,0x4),function(_0x356ac4){const _0x1984c0=_0x3d128a;_0x356ac4&&_0x184cad[_0x1984c0(0x1fc)](0x199)['json']({'message':_0x1984c0(0x21a)}),_0x184cad[_0x1984c0(0x1fc)](0xc8)[_0x1984c0(0x37b)]({'message':_0x1984c0(0x297)});});}});}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x237),protectedRoute,async(_0x2eaa0f,_0x4aae5)=>{const _0x339b78=a27_0x27632b,_0x57b838=fs[_0x339b78(0x27e)](path['join'](path['dirname'](require[_0x339b78(0x304)][_0x339b78(0x22a)]),_0x339b78(0x2e0)),_0x339b78(0x2f9)),_0x250878=_0x57b838[_0x339b78(0x211)](_0x339b78(0x258),_0x2eaa0f['version']);_0x4aae5['send'](_0x250878);}),router['post']('/doctor/check',async(_0x2530d6,_0x3c4188)=>{const _0x47246e=a27_0x27632b,_0x2f9cb3=getHotConfig(),_0x3958f3=_0x2f9cb3['converterLocation']['replaceAll']('//','/'),_0x54ac8c=_0x2f9cb3[_0x47246e(0x345)][_0x47246e(0x211)]('//','/'),_0x32e3d8=_0x2f9cb3['linklistLocation']['replaceAll']('//','/'),_0xcdf9c=''+_0x3958f3+_0x2f9cb3[_0x47246e(0x324)],_0x5853df=''+_0x54ac8c+_0x2f9cb3[_0x47246e(0x25d)],_0x2e0d42=''+_0x32e3d8+_0x2f9cb3['linklist_executable'],_0x1f2dfd=[],_0x2d0709=new Promise(_0x3d3cbb=>{const _0x2d46f4=_0x47246e;exec(os[_0x2d46f4(0x2e8)]()===_0x2d46f4(0x275)?'dir':'ls',_0x14e5a8=>{const _0x2c5caf=_0x2d46f4;_0x14e5a8?_0x1f2dfd[_0x2c5caf(0x31e)]({'title':_0x2c5caf(0x22d),'status':![],'priority':0x1}):_0x1f2dfd['push']({'title':_0x2c5caf(0x22d),'status':!![],'priority':0x1}),_0x3d3cbb();});}),_0x59818b=new Promise(_0xdd892c=>{const _0x105c64=_0x47246e;fs[_0x105c64(0x28f)](_0xcdf9c,fs[_0x105c64(0x310)][_0x105c64(0x206)],_0x724c69=>{const _0x2969af=_0x105c64;_0x724c69?_0x1f2dfd['push']({'title':_0x2969af(0x21b)+_0x2f9cb3[_0x2969af(0x324)]+_0x2969af(0x35a),'status':![],'priority':0x2}):_0x1f2dfd[_0x2969af(0x31e)]({'title':_0x2969af(0x21b)+_0x2f9cb3[_0x2969af(0x324)]+_0x2969af(0x35a),'status':!![],'priority':0x2}),_0xdd892c();});}),_0x4229c3=new Promise(_0x100b90=>{const _0x32bc83=_0x47246e;fs['access'](_0x5853df,fs[_0x32bc83(0x310)]['X_OK'],_0x5594ae=>{const _0x4d740b=_0x32bc83;_0x5594ae?_0x1f2dfd[_0x4d740b(0x31e)]({'title':_0x4d740b(0x21b)+_0x2f9cb3['dwgmerge_executable']+_0x4d740b(0x35a),'status':![],'priority':0x3}):_0x1f2dfd[_0x4d740b(0x31e)]({'title':_0x4d740b(0x21b)+_0x2f9cb3[_0x4d740b(0x25d)]+_0x4d740b(0x35a),'status':!![],'priority':0x3}),_0x100b90();});}),_0x4ab25f=new Promise(_0x22b00e=>{const _0x4a424f=_0x47246e;fs[_0x4a424f(0x28f)](_0x2e0d42,fs[_0x4a424f(0x310)][_0x4a424f(0x206)],_0x58db4e=>{const _0x411780=_0x4a424f;_0x58db4e?_0x1f2dfd[_0x411780(0x31e)]({'title':_0x411780(0x21b)+_0x2f9cb3['linklist_executable']+_0x411780(0x35a),'status':![],'priority':0x4}):_0x1f2dfd['push']({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x2f9cb3[_0x411780(0x36a)]+'\x22\x20executable','status':!![],'priority':0x4}),_0x22b00e();});}),_0x193fbe=new Promise(_0x12ca85=>{const _0x182401=_0x47246e,_0x3fc104=new Date(),_0x212253=_0x3fc104[_0x182401(0x2c3)]()['toString']()['padStart'](0x2,'0')+'_'+(_0x3fc104[_0x182401(0x245)]()+0x1)['toString']()['padStart'](0x2,'0')+'_'+_0x3fc104[_0x182401(0x35e)](),{displayDay:_0x49b89f}=_0x2530d6[_0x182401(0x2fc)];fs[_0x182401(0x28f)](path[_0x182401(0x321)](path['dirname'](require[_0x182401(0x304)][_0x182401(0x22a)]),_0x182401(0x31f),_0x182401(0x379)+(_0x49b89f??_0x212253)+'.log'),fs[_0x182401(0x310)][_0x182401(0x34a)],_0x1d4e31=>{const _0x301d43=_0x182401;_0x1d4e31?_0x1f2dfd[_0x301d43(0x31e)]({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x49b89f??_0x212253)+'.log\x22','status':![],'priority':0x5}):_0x1f2dfd[_0x301d43(0x31e)]({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x49b89f??_0x212253)+'.log\x22','status':!![],'priority':0x5}),_0x12ca85();});}),_0x474542=(_0x757855,_0x380950)=>{const _0x3970d0=_0x47246e,_0x5c895d=path[_0x3970d0(0x321)](path[_0x3970d0(0x1e3)](require[_0x3970d0(0x304)][_0x3970d0(0x22a)]),_0x757855);return new Promise(_0x1603c3=>{const _0x3ac494=_0x3970d0;fs[_0x3ac494(0x28f)](path[_0x3ac494(0x321)](path['dirname'](_0x5c895d)),fs[_0x3ac494(0x310)][_0x3ac494(0x36f)]|fs['constants']['W_OK'],_0x37f9b9=>{const _0x3b78c9=_0x3ac494;_0x37f9b9?_0x1f2dfd[_0x3b78c9(0x31e)]({'title':_0x3b78c9(0x2a7)+_0x757855,'status':![],'priority':_0x380950+0x6}):_0x1f2dfd[_0x3b78c9(0x31e)]({'title':_0x3b78c9(0x2a7)+_0x757855,'status':!![],'priority':_0x380950+0x6}),_0x1603c3();});});},_0x323fab=[_0x47246e(0x2f8),'/converters/autoxchange/linux/',_0x47246e(0x342),'/converters/files/print/','/converters/files/pdf/',_0x47246e(0x383),_0x47246e(0x2b3)],_0xbe7d2e=_0x323fab['map'](_0x474542);Promise[_0x47246e(0x318)]([_0x2d0709,_0x59818b,_0x4229c3,_0x4ab25f,_0x193fbe,..._0xbe7d2e])[_0x47246e(0x2c2)](()=>{const _0xa313af=_0x47246e;_0x3c4188[_0xa313af(0x1fc)](0xc8)[_0xa313af(0x37b)]({'checking_list':_0x1f2dfd});})[_0x47246e(0x271)](()=>{const _0x23c8f3=_0x47246e;_0x3c4188['status'](0x1f4)[_0x23c8f3(0x37b)]({'error':'An\x20error\x20occurred\x20while\x20checking.'});});}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x2fe),protectedRoute,async(_0x207b08,_0x39d58f)=>{const _0x3bca26=a27_0x27632b,_0x4f40a7=fs['readFileSync'](path[_0x3bca26(0x321)](path[_0x3bca26(0x1e3)](require[_0x3bca26(0x304)][_0x3bca26(0x22a)]),_0x3bca26(0x353)),_0x3bca26(0x2f9)),_0x3f7c5d=_0x4f40a7[_0x3bca26(0x211)]('{version}',_0x207b08[_0x3bca26(0x336)]);_0x39d58f[_0x3bca26(0x288)](_0x3f7c5d);}),router[a27_0x27632b(0x366)](a27_0x27632b(0x2eb),async(_0x5d7761,_0x2d3f0d)=>{const _0x128b92=a27_0x27632b;let _0x12c83d;try{const [_0x3b045f]=await conn[_0x128b92(0x2f6)]()[_0x128b92(0x34c)]('SELECT\x20*\x20FROM\x20users',[]);_0x12c83d=_0x3b045f;}catch(_0x2ed231){console[_0x128b92(0x23b)](_0x2ed231),_0x2d3f0d[_0x128b92(0x1fc)](0x1f4)[_0x128b92(0x37b)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x2d3f0d[_0x128b92(0x1fc)](0xc8)['json']({'success':!![],'data':_0x12c83d});}),router['post']('/users',upload[a27_0x27632b(0x373)]('avatar'),async(_0xdafc75,_0x458c26)=>{const _0x221218=a27_0x27632b,{id:_0x4b84ec,first_name:_0x1e06d6,last_name:_0x5a9f0d,username:_0x2841f1,email:_0x5cee4d,password:_0x41af45,is_enabled:_0x8b58fa}=_0xdafc75['body'],_0x54cde8=_0xdafc75[_0x221218(0x2fc)][_0x221218(0x25a)]===_0x221218(0x360)?'admin':_0xdafc75[_0x221218(0x2fc)][_0x221218(0x25a)]==='demo_user'?'demo_user':_0x221218(0x1f1);let _0x5a669f;console[_0x221218(0x23b)]('=============================>');_0x41af45&&(_0x5a669f=await bcrypt[_0x221218(0x1f8)](_0x41af45,0xa));let _0x4f4cef=null;if(_0xdafc75['file']){const _0x21fde6=_0x221218(0x25c)+randomUUID()+_0x221218(0x34b);fs[_0x221218(0x329)](_0xdafc75[_0x221218(0x221)][_0x221218(0x2c7)],'./'+_0x21fde6),fs[_0x221218(0x201)](_0xdafc75[_0x221218(0x221)]['path']),config[_0x221218(0x29a)]?_0x4f4cef=config[_0x221218(0x369)]+'/'+_0x21fde6:_0x4f4cef=config[_0x221218(0x2e3)]+'/'+_0x21fde6;}if(_0x4b84ec){try{let [_0x2ab539]=await conn[_0x221218(0x2f6)]()[_0x221218(0x34c)](_0x221218(0x306),[_0x5cee4d,_0x2841f1,_0x4b84ec]);if(_0x2ab539[_0x221218(0x2b5)]>0x0)_0x458c26[_0x221218(0x1fc)](0x199)['json']({'error':_0x221218(0x217)});else{!_0xdafc75[_0x221218(0x221)]&&([_0x2ab539]=await conn[_0x221218(0x2f6)]()[_0x221218(0x34c)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x4b84ec]),_0x4f4cef=_0x2ab539[0x0][_0x221218(0x213)]);const _0x36042d=_0x221218(0x26e)+(_0x41af45?_0x221218(0x23c):'')+'`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?';await conn[_0x221218(0x2f6)]()[_0x221218(0x34c)](_0x36042d,_0x41af45?[_0x4f4cef,_0x1e06d6,_0x5a9f0d,_0x2841f1,_0x5cee4d,_0x5a669f,_0x8b58fa,_0x54cde8,_0x4b84ec]:[_0x4f4cef,_0x1e06d6,_0x5a9f0d,_0x2841f1,_0x5cee4d,_0x8b58fa,_0x54cde8,_0x4b84ec]);}}catch(_0x5837e3){console[_0x221218(0x23b)](_0x5837e3),_0x458c26[_0x221218(0x1fc)](0x1f4)[_0x221218(0x37b)]({'error':_0x221218(0x2e5)});return;}_0x458c26[_0x221218(0x1fc)](0xc8)[_0x221218(0x37b)]({'success':!![],'message':_0x221218(0x264)});}else{try{const [_0x1b5b66]=await conn[_0x221218(0x2f6)]()[_0x221218(0x34c)](_0x221218(0x205),[_0x5cee4d,_0x2841f1]);if(_0x1b5b66[_0x221218(0x2b5)]>0x0)_0x458c26[_0x221218(0x1fc)](0x199)['json']({'error':_0x221218(0x217)});else{const _0x5184a0=randomUUID();await conn[_0x221218(0x2f6)]()[_0x221218(0x34c)](_0x221218(0x28a),[_0x4f4cef,_0x1e06d6,_0x5a9f0d,_0x2841f1,_0x5cee4d,_0x5a669f,_0x54cde8,_0x8b58fa,_0x5184a0]);const _0x5c8b00='./uploads/'+_0x5184a0;fs[_0x221218(0x286)](_0x5c8b00);}}catch(_0x3edaf8){console['log'](_0x3edaf8),_0x458c26[_0x221218(0x1fc)](0x1f4)['json']({'error':_0x221218(0x2e5)});return;}_0x458c26[_0x221218(0x1fc)](0xc8)[_0x221218(0x37b)]({'success':!![],'message':_0x221218(0x33d)});}}),router[a27_0x27632b(0x1f7)]('/users/flush-dir',async(_0x3ee1ea,_0x277b7d)=>{const _0x487c17=a27_0x27632b,{userId:_0x1c91f6}=_0x3ee1ea['body'];let _0x442032;try{const [_0x387365]=await conn[_0x487c17(0x2f6)]()['execute'](_0x487c17(0x2ce),[_0x1c91f6]);_0x387365[_0x487c17(0x2b5)]>0x0&&(_0x442032=_0x387365[0x0]);}catch(_0x39e5ed){console[_0x487c17(0x23b)]({'err':_0x39e5ed}),_0x277b7d['status'](0x1f4)[_0x487c17(0x37b)]({'error':_0x487c17(0x2e5)});return;}if(!_0x442032){_0x277b7d['status'](0x191)[_0x487c17(0x37b)]({'error':'Invalid\x20user'});return;}let _0xac64f4=_0x442032[_0x487c17(0x2d7)];if(!_0xac64f4){_0xac64f4=randomUUID();try{await conn['promise']()[_0x487c17(0x34c)](_0x487c17(0x2cb),[_0xac64f4,_0x1c91f6]);}catch(_0x4d70eb){console[_0x487c17(0x23b)]({'err':_0x4d70eb}),_0x277b7d[_0x487c17(0x1fc)](0x1f4)[_0x487c17(0x37b)]({'error':_0x487c17(0x2e5)});return;}}const _0x1e4910=_0x487c17(0x238)+_0xac64f4;console[_0x487c17(0x23b)]('===================='),console['log'](_0x1e4910),!fs[_0x487c17(0x277)](_0x1e4910)&&fs['mkdirSync'](_0x1e4910),cleanCacheForUserFiles(_0x1e4910),fs[_0x487c17(0x2a4)](_0x1e4910,{'recursive':!![],'force':!![]}),fs[_0x487c17(0x286)](_0x1e4910),_0x277b7d[_0x487c17(0x1fc)](0xc8)[_0x487c17(0x37b)]({'success':!![],'message':_0x487c17(0x2b0)});}),router['delete']('/users/:userId',async(_0x654987,_0x8f7ba0)=>{const _0x339733=a27_0x27632b,_0x27dcbd=_0x654987['params'][_0x339733(0x28d)];try{let _0x19fc68;try{const [_0x22447]=await conn[_0x339733(0x2f6)]()[_0x339733(0x34c)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x27dcbd]);_0x22447[_0x339733(0x2b5)]>0x0&&(_0x19fc68=_0x22447[0x0]);}catch(_0x245a2a){console[_0x339733(0x23b)]({'err':_0x245a2a}),_0x8f7ba0['status'](0x1f4)[_0x339733(0x37b)]({'error':_0x339733(0x2e5)});return;}if(!_0x19fc68){_0x8f7ba0['status'](0x191)[_0x339733(0x37b)]({'error':_0x339733(0x35f)});return;}let _0x2596ff=_0x19fc68[_0x339733(0x2d7)];if(_0x2596ff){const _0x41ff0d=_0x339733(0x238)+_0x2596ff;fs[_0x339733(0x277)](_0x41ff0d)&&(cleanCacheForUserFiles(_0x41ff0d),fs[_0x339733(0x2a4)](_0x41ff0d,{'recursive':!![],'force':!![]}));}await conn[_0x339733(0x2f6)]()['execute'](_0x339733(0x374),[_0x27dcbd]);}catch(_0x3af0f7){console[_0x339733(0x23b)](_0x3af0f7),_0x8f7ba0[_0x339733(0x1fc)](0x1f4)[_0x339733(0x37b)]({'error':_0x339733(0x2e5)});return;}_0x8f7ba0[_0x339733(0x1fc)](0xc8)[_0x339733(0x37b)]({'success':!![],'message':_0x339733(0x37d)});}),router[a27_0x27632b(0x1e9)]('/metrics',async(_0xac23df,_0x536053)=>{const _0x611d16=a27_0x27632b,_0x5a179d=osu['cpu'],_0x2cc3c1=osu[_0x611d16(0x325)],_0x4e1236=osu['drive'],_0x1f1215=osu['os'],_0x3641da={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x144790=os[_0x611d16(0x2e8)]()===_0x611d16(0x275)?'c:':'/';const _0x55930b=await _0x4e1236[_0x611d16(0x249)](_0x144790);_0x3641da[_0x611d16(0x343)]=_0x55930b[_0x611d16(0x227)],_0x3641da[_0x611d16(0x315)]=_0x55930b[_0x611d16(0x2ee)],_0x3641da[_0x611d16(0x355)]=_0x55930b[_0x611d16(0x355)],_0x3641da[_0x611d16(0x265)]=_0x55930b[_0x611d16(0x224)];}catch(_0x4f0559){console[_0x611d16(0x23b)](_0x611d16(0x2f2),_0x4f0559);}const _0x36fd09={'usage':0x0,'count':0x0};try{_0x36fd09[_0x611d16(0x234)]=await _0x5a179d[_0x611d16(0x234)](),_0x36fd09['count']=_0x5a179d[_0x611d16(0x207)]();}catch(_0x4cc294){console[_0x611d16(0x23b)]('Error\x20getting\x20cpu\x20usage',_0x4cc294);}const _0x4f9e5d={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x4f9e5d['os']=await _0x1f1215['oos'](),_0x4f9e5d[_0x611d16(0x2e8)]=_0x1f1215[_0x611d16(0x2e8)](),_0x4f9e5d['ip']=_0x1f1215['ip'](),_0x4f9e5d[_0x611d16(0x255)]=_0x1f1215[_0x611d16(0x255)](),_0x4f9e5d[_0x611d16(0x32f)]=_0x1f1215[_0x611d16(0x32f)](),_0x4f9e5d[_0x611d16(0x254)]=_0x1f1215['type'](),_0x4f9e5d[_0x611d16(0x36e)]=_0x1f1215['arch'](),_0x4f9e5d[_0x611d16(0x20d)]=await osu['osCmd']['who'](),_0x4f9e5d['whoami']=await osu['osCmd'][_0x611d16(0x294)](),_0x4f9e5d['vmstats']=await osu[_0x611d16(0x381)][_0x611d16(0x2aa)]();}catch(_0x5a6495){console['log'](_0x611d16(0x20c),_0x5a6495);}const _0x5d054d={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x5d054d[_0x611d16(0x371)]=await osu[_0x611d16(0x26b)]['totalProcesses'](),_0x5d054d['zombieProcesses']=await osu[_0x611d16(0x26b)][_0x611d16(0x308)]();}catch(_0x25d418){console[_0x611d16(0x23b)](_0x611d16(0x2ea),_0x25d418);}let _0x4fabb0={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x20d0d3=await _0x2cc3c1[_0x611d16(0x249)]();_0x4fabb0[_0x611d16(0x31c)]=_0x20d0d3[_0x611d16(0x31c)],_0x4fabb0[_0x611d16(0x24f)]=_0x20d0d3['used']/0x400/0x400,_0x4fabb0[_0x611d16(0x301)]=_0x20d0d3[_0x611d16(0x339)]/0x400/0x400;}catch(_0x5014fb){console[_0x611d16(0x23b)](_0x611d16(0x2e2),_0x5014fb);}let _0x18fa6b=0x0;try{_0x18fa6b=await conn['promise']()[_0x611d16(0x2bd)](_0x611d16(0x2df))[_0x611d16(0x2c2)](([_0x25af31])=>_0x25af31[0x0][_0x611d16(0x339)]);}catch(_0xe5ed62){console[_0x611d16(0x23b)](_0x611d16(0x272),_0xe5ed62);}const _0x3d41e5=getMonitoringData(),_0xcc0517=_0x3d41e5['filter'](_0x31f4e0=>_0x31f4e0[_0x611d16(0x226)]!==null&&_0x31f4e0[_0x611d16(0x226)]!==undefined),_0x5743ce=_0x3d41e5[_0x611d16(0x2a5)](_0x35793f=>_0x35793f[_0x611d16(0x2cf)]!==null&&_0x35793f['conversionMemoryUsage']!==undefined)['map'](_0x14ba3c=>parseFloat(_0x14ba3c[_0x611d16(0x2cf)][_0x611d16(0x211)]('Kb')[_0x611d16(0x33b)]())),_0x106c9d=_0xcc0517[_0x611d16(0x28b)]((_0x72980f,_0x481f2f)=>_0x72980f+parseFloat(_0x481f2f[_0x611d16(0x226)]),0x0)/_0xcc0517['length'],_0x52a519=_0x5743ce[_0x611d16(0x28b)]((_0x33bf53,_0x1255e4)=>_0x33bf53+_0x1255e4,0x0)/_0x5743ce['length'];_0x536053[_0x611d16(0x37b)]({'requestsPerSecond':counter[_0x611d16(0x35d)](),'diskUsage':_0x3641da,'cpus':_0x36fd09,'system':_0x4f9e5d,'process':_0x5d054d,'totalMonitoringData':_0x3d41e5['length'],'memory':_0x4fabb0,'totalUsers':_0x18fa6b,'avgConvertionTime':_0x106c9d,'avgMemoryUsage':_0x52a519});}),router[a27_0x27632b(0x366)](a27_0x27632b(0x29b),(_0x3e886d,_0x4db73a)=>{const _0x310145=a27_0x27632b;counter['reset'](),_0x4db73a[_0x310145(0x37b)]({'message':'Counter\x20reset\x20successfully'});});const getMonitoringData=()=>{const _0x1dfc91=a27_0x27632b,_0x584bdc=_0x1dfc91(0x347);let _0x37d4f0=[];try{_0x37d4f0=JSON[_0x1dfc91(0x33a)](fs['readFileSync'](_0x584bdc));}catch(_0x2d2608){console[_0x1dfc91(0x23b)]('Error\x20reading\x20monitoring\x20file');}return _0x37d4f0;};router[a27_0x27632b(0x1e9)](a27_0x27632b(0x2b4),async(_0x4dd11c,_0x5b6e3a)=>{const _0x2aafe3=a27_0x27632b,{page:page=0x1,limit:limit=0xa}=_0x4dd11c['query'],_0x3ce9a4=(page-0x1)*limit;try{const _0x4478c4=getMonitoringData(),_0x3a6b4e=_0x4478c4[_0x2aafe3(0x2b5)],_0x54997a=Math[_0x2aafe3(0x285)](_0x3a6b4e/limit),_0x537a32=_0x4478c4['slice'](_0x3ce9a4,_0x3ce9a4+limit);_0x5b6e3a[_0x2aafe3(0x1fc)](0xc8)['json']({'data':_0x537a32,'page':parseInt(''+page),'totalPages':_0x54997a,'total':_0x3a6b4e});}catch(_0x2bb82b){console[_0x2aafe3(0x23b)](_0x2bb82b),_0x5b6e3a[_0x2aafe3(0x1fc)](0x1f4)[_0x2aafe3(0x37b)]({'error':_0x2aafe3(0x2e5)});}}),router[a27_0x27632b(0x1f7)](a27_0x27632b(0x2a9),async(_0x435948,_0x523a01)=>{const _0xe34d67=a27_0x27632b,_0x5750bc='cadviewer/settings/requests-callapiconversion-monitoring.json';try{fs['writeFileSync'](_0x5750bc,JSON[_0xe34d67(0x303)]([],null,0x4)),analyzeConverterFiles(),_0x523a01[_0xe34d67(0x1fc)](0xc8)['json']({'message':_0xe34d67(0x27c)});}catch(_0x31bb22){console[_0xe34d67(0x23b)](_0x31bb22),_0x523a01['status'](0x1f4)[_0xe34d67(0x37b)]({'error':_0xe34d67(0x2e5)});}}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x287),async(_0x3b8cca,_0x51acd1)=>{const _0x232969=a27_0x27632b,_0x3acc91=getHotConfig()[_0x232969(0x220)][_0x232969(0x211)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x3b8cca[_0x232969(0x2bd)],_0xf9dbc7=(page-0x1)*limit;try{const _0x3bbc03=_0x3acc91+_0x232969(0x356);console['log'](_0x3bbc03);const _0x3a0a1a=fs[_0x232969(0x27e)](_0x3bbc03,'utf8'),_0xee16d3=_0x3a0a1a[_0x232969(0x27a)]('\x0a'),_0x42202a=[];_0xee16d3[_0x232969(0x359)](_0x9f214b=>{const _0x513b99=_0x232969,_0x1d981f=_0x9f214b[_0x513b99(0x27a)](',');if(_0x1d981f[_0x513b99(0x2b5)]<0x4)return;const _0x103749=_0x1d981f[0x0],_0x3c95f6=_0x1d981f[0x1],_0x857323=parseFloat(_0x1d981f[0x2]);_0x42202a[_0x513b99(0x31e)]({'file':_0x103749[_0x513b99(0x211)]('\x22',''),'action':_0x3c95f6,'timeSpend':_0x857323,'memoryUsage':_0x1d981f[0x3]});});const _0xc3e2a3=_0x42202a[_0x232969(0x2b5)],_0x2fc12f=Math['ceil'](_0xc3e2a3/limit),_0xe52f0d=_0x42202a[_0x232969(0x209)](_0xf9dbc7,_0xf9dbc7+limit);_0x51acd1[_0x232969(0x1fc)](0xc8)['json']({'data':_0xe52f0d,'page':parseInt(''+page),'totalPages':_0x2fc12f,'total':_0xc3e2a3});}catch(_0x4c5a90){console[_0x232969(0x23b)](_0x4c5a90),_0x51acd1[_0x232969(0x1fc)](0x1f4)[_0x232969(0x37b)]({'error':_0x232969(0x2e5)});}}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x24d),async(_0x31fc90,_0x53e229)=>{const _0x2579e7=a27_0x27632b,_0x2b6acf=path[_0x2579e7(0x321)](path[_0x2579e7(0x1e3)](require[_0x2579e7(0x304)]['filename']),_0x2579e7(0x293),'files');try{let _0x1fdca3=0x0,_0x46e3fc=0x0;function _0x1846e5(_0x1b4549){const _0x1b949a=_0x2579e7;let _0x4aa62a=0x0,_0x2d7aae=0x0;if(fs['existsSync'](_0x1b4549)){const _0xca90c=fs[_0x1b949a(0x346)](_0x1b4549);_0x2d7aae=0x0;for(const _0x43d376 of _0xca90c){const _0x55081c=path[_0x1b949a(0x321)](_0x1b4549,_0x43d376),_0x2970c9=fs[_0x1b949a(0x2fb)](_0x55081c);if(_0x2970c9[_0x1b949a(0x26f)]()&&_0x43d376!==_0x1b949a(0x2dc))_0x2d7aae++,_0x4aa62a+=_0x2970c9[_0x1b949a(0x368)];else{if(_0x2970c9[_0x1b949a(0x270)]()){}}}}return{'size':_0x4aa62a,'count':_0x2d7aae};}const _0x223244=_0x1846e5(_0x2b6acf);_0x1fdca3=_0x223244[_0x2579e7(0x368)],_0x46e3fc=_0x223244['count'],_0x53e229[_0x2579e7(0x37b)]({'fileCount':_0x46e3fc,'totalSize':_0x1fdca3});}catch(_0x5ebe3d){console['error'](_0x2579e7(0x251),_0x5ebe3d),_0x53e229['status'](0x1f4)[_0x2579e7(0x37b)]({'error':_0x2579e7(0x37c)});}}),router[a27_0x27632b(0x1f7)](a27_0x27632b(0x2c0),async(_0x2e089f,_0x4ef89a)=>{const _0x572e49=a27_0x27632b,_0x26142c=path['join'](path[_0x572e49(0x1e3)](require[_0x572e49(0x304)][_0x572e49(0x22a)]),_0x572e49(0x293),'files');try{function _0x5bbdaa(_0x50121b){const _0x1ae43a=_0x572e49;if(fs['existsSync'](_0x50121b)){const _0x3c246d=fs[_0x1ae43a(0x346)](_0x50121b);for(const _0x1e3bf9 of _0x3c246d){const _0x3e8002=path[_0x1ae43a(0x321)](_0x50121b,_0x1e3bf9),_0x31d7b8=fs[_0x1ae43a(0x2fb)](_0x3e8002);if(_0x31d7b8['isDirectory']()){}else _0x1e3bf9!=='.gitkeep'&&fs[_0x1ae43a(0x201)](_0x3e8002);}}}_0x5bbdaa(_0x26142c),analyzeConverterFiles(),_0x4ef89a['json']({'message':_0x572e49(0x2a1)});}catch(_0x5e9b3e){console['error'](_0x572e49(0x2d5),_0x5e9b3e),_0x4ef89a['status'](0x1f4)[_0x572e49(0x37b)]({'error':_0x572e49(0x266)});}}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x1fd),async(_0x4aacbb,_0x14c0c9)=>{const _0x36ffbb=a27_0x27632b;_0x14c0c9['sendFile'](path[_0x36ffbb(0x321)](path[_0x36ffbb(0x1e3)](require[_0x36ffbb(0x304)][_0x36ffbb(0x22a)]),_0x36ffbb(0x243)));}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x29d),protectedRoute,async(_0x269273,_0x5e2c2f)=>{const _0x207311=a27_0x27632b,_0x49429f=fs[_0x207311(0x27e)](path[_0x207311(0x321)](path[_0x207311(0x1e3)](require[_0x207311(0x304)]['filename']),_0x207311(0x2d4)),_0x207311(0x2f9)),_0xb2132c=_0x49429f['replaceAll'](_0x207311(0x258),_0x269273[_0x207311(0x336)]);_0x5e2c2f[_0x207311(0x288)](_0xb2132c);}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x351),async(_0x12ebd8,_0x465d28)=>{const _0x16acd2=a27_0x27632b,{page:page=0x1,limit:limit=0x10}=_0x12ebd8[_0x16acd2(0x2bd)],_0x5ee919=JSON['parse'](fs[_0x16acd2(0x27e)](path[_0x16acd2(0x321)](path[_0x16acd2(0x1e3)](require['main']['filename']),'cadviewer/settings/converter-files-analysis.json'))),_0x3e4f8e=(page-0x1)*limit,_0x5bae88=page*limit,_0x1606aa=_0x5ee919[_0x16acd2(0x2f0)][_0x16acd2(0x2b5)],_0x55d104=Math[_0x16acd2(0x285)](_0x1606aa/limit),_0x2ebb74=_0x5ee919[_0x16acd2(0x2f0)][_0x16acd2(0x209)](_0x3e4f8e,_0x5bae88);_0x465d28[_0x16acd2(0x37b)]({'files':_0x2ebb74,'pagination':{'total':_0x1606aa,'totalPages':_0x55d104,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router[a27_0x27632b(0x1e9)]('/cache/csv/:file',async(_0x2adb74,_0x4b0958)=>{const _0x144a4a=a27_0x27632b,{file:_0x17f4c6}=_0x2adb74[_0x144a4a(0x269)],_0x33f74b=path[_0x144a4a(0x321)](path[_0x144a4a(0x1e3)](require[_0x144a4a(0x304)]['filename']),_0x144a4a(0x293),_0x144a4a(0x2f0)),_0x219c5f=path['join'](_0x33f74b,_0x17f4c6),_0x1c3e07=fs[_0x144a4a(0x27e)](_0x219c5f,_0x144a4a(0x2f9)),_0x21f8bc=_0x1c3e07[_0x144a4a(0x27a)]('\x0a'),_0x1462a3=_0x21f8bc[_0x144a4a(0x361)](_0x4aa650=>{const _0x236923=_0x144a4a,_0x4fe73c=_0x4aa650[_0x236923(0x27a)](',');return _0x4fe73c[_0x236923(0x361)](_0x3b2e21=>_0x3b2e21['replaceAll']('\x22',''));});_0x4b0958[_0x144a4a(0x37b)](_0x1462a3);}),router[a27_0x27632b(0x1e9)](a27_0x27632b(0x248),async(_0x1d5e81,_0x2c7d20)=>{const _0x46f116=a27_0x27632b,{id:_0x4fb455}=_0x1d5e81[_0x46f116(0x269)],_0x1d67ac=path[_0x46f116(0x321)](path['dirname'](require[_0x46f116(0x304)][_0x46f116(0x22a)]),_0x46f116(0x293),_0x46f116(0x2f0)),_0x3d89b7=path[_0x46f116(0x321)](_0x1d67ac,_0x4fb455);if(_0x3d89b7[_0x46f116(0x331)](_0x46f116(0x2be))){var _0x3c48bd=require(_0x46f116(0x1f6));const _0x414af7=fs[_0x46f116(0x27e)](_0x3d89b7),_0x3d51d2=_0x3c48bd[_0x46f116(0x34d)](_0x414af7);_0x2c7d20[_0x46f116(0x24b)](_0x46f116(0x320),_0x46f116(0x2c9)),_0x2c7d20[_0x46f116(0x288)](_0x3d51d2);}else _0x2c7d20[_0x46f116(0x290)](_0x3d89b7);}),router[a27_0x27632b(0x1f7)](a27_0x27632b(0x248),async(_0x14adcf,_0x1d7126)=>{const _0x15d3db=a27_0x27632b,{id:_0x441841}=_0x14adcf[_0x15d3db(0x269)],_0x599784=path['join'](path[_0x15d3db(0x1e3)](require[_0x15d3db(0x304)][_0x15d3db(0x22a)]),_0x15d3db(0x293),_0x15d3db(0x2f0)),_0x3f388b=JSON[_0x15d3db(0x33a)](fs['readFileSync'](path[_0x15d3db(0x321)](path[_0x15d3db(0x1e3)](require[_0x15d3db(0x304)][_0x15d3db(0x22a)]),_0x15d3db(0x367)))),_0x54c1aa=_0x3f388b[_0x15d3db(0x2f0)]['find'](_0x401eb1=>_0x401eb1[_0x15d3db(0x2f4)]===_0x441841);if(_0x54c1aa){try{fs[_0x15d3db(0x277)](path['join'](_0x599784,_0x54c1aa['name']))&&fs[_0x15d3db(0x201)](path['join'](_0x599784,_0x54c1aa[_0x15d3db(0x2f4)]));}catch(_0x4860ec){console[_0x15d3db(0x23b)](_0x15d3db(0x218),{'e':_0x4860ec});}(_0x54c1aa[_0x15d3db(0x22b)]??[])[_0x15d3db(0x359)](_0x180da0=>{const _0x1f4ff4=_0x15d3db;try{fs[_0x1f4ff4(0x277)](path[_0x1f4ff4(0x321)](_0x599784,_0x180da0['id']))&&fs[_0x1f4ff4(0x201)](path['join'](_0x599784,_0x180da0['id']));}catch(_0x280631){console[_0x1f4ff4(0x23b)](_0x1f4ff4(0x218),{'e':_0x280631});}});}analyzeConverterFiles(),_0x1d7126[_0x15d3db(0x37b)]({'message':'File\x20deleted\x20successfully'});});const deleteOldDemoUsers=async()=>{const _0x51407d=a27_0x27632b;console['log']('Deleting\x20old\x20demo_user\x20accounts...');const _0x4a614d=config[_0x51407d(0x2d0)],_0x1b0e90=_0x51407d(0x2e7);try{const [_0x5333fe]=await conn[_0x51407d(0x2f6)]()['execute'](_0x1b0e90,[_0x4a614d]),_0x6f4025=_0x5333fe[_0x51407d(0x361)](_0x18c729=>_0x18c729[_0x51407d(0x2d7)]),_0x33b1b5=_0x5333fe[_0x51407d(0x361)](_0x35c1b7=>_0x35c1b7[_0x51407d(0x327)]);console['log'](_0x33b1b5),await conn[_0x51407d(0x2f6)]()[_0x51407d(0x34c)](_0x51407d(0x268),[_0x4a614d]),_0x6f4025[_0x51407d(0x359)](_0x4509d6=>{const _0x57d6cf=_0x51407d;try{const _0x1a0b13='./uploads/'+_0x4509d6;cleanCacheForUserFiles(_0x1a0b13),fs[_0x57d6cf(0x1ea)](_0x1a0b13);}catch(_0x40918f){console[_0x57d6cf(0x344)](_0x57d6cf(0x309),_0x40918f);}}),console[_0x51407d(0x23b)](_0x51407d(0x244)+_0x5333fe[_0x51407d(0x2b5)]+_0x51407d(0x2f7)+_0x4a614d+_0x51407d(0x26c));}catch(_0x306113){console['error'](_0x51407d(0x35b),_0x306113);}};schedule['scheduleJob'](a27_0x27632b(0x352),deleteOldDemoUsers),router['get'](a27_0x27632b(0x252),protectedRoute,async(_0x3c5d29,_0x55c5d0)=>{const _0x582e42=a27_0x27632b,_0x1a1846=fs[_0x582e42(0x27e)](path[_0x582e42(0x321)](path[_0x582e42(0x1e3)](require['main'][_0x582e42(0x22a)]),_0x582e42(0x34e)),_0x582e42(0x2f9)),_0x23fe86=_0x1a1846[_0x582e42(0x211)](_0x582e42(0x258),_0x3c5d29[_0x582e42(0x336)]);_0x55c5d0[_0x582e42(0x288)](_0x23fe86);});const exportUsersList=async()=>{const _0x40c61b=a27_0x27632b;console[_0x40c61b(0x23b)](_0x40c61b(0x24a));const _0x4cc012=path[_0x40c61b(0x321)](path[_0x40c61b(0x1e3)](require[_0x40c61b(0x304)][_0x40c61b(0x22a)]),_0x40c61b(0x233));!fs['existsSync'](_0x4cc012)&&fs[_0x40c61b(0x286)](_0x4cc012);const _0x155923=config[_0x40c61b(0x219)]||_0x40c61b(0x332);let _0x47a171;const _0x795aa7=path[_0x40c61b(0x321)](_0x4cc012,'last-users-export.json');if(fs['existsSync'](_0x795aa7))try{const _0x9adad7=JSON[_0x40c61b(0x33a)](fs[_0x40c61b(0x27e)](_0x795aa7,_0x40c61b(0x2f9)));_0x47a171=new Date(_0x9adad7['lastExportDate']);}catch(_0x7d71ac){console[_0x40c61b(0x344)](_0x40c61b(0x260),_0x7d71ac),_0x47a171=calculateDefaultLastExportDate(_0x155923);}else _0x47a171=calculateDefaultLastExportDate(_0x155923);const _0x32fb6b=new Date(),_0x13a346=_0x32fb6b[_0x40c61b(0x35e)]()+'-'+String(_0x32fb6b[_0x40c61b(0x245)]()+0x1)['padStart'](0x2,'0')+'-'+String(_0x32fb6b[_0x40c61b(0x2c3)]())[_0x40c61b(0x2e6)](0x2,'0'),_0x333429=_0x40c61b(0x28c)+_0x13a346+_0x40c61b(0x1f3),_0x5af617=path[_0x40c61b(0x321)](_0x4cc012,_0x333429);try{const _0x26b220='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20',[_0x44aa8c]=await conn[_0x40c61b(0x2f6)]()[_0x40c61b(0x34c)](_0x26b220,[_0x47a171]);if(_0x44aa8c[_0x40c61b(0x2b5)]===0x0){console['log'](_0x40c61b(0x32e));return;}let _0x4f5435='email,firstname,lastname\x0a';_0x44aa8c['forEach'](_0x5779c4=>{const _0x561355=_0x40c61b,_0x1f23b3=_0x5779c4['email']?'\x22'+_0x5779c4[_0x561355(0x327)][_0x561355(0x24c)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x2b9766=_0x5779c4['first_name']?'\x22'+_0x5779c4[_0x561355(0x377)][_0x561355(0x24c)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x16c8e5=_0x5779c4['last_name']?'\x22'+_0x5779c4[_0x561355(0x2d9)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x4f5435+=_0x1f23b3+','+_0x2b9766+','+_0x16c8e5+'\x0a';}),fs[_0x40c61b(0x31d)](_0x5af617,_0x4f5435),console['log']('Exported\x20'+_0x44aa8c[_0x40c61b(0x2b5)]+_0x40c61b(0x30f)+_0x5af617);const _0x3e4264={'lastExportDate':_0x32fb6b[_0x40c61b(0x2da)](),'fileName':_0x333429,'userCount':_0x44aa8c[_0x40c61b(0x2b5)]};fs[_0x40c61b(0x31d)](_0x795aa7,JSON['stringify'](_0x3e4264,null,0x2));}catch(_0xc0c455){console[_0x40c61b(0x344)](_0x40c61b(0x2bf),_0xc0c455);}},calculateDefaultLastExportDate=_0x112273=>{const _0x49b0c7=a27_0x27632b,_0x4c6e4f=new Date();return _0x112273==='biweekly'?_0x4c6e4f[_0x49b0c7(0x326)](_0x4c6e4f[_0x49b0c7(0x2c3)]()-0xe):_0x4c6e4f['setMonth'](_0x4c6e4f['getMonth']()-0x1),_0x4c6e4f;};router[a27_0x27632b(0x1e9)]('/users-export/history',async(_0x304253,_0x50c224)=>{const _0x5adf6d=a27_0x27632b,_0x3dd6d0=path[_0x5adf6d(0x321)](path['dirname'](require[_0x5adf6d(0x304)][_0x5adf6d(0x22a)]),_0x5adf6d(0x233));if(!fs[_0x5adf6d(0x277)](_0x3dd6d0))return _0x50c224[_0x5adf6d(0x1fc)](0xc8)['json']({'exports':[]});try{const _0x52040f=fs['readdirSync'](_0x3dd6d0)['filter'](_0x12d734=>_0x12d734[_0x5adf6d(0x349)](_0x5adf6d(0x28c))&&_0x12d734[_0x5adf6d(0x331)](_0x5adf6d(0x1f3)))['map'](_0x4aaf50=>{const _0x1dc329=_0x5adf6d,_0x10c3c2=path[_0x1dc329(0x321)](_0x3dd6d0,_0x4aaf50),_0x1e2e28=fs[_0x1dc329(0x2fb)](_0x10c3c2),_0x3b0f0f=fs[_0x1dc329(0x27e)](_0x10c3c2,_0x1dc329(0x2f9)),_0x44087e=_0x3b0f0f[_0x1dc329(0x27a)]('\x0a')[_0x1dc329(0x2b5)]-0x1;return{'fileName':_0x4aaf50,'createdAt':_0x1e2e28[_0x1dc329(0x1ff)],'userCount':_0x44087e};})[_0x5adf6d(0x375)]((_0x3287f7,_0x27cf87)=>_0x27cf87[_0x5adf6d(0x283)]-_0x3287f7[_0x5adf6d(0x283)]);_0x50c224[_0x5adf6d(0x1fc)](0xc8)[_0x5adf6d(0x37b)]({'exports':_0x52040f});}catch(_0x5837c1){console['error'](_0x5adf6d(0x2b1),_0x5837c1),_0x50c224['status'](0x1f4)[_0x5adf6d(0x37b)]({'error':'Failed\x20to\x20retrieve\x20export\x20history'});}}),router['post'](a27_0x27632b(0x311),async(_0x38802f,_0x3e626b)=>{const _0x52c0fe=a27_0x27632b;try{await exportUsersList(),_0x3e626b[_0x52c0fe(0x1fc)](0xc8)['json']({'message':'Users\x20export\x20triggered\x20successfully'});}catch(_0x9efaf8){console[_0x52c0fe(0x344)](_0x52c0fe(0x279),_0x9efaf8),_0x3e626b[_0x52c0fe(0x1fc)](0x1f4)['json']({'error':_0x52c0fe(0x200)});}}),router['get'](a27_0x27632b(0x335),async(_0x1c2fbe,_0xa0ee62)=>{const _0x179575=a27_0x27632b,{fileName:_0x1eef9c}=_0x1c2fbe[_0x179575(0x269)],_0x33b3cb=path['join'](path[_0x179575(0x1e3)](require[_0x179575(0x304)][_0x179575(0x22a)]),_0x179575(0x233),_0x1eef9c);if(!fs[_0x179575(0x277)](_0x33b3cb))return _0xa0ee62[_0x179575(0x1fc)](0x194)[_0x179575(0x37b)]({'error':_0x179575(0x2a2)});_0xa0ee62[_0x179575(0x2bb)](_0x33b3cb);});const cleanCacheForUserFiles=_0x2d4dd1=>{const _0x488588=a27_0x27632b;try{if(!fs[_0x488588(0x277)](_0x2d4dd1)){console[_0x488588(0x23b)]('Directory\x20'+_0x2d4dd1+_0x488588(0x236));return;}const _0x48212b=path[_0x488588(0x321)](path['dirname'](require[_0x488588(0x304)]['filename']),_0x488588(0x293),_0x488588(0x2f0));if(!fs[_0x488588(0x277)](_0x48212b)){console[_0x488588(0x23b)](_0x488588(0x281)+_0x48212b+_0x488588(0x236));return;}const _0x5b9efc=JSON[_0x488588(0x33a)](fs['readFileSync'](path[_0x488588(0x321)](path[_0x488588(0x1e3)](require[_0x488588(0x304)][_0x488588(0x22a)]),_0x488588(0x367)))),_0x9d5259=fs['readdirSync'](_0x2d4dd1);_0x9d5259[_0x488588(0x359)](_0x407222=>{const _0x437c94=_0x488588;_0x5b9efc[_0x437c94(0x2f0)][_0x437c94(0x359)](_0x2dbec8=>{const _0x5b4aaa=_0x437c94;_0x2dbec8['goodFileName']===_0x407222&&_0x2dbec8[_0x5b4aaa(0x22b)][_0x5b4aaa(0x359)](_0x498d48=>{const _0x35715e=_0x5b4aaa;try{fs[_0x35715e(0x201)](path[_0x35715e(0x321)](_0x48212b,_0x498d48['id']));}catch(_0x113f83){console[_0x35715e(0x344)](_0x35715e(0x34f)+_0x498d48['id']+':',_0x113f83);}});});}),analyzeConverterFiles(),console[_0x488588(0x23b)](_0x488588(0x210)+_0x2d4dd1);}catch(_0x2be2ca){console[_0x488588(0x344)](_0x488588(0x267),_0x2be2ca);}};schedule[a27_0x27632b(0x274)]('0\x2023\x20*\x20*\x20*',exportUsersList),schedule['scheduleJob']('0\x20*\x20*\x20*\x20*',sendFollowUpEmails),schedule[a27_0x27632b(0x274)]('0\x200\x20*\x20*\x20*',sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x4bc217=a27_0x27632b;try{const _0x4a7470=path[_0x4bc217(0x321)](path[_0x4bc217(0x1e3)](require[_0x4bc217(0x304)][_0x4bc217(0x22a)]),'converters','files'),_0x42086c=path['join'](path['dirname'](require[_0x4bc217(0x304)][_0x4bc217(0x22a)]),_0x4bc217(0x1f2),_0x4bc217(0x2cd));if(!fs[_0x4bc217(0x277)](_0x4a7470)){logStream[_0x4bc217(0x2d1)]('Le\x20dossier\x20'+_0x4a7470+'\x20n\x27existe\x20pas.');return;}if(!fs['existsSync'](_0x42086c)){logStream['write']('Le\x20dossier\x20'+_0x42086c+'\x20n\x27existe\x20pas.');return;}const _0x26f59b=fs[_0x4bc217(0x346)](_0x4a7470),_0x5719bf={};_0x26f59b[_0x4bc217(0x359)](_0x5cbbc6=>{const _0x4ea78=_0x4bc217,_0x2bf6a5=path[_0x4ea78(0x321)](_0x4a7470,_0x5cbbc6),_0x173e36=fs[_0x4ea78(0x2fb)](_0x2bf6a5),_0x59926d=_0x5cbbc6[_0x4ea78(0x27a)]('.'),_0x5de7d2=_0x59926d[_0x4ea78(0x209)](0x0,-0x1)['filter']((_0x32fea1,_0x41d0ab)=>!([_0x4ea78(0x22f),'rl'][_0x4ea78(0x2dd)](_0x32fea1['toLocaleLowerCase']())&&_0x41d0ab===_0x59926d[_0x4ea78(0x2b5)]-0x2))[_0x4ea78(0x321)]('.');!Object[_0x4ea78(0x1f4)](_0x5719bf)[_0x4ea78(0x2dd)](_0x5de7d2)?_0x5719bf[_0x5de7d2]=[{'file':_0x5cbbc6,'stats':_0x173e36}]:_0x5719bf[_0x5de7d2][_0x4ea78(0x31e)]({'file':_0x5cbbc6,'stats':_0x173e36});});const _0x5da837=[];_0x26f59b[_0x4bc217(0x359)](_0x4f88f4=>{const _0x146185=_0x4bc217;if(!_0x4f88f4[_0x146185(0x331)]('.dwg.json'))return;let _0x5136b7=_0x4f88f4;const _0x4ada6c=path['join'](_0x4a7470,_0x4f88f4),_0x32394c=fs[_0x146185(0x2fb)](_0x4ada6c);let _0x2f8d5c=_0x32394c[_0x146185(0x368)],_0xb50b08='';const _0x4bf25b=fs[_0x146185(0x27e)](_0x4ada6c,_0x146185(0x2f9)),_0x1defe6=JSON[_0x146185(0x33a)](_0x4bf25b),_0x2ebe6b=_0x1defe6[_0x146185(0x1e5)]?.[_0x146185(0x361)](_0x1be4d2=>_0x1be4d2['fileName'])??[];if(_0x1defe6[_0x146185(0x22a)])_0x5136b7=_0x1defe6[_0x146185(0x22a)];const _0x461406=_0x4f88f4['split']('.'),_0x1a232a=_0x461406[_0x146185(0x209)](0x0,-0x1)[_0x146185(0x2a5)]((_0x47d869,_0x511f76)=>!(['dwg','rl']['includes'](_0x47d869['toLocaleLowerCase']())&&_0x511f76===_0x461406['length']-0x2))[_0x146185(0x321)]('.'),_0x4979b0=Object['keys'](_0x5719bf)['includes'](_0x1a232a)?_0x5719bf[_0x1a232a]:[];for(const _0x3db2e2 of _0x2ebe6b){Object['keys'](_0x5719bf)[_0x146185(0x2dd)](_0x3db2e2)&&_0x4979b0[_0x146185(0x31e)](..._0x5719bf[_0x3db2e2]);}const _0x3e671e=_0x4979b0[_0x146185(0x361)](({file:_0xf80c3d,stats:_0x1c9e2e})=>{const _0x1bb284=_0x146185;return!_0xf80c3d['endsWith'](_0x1bb284(0x341))&&(_0x2f8d5c+=_0x1c9e2e[_0x1bb284(0x368)]),{'id':_0xf80c3d,'name':_0xf80c3d['endsWith']('.svg')?_0x1bb284(0x2fa):_0xf80c3d[_0x1bb284(0x331)](_0x1bb284(0x2be))?_0x1bb284(0x295):_0xf80c3d[_0x1bb284(0x331)](_0x1bb284(0x2ac))?_0x1bb284(0x2ed):_0xf80c3d[_0x1bb284(0x331)](_0x1bb284(0x378))?_0x1bb284(0x20a):_0xf80c3d[_0x1bb284(0x331)](_0x1bb284(0x1f3))?'CSV':_0xf80c3d['endsWith'](_0x1bb284(0x22c))?'DWG':_0xf80c3d[_0x1bb284(0x27a)]('.')[_0x1bb284(0x1f0)]()[_0x1bb284(0x259)](),'color':_0xf80c3d[_0x1bb284(0x331)]('.svg')||_0xf80c3d[_0x1bb284(0x331)](_0x1bb284(0x2be))?'yellow':_0xf80c3d['endsWith'](_0x1bb284(0x2ac))?_0x1bb284(0x357):_0xf80c3d['endsWith'](_0x1bb284(0x378))?'gray':_0xf80c3d[_0x1bb284(0x331)](_0x1bb284(0x1f3))?'green':_0xf80c3d[_0x1bb284(0x331)](_0x1bb284(0x22c))?_0x1bb284(0x292):_0x1bb284(0x36d)};});if(_0x3e671e[_0x146185(0x348)](_0x53af03=>_0x53af03['id'][_0x146185(0x2dd)](_0x146185(0x289))))_0xb50b08=_0x146185(0x2a8);else{if(_0x3e671e[_0x146185(0x348)](_0x467090=>[_0x146185(0x2f1),_0x146185(0x330)]['includes'](_0x467090['id']['split']('.')[_0x146185(0x1f0)]()))&&_0x3e671e[_0x146185(0x348)](_0x516bfb=>['csv'][_0x146185(0x2dd)](_0x516bfb['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]())))_0xb50b08=_0x146185(0x25b);else{if(_0x3e671e[_0x146185(0x348)](_0x130427=>[_0x146185(0x2f1),_0x146185(0x330)][_0x146185(0x2dd)](_0x130427['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]())))_0xb50b08=_0x146185(0x256);else{if(_0x3e671e[_0x146185(0x348)](_0x4aa4a0=>[_0x146185(0x37b)][_0x146185(0x2dd)](_0x4aa4a0['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]()))&&_0x3e671e[_0x146185(0x348)](_0x52dfe5=>['dwg'][_0x146185(0x2dd)](_0x52dfe5['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]())))_0xb50b08=_0x146185(0x32b);else{if(_0x3e671e['some'](_0x179d25=>[_0x146185(0x20b)]['includes'](_0x179d25['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]())))_0xb50b08=_0x146185(0x2c8);else{if(_0x3e671e[_0x146185(0x348)](_0x156030=>[_0x146185(0x37b)]['includes'](_0x156030['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]()))&&!_0x3e671e[_0x146185(0x348)](_0x471956=>[_0x146185(0x22f)][_0x146185(0x2dd)](_0x471956['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]())))_0xb50b08=_0x146185(0x21d);else _0x3e671e[_0x146185(0x348)](_0x40ca3d=>[_0x146185(0x37b)][_0x146185(0x2dd)](_0x40ca3d['id'][_0x146185(0x27a)]('.')[_0x146185(0x1f0)]()))&&(_0xb50b08=_0x146185(0x30e));}}}}}_0x5da837[_0x146185(0x31e)]({'name':_0x4f88f4,'goodFileName':_0x5136b7,'size':_0x2f8d5c,'createdAt':_0x32394c['birthtime'],'updatedAt':_0x32394c[_0x146185(0x202)],'readAt':_0x32394c[_0x146185(0x36b)],'action':_0xb50b08,'availableFormats':_0x3e671e});}),_0x5da837[_0x4bc217(0x375)]((_0x468c95,_0x2cf403)=>_0x2cf403[_0x4bc217(0x296)]-_0x468c95[_0x4bc217(0x296)]);const _0x5c1616={'timestamp':new Date(),'totalFiles':_0x5da837['length'],'files':_0x5da837},_0x25d911=path[_0x4bc217(0x321)](_0x42086c,_0x4bc217(0x354));fs[_0x4bc217(0x31d)](_0x25d911,JSON[_0x4bc217(0x303)](_0x5c1616,null,0x2));}catch(_0x55bf05){console['log'](_0x4bc217(0x312)),console['log'](_0x4bc217(0x2a3)+_0x55bf05['message']);}},scheduleFileAnalysis=()=>{const _0x37a20c=a27_0x27632b;analyzeConverterFiles(),schedule[_0x37a20c(0x274)](_0x37a20c(0x208),analyzeConverterFiles),logStream[_0x37a20c(0x2d1)](_0x37a20c(0x36c));};scheduleFileAnalysis(),router[a27_0x27632b(0x366)](a27_0x27632b(0x33c),async(_0x3f4dff,_0x4bad09)=>{const _0x1e3306=a27_0x27632b,{userId:_0x855b04}=_0x3f4dff[_0x1e3306(0x2fc)];let _0x510efa;try{const [_0x5ba9c8]=await conn[_0x1e3306(0x2f6)]()[_0x1e3306(0x34c)](_0x1e3306(0x2ce),[_0x855b04]);_0x5ba9c8[_0x1e3306(0x2b5)]>0x0&&(_0x510efa=_0x5ba9c8[0x0]);}catch(_0x427bfb){console[_0x1e3306(0x23b)]({'err':_0x427bfb}),_0x4bad09['status'](0x1f4)[_0x1e3306(0x37b)]({'error':_0x1e3306(0x2e5)});return;}if(!_0x510efa){_0x4bad09[_0x1e3306(0x1fc)](0x191)['json']({'error':_0x1e3306(0x35f)});return;}if(_0x510efa['role']!==_0x1e3306(0x239)){_0x4bad09[_0x1e3306(0x1fc)](0x190)[_0x1e3306(0x37b)]({'error':_0x1e3306(0x37f)});return;}const _0x15b4fc=new Date();try{await conn[_0x1e3306(0x2f6)]()[_0x1e3306(0x34c)](_0x1e3306(0x2e9),[_0x15b4fc,_0x855b04]),_0x4bad09['status'](0xc8)[_0x1e3306(0x37b)]({'success':!![],'message':_0x1e3306(0x2ff)+config[_0x1e3306(0x2d0)]+_0x1e3306(0x319)});}catch(_0xa5bccd){console['log']({'err':_0xa5bccd}),_0x4bad09[_0x1e3306(0x1fc)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}),router[a27_0x27632b(0x1e9)]('/folders/upload-config',async(_0xc287af,_0x599dcf)=>{const _0x8b42aa=a27_0x27632b;try{const _0x49f552=getHotConfig(),_0x170d76={'maxFileSize':(_0x49f552[_0x8b42aa(0x2af)]||0x32)*0x400*0x400,'maxConcurrentUploads':_0x49f552['maxConcurrentUploads']||0x3,'maxFiles':_0x49f552[_0x8b42aa(0x23a)]||0xa};_0x599dcf[_0x8b42aa(0x1fc)](0xc8)[_0x8b42aa(0x37b)](_0x170d76);}catch(_0x30d4b1){console['error'](_0x8b42aa(0x300),_0x30d4b1),_0x599dcf[_0x8b42aa(0x1fc)](0x1f4)['json']({'message':_0x8b42aa(0x33f)});}}),module[a27_0x27632b(0x233)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
function a27_0x20b8(){const _0x30e780=['mkdirSync','percentage','/users/extend-demo','User\x20created\x20successfully','writeFile','getHotConfig','biweekly','Content-Type','includes','rmdir','folderLocation','userId','count','converter-files-analysis.json','isDirectory','LinkList\x20Settings','.json','/conversion/memorydata','logs','.log\x22','used','/metrics','arch','split','conversionTimeSpend','RL/TL\x20Processing','../libs/mysql.js','Folder\x20already\x20exists.','.dwg.json','Cache\x20directory\x20','mysqlUsername','formatedSize','\x20does\x20not\x20exist.','body','converterpathWin','/config/update','cadviewer/settings/icons.js','ctime','Le\x20dossier\x20','cadviewer/settings/users.html','constants','drive','originalname','UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','cadviewer','dir','10idcict','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','forEach','padStart','boolean','who','DWG','cadviewer/settings/style.css','fileLoad_PasswordAuthentication','User\x20deleted\x20successfully','Error\x20reading\x20monitoring\x20file','download','/content/redlines/','{version}','fileLoad_Password','getStats','writeFileSync','send','platform','slice','ServerUrl','demo_user','uptime','dirname','blue','3347528AQfgFj','/converters/autoxchange/linux/','cadviewer/settings/folders.html','last-users-export.json','.svg','dwg','1023423zgJxJD','\x20\x20\x20','totalGB','existsSync','SVG','fileLocation','Server\x20Settings','then','File\x20not\x20found','mkdir','fileLocationUrl','.dwg','execute','last_name','users-export-','AutoXchange\x20Settings','demoUserRetentionDays','keys','/users','bcrypt','Invalid\x20user','sub_dirs','cvjs_svgz_compress','DWG\x20file\x20in\x20multiple\x20files','updatedAt','Error!\x20Something\x20went\x20wrong.','role','dwgmerge_executable_windows','files','access','Error\x20flushing\x20cache:','CADViewer_config.json','join','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','Config\x20updated\x20successfully','User\x20updated\x20successfully','yellow','../libs/config','Error\x20getting\x20total\x20users','exports','json','/cache/files/:id','Demo\x20period\x20extended\x20successfully\x20by\x20','/cache','hlall','maxUploadFileSize','../libs/email-utils','===================error===================','statSync','proc','.gitkeep','scheduleJob','email,firstname,lastname\x0a','setHeader','some','linklist_executable_linux','ServerPort','cadviewer/settings/logs.html','.log','replaceAll','Error\x20deleting\x20old\x20demo_user\x20accounts:','converterLocation','cadviewer/settings/home.html','usedMemPercentage','trim','Error\x20finding\x20log\x20files:','Counter\x20reset\x20successfully','test','ServerLocation','osCmd','cadviewer/settings/config.html','darwin','windows','memorydata.csv','usersExportFrequency','linklistLocation','/chart.min.js','tmp','splity','createdAt','radio|','error',')\x20older\x20than\x20','/config','/logs','Folder\x20not\x20found.','This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users','cadviewer/settings/conversion-cache.html','../libs/counter.js','Display\x20of\x20DWG','Failed\x20to\x20retrieve\x20export\x20history','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','\x20n\x27existe\x20pas.','4280562VYhKmG','freeGb','resolve','/users/:userId','diskStorage','Files\x20uploaded\x20successfully','settingsUserBasicAuth','filename','cadviewer/settings/licences.html','zlib','size','mysqlDatabase','params','zombieProcesses','dwgmerge_executable','Directory\x20','Monitoring\x20file\x20cleaned.','toISOString','version','pdf','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','radio|monthly,biweekly','usedPercentage','atime','usage','cadviewer/settings/converter-files-analysis.json','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','main','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','Error\x20reading\x20last\x20export\x20info:','cadviewer/settings/rest-api-parameters.json','Error\x20getting\x20Users\x20export\x20export\x20history:','.png','0\x201\x20*\x20*\x20*','clean','Cache\x20flushed\x20successfully','crypto','1198272Hvnyzn','/cache/files','Failed\x20to\x20get\x20cache\x20stats','attachment;\x20filename=\x22','====================','maxConcurrentUploads','folder_name','delete','now','callbackMethod_gatewayUrl','Error\x20triggering\x20Users\x20export:','goodFileName','Error\x20downloading\x20file.','Log\x20file\x20cleaned.','X_OK','win32','cached_conversion','./tmp','file','cadviewer/settings/tailwind.js','/users-export/history','W_OK','Error\x20getting\x20cpu\x20usage','0\x2023\x20*\x20*\x20*','length','type','Read\x20and\x20write\x20permission\x20for\x20folder\x20','callbackMethod','setMonth','get','Error\x20getting\x20os\x20info','/folders','setDate','/users/flush-dir','autoxchange_executable_windows','/export-users','replace','autodetect_platform','number','avatars/','hash','csv','image/svg+xml','/folders/delete','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','getFullYear','140014wQWvOh','\x20MB','toString','single','Folder\x20deleted.','\x22\x20executable','Error\x20getting\x20process\x20info','=============================>','child_process','/cache/stats','.csv','PDF','getDate','Cache\x20conversion','totalGb','user','usedMemMb','toLocaleLowerCase','path','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','ContentSecurityPolicy','filter','Callback\x20and\x20Authentication\x20Settings','/folders/upload-config','JSON\x20Data\x20Extraction','Error\x20updating\x20config','vmstats','status','reduce','User\x20directory\x20flushed\x20successfully','Router','birthtime','/config/content','converterpathLin','copyFileSync','reset','fileLoad_UserName','Error\x20creating\x20folder.','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','../CADViewer_config.json','246fTtbhD','.rl.json','green','/users-export/trigger','whoami','call-Api_Conversion_','first_name','*\x20*\x20*\x20*\x20*','autodetect_location','monthly','oos','cadviewer/settings/rest-api.html','dwgmerge_executable_linux','https','admin','toFixed','Error\x20saving\x20parameters.','/cache/flush','array','/converters/files/merged/','File\x20deleted.','mysqlPassword','readFileSync','.pdf','cadviewer/settings/users-export.html','hostname','folderName','ceil','5ZeOxcO','/cache/csv/:file','node-schedule','push','query','No\x20files\x20uploaded','171452yoylHm','\x20GB','SELECT\x20*\x20FROM\x20users','autoxchange_executable','avatar_url','unlinkSync','svgz','model','`crypted_password`\x20=\x20?,\x20','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','Folder\x20created.','fontLocation','linklist_executable','/doctor','name','write','post','CSV','/folders/upload','R_OK','/logs/content','parse','email','converters','cpu','readFile','/metrics/reset','Parameters\x20saved.','\x20days','./uploads/','Folder\x20not\x20found','isFolder','dwgmergeLocation','.svgz','promise','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','availableFormats','Error\x20deleting\x20file','Error\x20getting\x20memory\x20info','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','pop','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','/converters/files/pdf/','\x20days\x20have\x20been\x20deleted.','map','globalBearerAutentication','827019tMeLna','getMonth','SVGZ','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','gunzipSync','Error\x20deleting\x20file.','mysqlHost','File\x20deleted\x20successfully','put','xpathLocation','avatar','stringify','/licences','log','svg','conversionMemoryUsage','total','isFile','licenseLocation','DWG\x20to\x20SVG\x20Conversion','toUpperCase','/conversion/clean','endsWith','An\x20error\x20occurred\x20while\x20checking.','rmSync','readdirSync','cadviewer/settings/requests-callapiconversion-monitoring.json','fileName','Cache\x20cleaned\x20for\x20files\x20in\x20','cadviewer/settings/cache-stats.js','Config\x20updated.','CADViewer\x20Settings','Error\x20cleaning\x20cache\x20for\x20user\x20files:','Error\x20getting\x20cache\x20stats:','Permission\x20750\x20for\x20the\x20\x22','linux','utf8','application/octet-stream','JSON','mimetype','sort','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','gray','0\x200\x20*\x20*\x20*','File\x20or\x20Folder\x20not\x20found','sendFile','/restapi-test','../libs/log','cadviewer/settings/vanilla-toast.js','linklist_executable_windows'];a27_0x20b8=function(){return _0x30e780;};return a27_0x20b8();}const a27_0x398bba=a27_0x57b6;(function(_0x393a89,_0xd92251){const _0x4fd6d9=a27_0x57b6,_0x2cc391=_0x393a89();while(!![]){try{const _0x4f0203=parseInt(_0x4fd6d9(0x267))/0x1+parseInt(_0x4fd6d9(0x2e9))/0x2+-parseInt(_0x4fd6d9(0x1e7))/0x3+parseInt(_0x4fd6d9(0x361))/0x4*(parseInt(_0x4fd6d9(0x35b))/0x5)+-parseInt(_0x4fd6d9(0x33f))/0x6*(parseInt(_0x4fd6d9(0x317))/0x7)+-parseInt(_0x4fd6d9(0x261))/0x8+-parseInt(_0x4fd6d9(0x2c4))/0x9*(-parseInt(_0x4fd6d9(0x247))/0xa);if(_0x4f0203===_0xd92251)break;else _0x2cc391['push'](_0x2cc391['shift']());}catch(_0x12d005){_0x2cc391['push'](_0x2cc391['shift']());}}}(a27_0x20b8,0x9909c));const express=require('express'),router=express[a27_0x398bba(0x335)](),multer=require('multer'),fs=require('fs'),path=require(a27_0x398bba(0x329)),getHotConfig=require(a27_0x398bba(0x28c))[a27_0x398bba(0x21e)],{exec}=require(a27_0x398bba(0x31f)),os=require('os'),conn=require(a27_0x398bba(0x233)),bcrypt=require(a27_0x398bba(0x27a)),osu=require('node-os-utils'),schedule=require(a27_0x398bba(0x35d)),counter=require(a27_0x398bba(0x2bf)),{randomUUID}=require(a27_0x398bba(0x2e8)),logStream=require(a27_0x398bba(0x216)),config=require(a27_0x398bba(0x33e)),basicAuth=require('express-basic-auth'),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x398bba(0x295)),protectedRoute=basicAuth({'users':{[config[a27_0x398bba(0x2ca)]]:config['settingsPasswordBasicAuth']},'challenge':!![],'realm':a27_0x398bba(0x206)});function a27_0x57b6(_0x408994,_0x6b9398){const _0x20b83d=a27_0x20b8();return a27_0x57b6=function(_0x57b6f8,_0xaf2d26){_0x57b6f8=_0x57b6f8-0x1c0;let _0xddb714=_0x20b83d[_0x57b6f8];return _0xddb714;},a27_0x57b6(_0x408994,_0x6b9398);}router[a27_0x398bba(0x306)]('/tailwind.js',async(_0x567f7c,_0x462fd0)=>{const _0x1a3b79=a27_0x398bba;_0x462fd0['sendFile'](path[_0x1a3b79(0x287)](path[_0x1a3b79(0x25f)](require[_0x1a3b79(0x2df)][_0x1a3b79(0x2cb)]),_0x1a3b79(0x2fc)));}),router['get'](a27_0x398bba(0x2b3),async(_0x1f0aab,_0x579320)=>{const _0x93cdec=a27_0x398bba;_0x579320['sendFile'](path[_0x93cdec(0x287)](path[_0x93cdec(0x25f)](require[_0x93cdec(0x2df)][_0x93cdec(0x2cb)]),'cadviewer/settings/chart.min.js'));}),router[a27_0x398bba(0x306)]('/style.css',async(_0x4a8937,_0x3353be)=>{const _0x457969=a27_0x398bba;_0x3353be[_0x457969(0x214)](path['join'](path['dirname'](require[_0x457969(0x2df)][_0x457969(0x2cb)]),_0x457969(0x24f)));}),router['get']('/vanilla-toast.css',async(_0x350b6f,_0x4ef457)=>{const _0x54f0e4=a27_0x398bba;_0x4ef457[_0x54f0e4(0x214)](path[_0x54f0e4(0x287)](path['dirname'](require['main'][_0x54f0e4(0x2cb)]),'cadviewer/settings/vanilla-toast.css'));}),router['get']('/vanilla-toast.js',async(_0x47d729,_0x2d39ab)=>{const _0x80d755=a27_0x398bba;_0x2d39ab[_0x80d755(0x214)](path[_0x80d755(0x287)](path[_0x80d755(0x25f)](require['main'][_0x80d755(0x2cb)]),_0x80d755(0x217)));}),router[a27_0x398bba(0x306)]('/icons.js',async(_0x318ffc,_0xe62148)=>{const _0x40aef0=a27_0x398bba;_0xe62148[_0x40aef0(0x214)](path[_0x40aef0(0x287)](path['dirname'](require[_0x40aef0(0x2df)]['filename']),_0x40aef0(0x23d)));}),router[a27_0x398bba(0x306)]('/',protectedRoute,async(_0x5dad4f,_0x4c6d82)=>{const _0x59f2d6=a27_0x398bba,_0x3cbb47=fs[_0x59f2d6(0x355)](path[_0x59f2d6(0x287)](path[_0x59f2d6(0x25f)](require[_0x59f2d6(0x2df)][_0x59f2d6(0x2cb)]),_0x59f2d6(0x2a5)),_0x59f2d6(0x20b)),_0x4a514e=_0x3cbb47[_0x59f2d6(0x2a2)]('{version}',_0x5dad4f[_0x59f2d6(0x2d6)]);_0x4c6d82['send'](_0x4a514e);}),router[a27_0x398bba(0x306)](a27_0x398bba(0x1f3),protectedRoute,async(_0x278b9f,_0x57d30a)=>{const _0x4c1c41=a27_0x398bba,_0x123c5f=fs[_0x4c1c41(0x355)](path[_0x4c1c41(0x287)](path['dirname'](require[_0x4c1c41(0x2df)][_0x4c1c41(0x2cb)]),_0x4c1c41(0x2cc)),_0x4c1c41(0x20b)),_0x18d2b3=_0x123c5f[_0x4c1c41(0x2a2)]('{version}',_0x278b9f[_0x4c1c41(0x2d6)]);_0x57d30a[_0x4c1c41(0x259)](_0x18d2b3);}),router['get'](a27_0x398bba(0x2ba),protectedRoute,async(_0x17f6c5,_0x2551ba)=>{const _0x59fabf=a27_0x398bba,_0xd8bea8=fs[_0x59fabf(0x355)](path['join'](path[_0x59fabf(0x25f)](require[_0x59fabf(0x2df)]['filename']),_0x59fabf(0x2ad)),_0x59fabf(0x20b)),_0x5bd1c1=_0xd8bea8['replaceAll'](_0x59fabf(0x255),_0x17f6c5[_0x59fabf(0x2d6)]);_0x2551ba[_0x59fabf(0x259)](_0x5bd1c1);}),router[a27_0x398bba(0x306)](a27_0x398bba(0x308),protectedRoute,async(_0x4457d2,_0x154b41)=>{const _0x214717=a27_0x398bba,_0x27aa7e=fs[_0x214717(0x355)](path[_0x214717(0x287)](path[_0x214717(0x25f)](require[_0x214717(0x2df)][_0x214717(0x2cb)]),_0x214717(0x263)),_0x214717(0x20b)),_0x1e6c2e=_0x27aa7e['replaceAll'](_0x214717(0x255),_0x4457d2[_0x214717(0x2d6)]);_0x154b41[_0x214717(0x259)](_0x1e6c2e);}),router[a27_0x398bba(0x1c9)](a27_0x398bba(0x308),async(_0x458b4e,_0x569f87)=>{const _0x438a9a=a27_0x398bba,_0x37e5f9=path[_0x438a9a(0x287)](path['dirname'](require[_0x438a9a(0x2df)][_0x438a9a(0x2cb)]),_0x438a9a(0x286)),_0x40370e=JSON[_0x438a9a(0x1ce)](fs[_0x438a9a(0x355)](_0x37e5f9,'utf8')),_0x3c6822=_0x40370e[_0x438a9a(0x223)];if(!fs[_0x438a9a(0x26a)](_0x3c6822))return _0x569f87[_0x438a9a(0x332)](0x194)[_0x438a9a(0x28f)]({'message':'Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.'});const _0x417f72=_0xa7d1b9=>{const _0x4dbadb=_0x438a9a;let _0x28090a=0x0;return _0xa7d1b9[_0x4dbadb(0x24a)](_0x326f79=>{const _0x3ad2a3=_0x4dbadb;_0x326f79['isFolder']?_0x28090a+=_0x417f72(_0x326f79['sub_dirs']):_0x28090a+=_0x326f79[_0x3ad2a3(0x2ce)];}),_0x28090a;},_0x137cdd=_0x3f0bb4=>{const _0xb6a7a9=_0x438a9a;if(_0x3f0bb4<0x400)return _0x3f0bb4+'\x20B';else{if(_0x3f0bb4<0x400*0x400)return(_0x3f0bb4/0x400)[_0xb6a7a9(0x34e)](0x2)+'\x20KB';else return _0x3f0bb4<0x400*0x400*0x400?(_0x3f0bb4/0x400/0x400)['toFixed'](0x2)+_0xb6a7a9(0x318):(_0x3f0bb4/0x400/0x400/0x400)[_0xb6a7a9(0x34e)](0x2)+_0xb6a7a9(0x362);}},_0x15c6d3=(_0x49bcea,_0xa77a57='')=>{const _0x2729ec=_0x438a9a,_0x4698fe=fs[_0x2729ec(0x200)](_0x49bcea),_0x2b81d6=[];return _0x4698fe[_0x2729ec(0x24a)](_0x241616=>{const _0x3059c1=_0x2729ec,_0x293c23=path[_0x3059c1(0x287)](_0x49bcea,_0x241616)[_0x3059c1(0x2a2)]('\x5c','/'),_0x2d9a58=fs[_0x3059c1(0x297)](_0x293c23);if(_0x2d9a58[_0x3059c1(0x227)]()){const _0x46a85f=_0x15c6d3(_0x293c23,_0xa77a57+_0x3059c1(0x268));_0x2b81d6[_0x3059c1(0x35e)]({'name':_0x241616,'size':_0x2d9a58[_0x3059c1(0x2ce)],'path':_0x293c23,'permissions':_0x2d9a58['mode'],'isFolder':!![],'sub_dirs':_0x46a85f});}else _0x2b81d6[_0x3059c1(0x35e)]({'name':_0x241616,'size':_0x2d9a58[_0x3059c1(0x2ce)],'path':_0x293c23,'permissions':_0x2d9a58['mode'],'isFolder':![]});}),_0x2b81d6;};let _0x1950ef=_0x15c6d3(_0x3c6822);const _0x2ace85=_0x1e20e8=>{const _0x568db7=_0x438a9a;return _0x1e20e8[_0x568db7(0x24a)](_0x13f719=>{const _0x45a611=_0x568db7;_0x13f719[_0x45a611(0x1d8)]?(_0x13f719[_0x45a611(0x238)]=_0x137cdd(_0x417f72(_0x13f719[_0x45a611(0x27c)])),_0x13f719['sub_dirs']=_0x2ace85(_0x13f719[_0x45a611(0x27c)])):_0x13f719['formatedSize']=_0x137cdd(_0x13f719['size']);}),_0x1e20e8;};_0x569f87[_0x438a9a(0x332)](0xc8)['json'](_0x2ace85(_0x1950ef));}),router[a27_0x398bba(0x1c9)]('/folders/download',async(_0x332168,_0x5dde5a)=>{const _0x2ef7ab=a27_0x398bba,{path:_0x1d0ec9}=_0x332168[_0x2ef7ab(0x23a)],_0xb9fe71=_0x1d0ec9['split']('/')[_0x2ef7ab(0x1e1)]();if(!fs[_0x2ef7ab(0x26a)](_0x1d0ec9))return _0x5dde5a[_0x2ef7ab(0x332)](0x194)[_0x2ef7ab(0x28f)]({'message':_0x2ef7ab(0x26f)});_0x5dde5a[_0x2ef7ab(0x29c)](_0x2ef7ab(0x220),_0x2ef7ab(0x20c)),_0x5dde5a[_0x2ef7ab(0x29c)]('Content-Disposition',_0x2ef7ab(0x2ec)+_0xb9fe71+'\x22'),_0x5dde5a[_0x2ef7ab(0x253)](_0x1d0ec9,_0x3e0a3e=>{const _0x73abf7=_0x2ef7ab;_0x3e0a3e&&_0x5dde5a[_0x73abf7(0x332)](0x1f4)[_0x73abf7(0x28f)]({'message':_0x73abf7(0x2f5)});});}),router['post']('/folders/create',async(_0xccf2a,_0x2cd3d7)=>{const _0x236e0c=a27_0x398bba,_0x57fe7f=_0xccf2a[_0x236e0c(0x23a)],_0x233c73=getHotConfig()['folderLocation'],_0x14f62a=path[_0x236e0c(0x287)](_0x233c73,_0x57fe7f[_0x236e0c(0x329)]);if(!fs[_0x236e0c(0x26a)](_0x14f62a))return _0x2cd3d7[_0x236e0c(0x332)](0x194)[_0x236e0c(0x28f)]({'message':_0x236e0c(0x2bc)});if(fs['existsSync'](path['join'](_0x14f62a,_0x57fe7f['folderName'])))return _0x2cd3d7['status'](0x199)['json']({'message':_0x236e0c(0x234)});fs[_0x236e0c(0x270)](path[_0x236e0c(0x287)](_0x14f62a,_0x57fe7f[_0x236e0c(0x359)]),_0x3636e7=>{const _0x42ad85=_0x236e0c;_0x3636e7&&_0x2cd3d7['status'](0x1f4)['json']({'message':_0x42ad85(0x33c)}),_0x2cd3d7[_0x42ad85(0x332)](0xc8)['json']({'message':_0x42ad85(0x1c3)});});}),router['put']('/folders/update',async(_0x2054e0,_0x22addd)=>{const _0x1de3f9=a27_0x398bba,{newName:_0x3134db,isFolder:_0x208334,path:_0x1161dc}=_0x2054e0[_0x1de3f9(0x23a)];if(!fs[_0x1de3f9(0x26a)](_0x1161dc))return _0x22addd[_0x1de3f9(0x332)](0x194)[_0x1de3f9(0x28f)]({'message':_0x208334?_0x1de3f9(0x1d7):_0x1de3f9(0x26f)});const _0x4f6b3c=_0x1161dc[_0x1de3f9(0x30d)](_0x1161dc[_0x1de3f9(0x230)]('/')[_0x1de3f9(0x1e1)](),_0x3134db),_0x1b62cd=fs['statSync'](_0x1161dc);_0x1b62cd[_0x1de3f9(0x227)]()?fs['renameSync'](_0x1161dc,_0x4f6b3c):(fs['copyFileSync'](_0x1161dc,_0x4f6b3c),fs['unlinkSync'](_0x1161dc)),_0x22addd[_0x1de3f9(0x332)](0xc8)[_0x1de3f9(0x28f)]({'message':_0x208334?'Folder\x20renamed.':'File\x20renamed.'});}),router[a27_0x398bba(0x2f0)](a27_0x398bba(0x314),async(_0x1b1fb8,_0x448eb1)=>{const _0x31faa6=a27_0x398bba,{path:_0x1f4d03}=_0x1b1fb8[_0x31faa6(0x23a)];if(!fs['existsSync'](_0x1f4d03))return _0x448eb1[_0x31faa6(0x332)](0x194)[_0x31faa6(0x28f)]({'message':_0x31faa6(0x213)});const _0x476783=fs[_0x31faa6(0x297)](_0x1f4d03);if(_0x476783[_0x31faa6(0x1f8)]())fs['unlink'](_0x1f4d03,_0x20ea88=>{const _0x57e644=_0x31faa6;_0x20ea88&&_0x448eb1[_0x57e644(0x332)](0x1f4)[_0x57e644(0x28f)]({'message':_0x57e644(0x1ec)}),_0x448eb1[_0x57e644(0x332)](0xc8)[_0x57e644(0x28f)]({'message':_0x57e644(0x353)});});else _0x476783[_0x31faa6(0x227)]()&&fs[_0x31faa6(0x222)](_0x1f4d03,{'recursive':!![]},_0x31a0f6=>{const _0x216758=_0x31faa6;_0x31a0f6&&_0x448eb1[_0x216758(0x332)](0x1f4)[_0x216758(0x28f)]({'message':'Error\x20deleting\x20folder.'}),_0x448eb1[_0x216758(0x332)](0xc8)['json']({'message':_0x216758(0x31b)});});});!fs[a27_0x398bba(0x26a)]('./tmp')&&fs['mkdirSync'](a27_0x398bba(0x2fa));const storage=multer[a27_0x398bba(0x2c8)]({'destination':(_0x2bdd25,_0x1dac31,_0x11153a)=>{const _0x33144c=a27_0x398bba;_0x11153a(null,_0x33144c(0x2b4));},'filename':(_0x53d739,_0x39c0c3,_0x46e3ef)=>{const _0x3165db=a27_0x398bba;_0x46e3ef(null,Date[_0x3165db(0x2f1)]()+path['extname'](_0x39c0c3[_0x3165db(0x243)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()['maxUploadFileSize']?getHotConfig()[a27_0x398bba(0x294)]*0x400*0x400:0x32*0x400*0x400}});router[a27_0x398bba(0x1c9)](a27_0x398bba(0x1cb),upload[a27_0x398bba(0x351)](a27_0x398bba(0x283)),async(_0x673a01,_0x3cbf47)=>{const _0x42a636=a27_0x398bba,_0x22edc8=_0x673a01['body'];if(!_0x673a01[_0x42a636(0x283)]||_0x673a01['files'][_0x42a636(0x301)]===0x0)return _0x3cbf47[_0x42a636(0x332)](0x190)[_0x42a636(0x28f)]({'message':_0x42a636(0x360)});const _0x17afba=getHotConfig()[_0x42a636(0x223)],_0x3f516e=path[_0x42a636(0x287)](_0x17afba,_0x22edc8[_0x42a636(0x329)]);if(!fs['existsSync'](_0x3f516e))return _0x3cbf47['status'](0x194)[_0x42a636(0x28f)]({'message':_0x42a636(0x2bc)});const _0x58361f=_0x673a01[_0x42a636(0x283)][_0x42a636(0x1e5)](_0x2de818=>({'originalname':_0x2de818[_0x42a636(0x243)],'filename':_0x2de818['filename'],'mimetype':_0x2de818[_0x42a636(0x20e)],'size':_0x2de818[_0x42a636(0x2ce)]}));_0x58361f[_0x42a636(0x24a)](_0x39b41f=>{const _0x180cac=_0x42a636;fs[_0x180cac(0x339)](path[_0x180cac(0x287)](_0x180cac(0x2b4),_0x39b41f['filename']),path[_0x180cac(0x287)](_0x3f516e,_0x39b41f[_0x180cac(0x243)])),fs[_0x180cac(0x366)](path[_0x180cac(0x287)](_0x180cac(0x2b4),_0x39b41f[_0x180cac(0x2cb)]));}),_0x3cbf47[_0x42a636(0x332)](0xc8)['json']({'message':_0x42a636(0x2c9),'files':_0x58361f});}),router[a27_0x398bba(0x1ef)]('/config/global-update',async(_0x134ee8,_0x1bdace)=>{const _0x3af751=a27_0x398bba,_0x195171=path[_0x3af751(0x287)](path[_0x3af751(0x25f)](require[_0x3af751(0x2df)][_0x3af751(0x2cb)]),_0x3af751(0x286)),{config:_0x30093b}=_0x134ee8[_0x3af751(0x23a)];if(!_0x30093b)return _0x1bdace['status'](0x190)[_0x3af751(0x28f)]({'message':'No\x20config\x20object\x20provided'});try{fs[_0x3af751(0x258)](_0x195171,JSON[_0x3af751(0x1f2)](_0x30093b,null,0x4)),_0x1bdace[_0x3af751(0x332)](0xc8)['json']({'message':_0x3af751(0x289)});}catch(_0x381e0e){_0x1bdace['status'](0x1f4)['json']({'message':_0x3af751(0x330)});}}),router['put'](a27_0x398bba(0x23c),async(_0x40e016,_0x51d27d)=>{const _0x4a0eb1=a27_0x398bba,{key:_0xc6b102,value:_0x31308f}=_0x40e016[_0x4a0eb1(0x23a)],_0x118ba0=path[_0x4a0eb1(0x287)](path[_0x4a0eb1(0x25f)](require[_0x4a0eb1(0x2df)]['filename']),_0x4a0eb1(0x286));fs[_0x4a0eb1(0x1d2)](_0x118ba0,_0x4a0eb1(0x20b),function(_0x4e865b,_0x1ec525){const _0xba1f62=_0x4a0eb1;_0x4e865b&&_0x51d27d['status'](0x1f4)['send'](_0x4e865b);const _0x26da64=JSON[_0xba1f62(0x1ce)](_0x1ec525);_0x26da64[_0xc6b102]=_0x31308f;if(_0xc6b102===_0xba1f62(0x347)){let _0x534c70='';if(_0x26da64[_0xba1f62(0x30e)]){_0x534c70=os[_0xba1f62(0x25a)]();if(_0x534c70===_0xba1f62(0x2f8))_0x534c70=_0xba1f62(0x2af);else{if(_0x534c70===_0xba1f62(0x2ae))_0x534c70='linux';}}else _0x534c70=_0x26da64[_0xba1f62(0x25a)];if(_0x534c70===_0xba1f62(0x2af)){_0x26da64[_0xba1f62(0x2ab)]=path['resolve'](__dirname,'..')+'/';const _0x53b26a=/\\/g;_0x26da64[_0xba1f62(0x2ab)]=_0x26da64['ServerLocation'][_0xba1f62(0x30d)](_0x53b26a,'/');}else _0x26da64['ServerLocation']=path[_0xba1f62(0x2c6)](__dirname,'..')+'/';}if(_0xc6b102===_0xba1f62(0x30e)){let _0x40df31=os[_0xba1f62(0x25a)]();if(_0x40df31===_0xba1f62(0x2f8))_0x40df31=_0xba1f62(0x2af);else _0x40df31=_0xba1f62(0x20a);_0x40df31===_0xba1f62(0x2af)?_0x31308f===!![]&&(_0x26da64[_0xba1f62(0x364)]=_0x26da64[_0xba1f62(0x30b)],_0x26da64['dwgmerge_executable']=_0x26da64['dwgmerge_executable_windows'],_0x26da64['linklist_executable']=_0x26da64['linklist_executable_windows']):_0x31308f===!![]&&(_0x26da64[_0xba1f62(0x364)]=_0x26da64['autoxchange_executable_linux'],_0x26da64[_0xba1f62(0x2d2)]=_0x26da64[_0xba1f62(0x34b)],_0x26da64['linklist_executable']=_0x26da64[_0xba1f62(0x29e)]),_0x26da64['platform']=_0x40df31;}if(_0x26da64[_0xba1f62(0x30e)]){let _0x327d7b=os[_0xba1f62(0x25a)]();if(_0x327d7b===_0xba1f62(0x2f8))_0x327d7b='windows';else _0x327d7b=_0xba1f62(0x20a);if(_0x327d7b===_0xba1f62(0x2af)){if(_0xc6b102===_0xba1f62(0x30b))_0x26da64[_0xba1f62(0x364)]=_0x31308f;else{if(_0xc6b102===_0xba1f62(0x282))_0x26da64[_0xba1f62(0x2d2)]=_0x31308f;else _0xc6b102===_0xba1f62(0x218)&&(_0x26da64[_0xba1f62(0x1c5)]=_0x31308f);}}else{if(_0xc6b102==='autoxchange_executable_linux')_0x26da64[_0xba1f62(0x364)]=_0x31308f;else{if(_0xc6b102==='dwgmerge_executable_linux')_0x26da64['dwgmerge_executable']=_0x31308f;else _0xc6b102==='linklist_executable_linux'&&(_0x26da64[_0xba1f62(0x1c5)]=_0x31308f);}}}fs['writeFile'](_0x118ba0,JSON[_0xba1f62(0x1f2)](_0x26da64,null,0x4),function(_0x199719){const _0x364617=_0xba1f62;_0x199719&&_0x51d27d[_0x364617(0x332)](0x1f4)[_0x364617(0x259)](_0x199719),_0x51d27d[_0x364617(0x332)](0xc8)['json']({'message':_0x364617(0x205)});});});}),router[a27_0x398bba(0x1c9)](a27_0x398bba(0x337),async(_0x38309a,_0x27b14c)=>{const _0x2ccc47=a27_0x398bba,_0x591a63=getHotConfig(),_0x203b5c=(_0x591a63[_0x2ccc47(0x1d9)][_0x2ccc47(0x221)](_0x591a63[_0x2ccc47(0x2ab)])?'':_0x591a63['ServerLocation'])+_0x591a63[_0x2ccc47(0x1d9)],_0x5d3330=(_0x591a63['dwgmergeLocation'][_0x2ccc47(0x221)](_0x591a63['ServerLocation'])?'':_0x591a63['ServerLocation'])+_0x591a63[_0x2ccc47(0x2b2)],_0xa25d37=(_0x591a63[_0x2ccc47(0x2a4)]['includes'](_0x591a63[_0x2ccc47(0x2ab)])?'':_0x591a63[_0x2ccc47(0x2ab)])+_0x591a63[_0x2ccc47(0x2a4)],_0x77b32d=/ax202.*\.exe/,_0x1f9544=/ax202.*/,_0x2e422d=/dwgmerge202.*\.exe/,_0x50adbb=/dwgmerge_202.*/,_0x5bcf36=/linklist_202.*\.exe/,_0x4f3106=/linklist_202.*/,_0x3cd194=[],_0x4c7ca8=[],_0x374e22=[],_0xf148b9=[],_0x1d067e=[],_0x477c0a=[];let _0xe0636a='';if(_0x591a63[_0x2ccc47(0x30e)]){_0xe0636a=os['platform']();if(_0xe0636a==='win32')_0xe0636a=_0x2ccc47(0x2af);else{if(_0xe0636a===_0x2ccc47(0x2ae))_0xe0636a='linux';}}else _0xe0636a=_0x591a63[_0x2ccc47(0x25a)];fs[_0x2ccc47(0x200)](_0xa25d37['replaceAll']('linux',_0x2ccc47(0x2af)))[_0x2ccc47(0x24a)](_0x161b15=>{const _0x348282=_0x2ccc47;if(_0x77b32d[_0x348282(0x2aa)](_0x161b15[_0x348282(0x328)]()))_0x3cd194[_0x348282(0x35e)](_0x161b15);}),fs[_0x2ccc47(0x200)](_0x203b5c[_0x2ccc47(0x2a2)](_0x2ccc47(0x20a),'windows'))[_0x2ccc47(0x24a)](_0x684997=>{const _0x182176=_0x2ccc47;if(_0x2e422d[_0x182176(0x2aa)](_0x684997[_0x182176(0x328)]()))_0x4c7ca8[_0x182176(0x35e)](_0x684997);}),fs[_0x2ccc47(0x200)](_0x5d3330[_0x2ccc47(0x2a2)](_0x2ccc47(0x20a),_0x2ccc47(0x2af)))[_0x2ccc47(0x24a)](_0x98c7e3=>{const _0x39ff71=_0x2ccc47;if(_0x5bcf36['test'](_0x98c7e3[_0x39ff71(0x328)]()))_0x374e22[_0x39ff71(0x35e)](_0x98c7e3);}),fs['readdirSync'](_0xa25d37[_0x2ccc47(0x2a2)](_0x2ccc47(0x2af),_0x2ccc47(0x20a)))[_0x2ccc47(0x24a)](_0x31ab07=>{const _0x393a1a=_0x2ccc47;if(_0x1f9544[_0x393a1a(0x2aa)](_0x31ab07[_0x393a1a(0x328)]()))_0xf148b9[_0x393a1a(0x35e)](_0x31ab07);}),fs['readdirSync'](_0x203b5c['replaceAll'](_0x2ccc47(0x2af),_0x2ccc47(0x20a)))[_0x2ccc47(0x24a)](_0x73db51=>{const _0x4dff24=_0x2ccc47;if(_0x50adbb[_0x4dff24(0x2aa)](_0x73db51[_0x4dff24(0x328)]()))_0x1d067e[_0x4dff24(0x35e)](_0x73db51);}),fs[_0x2ccc47(0x200)](_0x5d3330[_0x2ccc47(0x2a2)](_0x2ccc47(0x2af),'linux'))[_0x2ccc47(0x24a)](_0x1f7b2b=>{const _0x546fbe=_0x2ccc47;if(_0x4f3106[_0x546fbe(0x2aa)](_0x1f7b2b[_0x546fbe(0x328)]()))_0x477c0a[_0x546fbe(0x35e)](_0x1f7b2b);});const _0x5c34cd=[_0x2ccc47(0x29f),_0x2ccc47(0x34c),_0x2ccc47(0x23b),_0x2ccc47(0x338),_0x2ccc47(0x1c4)],_0x2f7bdc=[_0x2ccc47(0x26c),_0x2ccc47(0x271),'converterLocation',_0x2ccc47(0x1f9),_0x2ccc47(0x1f0),'temp_print_folder',_0x2ccc47(0x304),_0x2ccc47(0x1d9),'linklistLocation',_0x2ccc47(0x2d6)],_0xe4163f=[_0x2ccc47(0x25c),_0x2ccc47(0x1ed),_0x2ccc47(0x237),_0x2ccc47(0x354),_0x2ccc47(0x2cf),_0x2ccc47(0x2f9),_0x2ccc47(0x27d)],_0x4a6d7c={'ServerUrl':_0x2ccc47(0x26d),'autoxchange_executable':_0x2ccc47(0x276),'linklist_executable':_0x2ccc47(0x228),'dwgmerge_executable':'DwgMerge\x20Settings','setup_mysqlHost':'Database\x20Settings','callbackMethod_gatewayUrl_flag':_0x2ccc47(0x32d),'userFolderMaximumFiles':'Demo\x20and\x20Base\x20User\x20Settings','smtpHost':'Mail\x20Server\x20Settings'},_0x30307a={'https':_0x2ccc47(0x24c),'ServerFrontEndUrlAsAllowedOriginOnly':'boolean','autodetect_platform':'boolean','cvjs_svgz_compress':'boolean','cached_conversion':_0x2ccc47(0x24c),'remainOnServer':_0x2ccc47(0x24c),'cvjs_debug':'boolean','autodetect_location':'boolean','platform':'radio|windows,linux','autoxchange_executable':_0x2ccc47(0x2b7)+(_0xe0636a===_0x2ccc47(0x2af)?_0x3cd194[_0x2ccc47(0x287)](','):_0xf148b9['join'](',')),'autoxchange_executable_windows':'radio|'+_0x3cd194[_0x2ccc47(0x287)](','),'autoxchange_executable_linux':_0x2ccc47(0x2b7)+_0xf148b9['join'](','),'dwgmerge_executable':_0x2ccc47(0x2b7)+(_0xe0636a===_0x2ccc47(0x2af)?_0x4c7ca8[_0x2ccc47(0x287)](','):_0x1d067e[_0x2ccc47(0x287)](',')),'dwgmerge_executable_windows':'radio|'+_0x4c7ca8['join'](','),'dwgmerge_executable_linux':_0x2ccc47(0x2b7)+_0x1d067e['join'](','),'linklist_executable':_0x2ccc47(0x2b7)+(_0xe0636a===_0x2ccc47(0x2af)?_0x374e22[_0x2ccc47(0x287)](','):_0x477c0a[_0x2ccc47(0x287)](',')),'linklist_executable_windows':'radio|'+_0x374e22[_0x2ccc47(0x287)](','),'linklist_executable_linux':_0x2ccc47(0x2b7)+_0x477c0a[_0x2ccc47(0x287)](','),'callbackMethod_gatewayUrl_flag':_0x2ccc47(0x24c),'setup_mysqlHost':_0x2ccc47(0x24c),'ContentSecurityPolicyReportOnly':_0x2ccc47(0x24c),'fileLoad_PasswordAuthentication':'boolean','contentLocationCheck':'boolean','globalBearerAutentication':_0x2ccc47(0x24c),'bcryptSaltRounds':_0x2ccc47(0x30f),'userFolderMaximumFiles':_0x2ccc47(0x30f),'userFolderMaximumSizeInMB':'number','recaptchaEnabled':_0x2ccc47(0x24c),'usersExportFrequency':_0x2ccc47(0x2d9),'enableEmailVerification':'boolean','demoUserRetentionDaysAlertBeforeDeletion':'number','demoUserRetentionDays':_0x2ccc47(0x30f)},_0x3b21da={},_0x38567e=Object[_0x2ccc47(0x278)](_0x591a63);_0x591a63[_0x2ccc47(0x30e)]&&_0x5c34cd['push']('platform'),_0x591a63[_0x2ccc47(0x347)]&&(_0x2f7bdc['push']('ServerLocation'),_0x2f7bdc['push'](_0x2ccc47(0x364)),_0x2f7bdc[_0x2ccc47(0x35e)](_0x2ccc47(0x2d2)),_0x2f7bdc[_0x2ccc47(0x35e)](_0x2ccc47(0x1c5))),!_0x591a63['callbackMethod_gatewayUrl_flag']&&_0x2f7bdc[_0x2ccc47(0x35e)](_0x2ccc47(0x2f2)),!_0x591a63['setup_mysqlHost']&&(_0x2f7bdc['push'](_0x2ccc47(0x1ed)),_0x2f7bdc['push'](_0x2ccc47(0x237)),_0x2f7bdc[_0x2ccc47(0x35e)]('mysqlPassword'),_0x2f7bdc[_0x2ccc47(0x35e)](_0x2ccc47(0x2cf))),!_0x591a63['ContentSecurityPolicyReportOnly']&&_0x2f7bdc[_0x2ccc47(0x35e)](_0x2ccc47(0x32b)),!_0x591a63[_0x2ccc47(0x250)]&&(_0x2f7bdc[_0x2ccc47(0x35e)](_0x2ccc47(0x33b)),_0x2f7bdc['push'](_0x2ccc47(0x256))),!_0x591a63[_0x2ccc47(0x1e6)]&&_0x2f7bdc[_0x2ccc47(0x35e)]('globalBearerAutenticationToken'),_0x38567e[_0x2ccc47(0x24a)](_0x4ea100=>{const _0x36d353=_0x2ccc47;!_0x5c34cd[_0x36d353(0x221)](_0x4ea100)&&(_0x3b21da[_0x4ea100]=_0x591a63[_0x4ea100]);}),_0x3b21da[_0x2ccc47(0x271)]=''+_0x591a63[_0x2ccc47(0x25c)]+_0x591a63['fileLocation'],_0x27b14c[_0x2ccc47(0x332)](0xc8)[_0x2ccc47(0x28f)]({'notEditableFields':_0x2f7bdc,'customFieldTypes':_0x30307a,'notHotEditableFields':_0xe4163f,'config':_0x3b21da,'fieldsTitle':_0x4a6d7c,'configData':_0x591a63});}),router[a27_0x398bba(0x306)](a27_0x398bba(0x2bb),protectedRoute,async(_0x372de0,_0x31d913)=>{const _0x31e041=a27_0x398bba,_0x2cb85e=fs[_0x31e041(0x355)](path[_0x31e041(0x287)](path['dirname'](require[_0x31e041(0x2df)]['filename']),_0x31e041(0x2a0)),_0x31e041(0x20b)),_0x3f8a66=_0x2cb85e[_0x31e041(0x2a2)]('{version}',_0x372de0[_0x31e041(0x2d6)]);_0x31d913[_0x31e041(0x259)](_0x3f8a66);});function findMatchingLogFiles(_0x4d8126,_0x4dacd5=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x5140b6=a27_0x398bba;try{const _0x678979=fs[_0x5140b6(0x200)](_0x4d8126);return _0x678979[_0x5140b6(0x32c)](_0x3195e0=>_0x4dacd5[_0x5140b6(0x2aa)](_0x3195e0))[_0x5140b6(0x1e5)](_0x305ef7=>_0x305ef7[_0x5140b6(0x2a2)]('call-Api_Conversion_','')['replaceAll'](_0x5140b6(0x2a1),''));}catch(_0x313599){return console[_0x5140b6(0x2b8)](_0x5140b6(0x2a8),_0x313599),[];}}router['post'](a27_0x398bba(0x1cd),async(_0x3950ac,_0x40b52a)=>{const _0x4cee1b=a27_0x398bba,_0x503e38=new Date(),_0x18520b=_0x503e38[_0x4cee1b(0x323)]()[_0x4cee1b(0x319)]()[_0x4cee1b(0x24b)](0x2,'0')+'_'+(_0x503e38[_0x4cee1b(0x1e8)]()+0x1)[_0x4cee1b(0x319)]()[_0x4cee1b(0x24b)](0x2,'0')+'_'+_0x503e38[_0x4cee1b(0x316)](),{displayDay:_0x3f4999}=_0x3950ac['body'],_0x132ab6=path[_0x4cee1b(0x287)](path['dirname'](require[_0x4cee1b(0x2df)][_0x4cee1b(0x2cb)]),_0x4cee1b(0x22b),_0x4cee1b(0x344)+(_0x3f4999??_0x18520b)+_0x4cee1b(0x2a1));fs[_0x4cee1b(0x26a)](_0x132ab6)?fs[_0x4cee1b(0x1d2)](_0x132ab6,_0x4cee1b(0x20b),function(_0x349f82,_0x3f7a9f){const _0x32afaf=_0x4cee1b;_0x349f82&&_0x40b52a['status'](0x1f4)[_0x32afaf(0x259)](_0x349f82),_0x40b52a[_0x32afaf(0x332)](0xc8)[_0x32afaf(0x28f)]({'content':_0x3f7a9f,'days':findMatchingLogFiles(path['join'](path[_0x32afaf(0x25f)](require['main']['filename']),_0x32afaf(0x22b)))});}):_0x40b52a[_0x4cee1b(0x332)](0xc8)[_0x4cee1b(0x28f)]({'content':'','days':findMatchingLogFiles(path['join'](path['dirname'](require[_0x4cee1b(0x2df)]['filename']),_0x4cee1b(0x22b)))});}),router['delete']('/logs/clean',async(_0x56af98,_0x2e6e5a)=>{const _0x15f6dc=a27_0x398bba,_0x50e436=new Date(),_0x3347ac=_0x50e436[_0x15f6dc(0x323)]()['toString']()['padStart'](0x2,'0')+'_'+(_0x50e436['getMonth']()+0x1)[_0x15f6dc(0x319)]()[_0x15f6dc(0x24b)](0x2,'0')+'_'+_0x50e436['getFullYear'](),_0x212769=findMatchingLogFiles(path[_0x15f6dc(0x287)](path['dirname'](require[_0x15f6dc(0x2df)]['filename']),'logs'));_0x212769[_0x15f6dc(0x24a)](_0x21cfbb=>{const _0x4a925d=_0x15f6dc;if(_0x21cfbb!==_0x3347ac)fs[_0x4a925d(0x366)](path[_0x4a925d(0x287)](path[_0x4a925d(0x25f)](require[_0x4a925d(0x2df)][_0x4a925d(0x2cb)]),_0x4a925d(0x22b),_0x4a925d(0x344)+_0x21cfbb+_0x4a925d(0x2a1)));}),logStream[_0x15f6dc(0x2e6)](),_0x2e6e5a[_0x15f6dc(0x332)](0xc8)[_0x15f6dc(0x28f)]({'message':_0x15f6dc(0x2f6)});}),router[a27_0x398bba(0x306)](a27_0x398bba(0x215),protectedRoute,async(_0x35ec26,_0xd5ec96)=>{const _0x1a45ee=a27_0x398bba,_0x57f58d=path['join'](path[_0x1a45ee(0x25f)](require[_0x1a45ee(0x2df)][_0x1a45ee(0x2cb)]),'cadviewer/settings/rest-api-parameters.json');if(!fs[_0x1a45ee(0x26a)](_0x57f58d)){const _0x1a5c5c={'jsonDataExtraction':{'standard':[{'paramName':_0x1a45ee(0x28f),'paramValue':''},{'paramName':'blocks','paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x1a45ee(0x1f5)},{'paramName':_0x1a45ee(0x368),'paramValue':''},{'paramName':_0x1a45ee(0x293),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x1a45ee(0x2d7)},{'paramName':'model','paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x1a45ee(0x1f5)},{'paramName':_0x1a45ee(0x368),'paramValue':''},{'paramName':_0x1a45ee(0x293),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x1a45ee(0x2b5),'paramValue':''}]}};fs['writeFileSync'](_0x57f58d,JSON[_0x1a45ee(0x1f2)](_0x1a5c5c,null,0x4));}const _0x2c86e8=fs[_0x1a45ee(0x355)](path['join'](path['dirname'](require[_0x1a45ee(0x2df)]['filename']),_0x1a45ee(0x34a)),_0x1a45ee(0x20b)),_0x2a0703=_0x2c86e8[_0x1a45ee(0x2a2)]('{version}',_0x35ec26['version']);_0xd5ec96[_0x1a45ee(0x259)](_0x2a0703);}),router['post']('/restapi-test/parameters/search',async(_0x99ac77,_0x1ac132)=>{const _0x32736f=a27_0x398bba,{actionName:_0x54653d,contentLocation:_0xc1e73d}=_0x99ac77[_0x32736f(0x23a)],_0x591c55=path[_0x32736f(0x287)](path[_0x32736f(0x25f)](require[_0x32736f(0x2df)][_0x32736f(0x2cb)]),_0x32736f(0x2e2));fs[_0x32736f(0x1d2)](_0x591c55,_0x32736f(0x20b),function(_0x162943,_0x3a2f86){const _0x1e64d6=_0x32736f;if(_0x162943)_0x1ac132[_0x1e64d6(0x332)](0xc8)['json']({'parameters':[]});else{const _0x468d49=JSON[_0x1e64d6(0x1ce)](_0x3a2f86);if(_0x468d49[_0x54653d]&&_0x468d49[_0x54653d][_0xc1e73d])_0x1ac132[_0x1e64d6(0x332)](0xc8)[_0x1e64d6(0x28f)]({'parameters':_0x468d49[_0x54653d][_0xc1e73d]});else _0x468d49[_0x54653d]&&_0x468d49[_0x54653d]['standard']?_0x1ac132[_0x1e64d6(0x332)](0xc8)[_0x1e64d6(0x28f)]({'parameters':_0x468d49[_0x54653d]['standard']}):_0x1ac132[_0x1e64d6(0x332)](0xc8)[_0x1e64d6(0x28f)]({'parameters':[]});}});}),router[a27_0x398bba(0x1c9)]('/restapi-test/parameters/save',async(_0x3b3721,_0x3ebf3c)=>{const _0x52e629=a27_0x398bba,{actionName:_0xa1e334,contentLocation:_0x124371,parameters:_0x2c9b49}=_0x3b3721[_0x52e629(0x23a)],_0x4d4bff=path['join'](path[_0x52e629(0x25f)](require['main'][_0x52e629(0x2cb)]),'cadviewer/settings/rest-api-parameters.json');fs[_0x52e629(0x1d2)](_0x4d4bff,_0x52e629(0x20b),function(_0x41d953,_0x2dc0cf){const _0x16f0ae=_0x52e629;if(_0x41d953)_0x3ebf3c[_0x16f0ae(0x332)](0x199)[_0x16f0ae(0x28f)]({'message':_0x16f0ae(0x34f)});else{const _0x39676f=JSON[_0x16f0ae(0x1ce)](_0x2dc0cf);!_0x39676f[_0xa1e334]&&(_0x39676f[_0xa1e334]={}),_0x39676f[_0xa1e334][_0x124371]=_0x2c9b49,fs[_0x16f0ae(0x21d)](_0x4d4bff,JSON[_0x16f0ae(0x1f2)](_0x39676f,null,0x4),function(_0x509529){const _0x1fef5f=_0x16f0ae;_0x509529&&_0x3ebf3c[_0x1fef5f(0x332)](0x199)[_0x1fef5f(0x28f)]({'message':_0x1fef5f(0x34f)}),_0x3ebf3c[_0x1fef5f(0x332)](0xc8)['json']({'message':_0x1fef5f(0x1d4)});});}});}),router['get'](a27_0x398bba(0x1c6),protectedRoute,async(_0x23e8da,_0x1e39ce)=>{const _0x4928e4=a27_0x398bba,_0x63ba3=fs[_0x4928e4(0x355)](path[_0x4928e4(0x287)](path[_0x4928e4(0x25f)](require['main'][_0x4928e4(0x2cb)]),'cadviewer/settings/doctor.html'),'utf8'),_0x2e0197=_0x63ba3[_0x4928e4(0x2a2)](_0x4928e4(0x255),_0x23e8da[_0x4928e4(0x2d6)]);_0x1e39ce['send'](_0x2e0197);}),router[a27_0x398bba(0x1c9)]('/doctor/check',async(_0xdeeea2,_0x3d6a3e)=>{const _0x1e2787=a27_0x398bba,_0x4f0080=getHotConfig(),_0x12fc70=_0x4f0080[_0x1e2787(0x2a4)][_0x1e2787(0x2a2)]('//','/'),_0x52081d=_0x4f0080['dwgmergeLocation'][_0x1e2787(0x2a2)]('//','/'),_0x5a6818=_0x4f0080[_0x1e2787(0x2b2)][_0x1e2787(0x2a2)]('//','/'),_0x2ec2e4=''+_0x12fc70+_0x4f0080['autoxchange_executable'],_0x53ba26=''+_0x52081d+_0x4f0080[_0x1e2787(0x2d2)],_0x4f1ac4=''+_0x5a6818+_0x4f0080[_0x1e2787(0x1c5)],_0xd4536d=[],_0x34c641=new Promise(_0x1cd26a=>{const _0xcc1995=_0x1e2787;exec(os[_0xcc1995(0x25a)]()==='win32'?_0xcc1995(0x246):'ls',_0x18f530=>{const _0x14ca15=_0xcc1995;_0x18f530?_0xd4536d[_0x14ca15(0x35e)]({'title':_0x14ca15(0x1e0),'status':![],'priority':0x1}):_0xd4536d[_0x14ca15(0x35e)]({'title':_0x14ca15(0x1e0),'status':!![],'priority':0x1}),_0x1cd26a();});}),_0x3e6fc7=new Promise(_0x8e755f=>{const _0x308b98=_0x1e2787;fs[_0x308b98(0x284)](_0x2ec2e4,fs[_0x308b98(0x241)][_0x308b98(0x2f7)],_0x33f8cb=>{const _0x13e148=_0x308b98;_0x33f8cb?_0xd4536d[_0x13e148(0x35e)]({'title':_0x13e148(0x209)+_0x4f0080[_0x13e148(0x364)]+_0x13e148(0x31c),'status':![],'priority':0x2}):_0xd4536d[_0x13e148(0x35e)]({'title':_0x13e148(0x209)+_0x4f0080['autoxchange_executable']+_0x13e148(0x31c),'status':!![],'priority':0x2}),_0x8e755f();});}),_0x17ac81=new Promise(_0x4cf427=>{const _0x4cb483=_0x1e2787;fs[_0x4cb483(0x284)](_0x53ba26,fs[_0x4cb483(0x241)][_0x4cb483(0x2f7)],_0x328d38=>{const _0x57fb84=_0x4cb483;_0x328d38?_0xd4536d[_0x57fb84(0x35e)]({'title':_0x57fb84(0x209)+_0x4f0080[_0x57fb84(0x2d2)]+'\x22\x20executable','status':![],'priority':0x3}):_0xd4536d[_0x57fb84(0x35e)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x4f0080['dwgmerge_executable']+_0x57fb84(0x31c),'status':!![],'priority':0x3}),_0x4cf427();});}),_0x5b1736=new Promise(_0x2e3d53=>{const _0x434b73=_0x1e2787;fs[_0x434b73(0x284)](_0x4f1ac4,fs['constants'][_0x434b73(0x2f7)],_0x5956b2=>{const _0x8c6c05=_0x434b73;_0x5956b2?_0xd4536d[_0x8c6c05(0x35e)]({'title':_0x8c6c05(0x209)+_0x4f0080[_0x8c6c05(0x1c5)]+'\x22\x20executable','status':![],'priority':0x4}):_0xd4536d[_0x8c6c05(0x35e)]({'title':_0x8c6c05(0x209)+_0x4f0080['linklist_executable']+_0x8c6c05(0x31c),'status':!![],'priority':0x4}),_0x2e3d53();});}),_0x360175=new Promise(_0x20255e=>{const _0x2dceba=_0x1e2787,_0x5af3e4=new Date(),_0x1dd288=_0x5af3e4[_0x2dceba(0x323)]()[_0x2dceba(0x319)]()['padStart'](0x2,'0')+'_'+(_0x5af3e4[_0x2dceba(0x1e8)]()+0x1)[_0x2dceba(0x319)]()[_0x2dceba(0x24b)](0x2,'0')+'_'+_0x5af3e4['getFullYear'](),{displayDay:_0x16cc2a}=_0xdeeea2[_0x2dceba(0x23a)];fs[_0x2dceba(0x284)](path['join'](path[_0x2dceba(0x25f)](require[_0x2dceba(0x2df)][_0x2dceba(0x2cb)]),_0x2dceba(0x22b),_0x2dceba(0x344)+(_0x16cc2a??_0x1dd288)+_0x2dceba(0x2a1)),fs[_0x2dceba(0x241)][_0x2dceba(0x2fe)],_0x395e2e=>{const _0x25016c=_0x2dceba;_0x395e2e?_0xd4536d[_0x25016c(0x35e)]({'title':_0x25016c(0x2de)+(_0x16cc2a??_0x1dd288)+'.log\x22','status':![],'priority':0x5}):_0xd4536d['push']({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x16cc2a??_0x1dd288)+_0x25016c(0x22c),'status':!![],'priority':0x5}),_0x20255e();});}),_0x361c91=(_0x228855,_0x2b11c7)=>{const _0x48d511=_0x1e2787,_0x1ae63c=path[_0x48d511(0x287)](path[_0x48d511(0x25f)](require[_0x48d511(0x2df)]['filename']),_0x228855);return new Promise(_0x764e03=>{const _0x1fdb30=_0x48d511;fs['access'](path[_0x1fdb30(0x287)](path[_0x1fdb30(0x25f)](_0x1ae63c)),fs[_0x1fdb30(0x241)][_0x1fdb30(0x1cc)]|fs[_0x1fdb30(0x241)]['W_OK'],_0x2f95aa=>{const _0x72d598=_0x1fdb30;_0x2f95aa?_0xd4536d[_0x72d598(0x35e)]({'title':_0x72d598(0x303)+_0x228855,'status':![],'priority':_0x2b11c7+0x6}):_0xd4536d[_0x72d598(0x35e)]({'title':_0x72d598(0x303)+_0x228855,'status':!![],'priority':_0x2b11c7+0x6}),_0x764e03();});});},_0x4aedf1=['/converters/files/',_0x1e2787(0x262),_0x1e2787(0x352),'/converters/files/print/',_0x1e2787(0x1e3),_0x1e2787(0x254),'/content/redlines/v7/'],_0x359710=_0x4aedf1['map'](_0x361c91);Promise['all']([_0x34c641,_0x3e6fc7,_0x17ac81,_0x5b1736,_0x360175,..._0x359710])[_0x1e2787(0x26e)](()=>{const _0x24b112=_0x1e2787;_0x3d6a3e[_0x24b112(0x332)](0xc8)['json']({'checking_list':_0xd4536d});})['catch'](()=>{const _0x331b60=_0x1e2787;_0x3d6a3e[_0x331b60(0x332)](0x1f4)[_0x331b60(0x28f)]({'error':_0x331b60(0x1fe)});});}),router[a27_0x398bba(0x306)](a27_0x398bba(0x279),protectedRoute,async(_0x197ac0,_0x1b4b36)=>{const _0xb78375=a27_0x398bba,_0x399112=fs[_0xb78375(0x355)](path[_0xb78375(0x287)](path['dirname'](require['main'][_0xb78375(0x2cb)]),_0xb78375(0x240)),_0xb78375(0x20b)),_0x47fc7e=_0x399112[_0xb78375(0x2a2)](_0xb78375(0x255),_0x197ac0[_0xb78375(0x2d6)]);_0x1b4b36[_0xb78375(0x259)](_0x47fc7e);}),router[a27_0x398bba(0x1c9)]('/users/list',async(_0x5dc91a,_0x11c1c9)=>{const _0x45380d=a27_0x398bba;let _0x39b74a;try{const [_0x379292]=await conn['promise']()[_0x45380d(0x273)](_0x45380d(0x363),[]);_0x39b74a=_0x379292;}catch(_0x4e8c8c){console[_0x45380d(0x1f4)](_0x4e8c8c),_0x11c1c9['status'](0x1f4)[_0x45380d(0x28f)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x11c1c9['status'](0xc8)['json']({'success':!![],'data':_0x39b74a});}),router[a27_0x398bba(0x1c9)](a27_0x398bba(0x279),upload[a27_0x398bba(0x31a)](a27_0x398bba(0x1f1)),async(_0x1052ea,_0x387846)=>{const _0x543644=a27_0x398bba,{id:_0x17d1fa,first_name:_0x22d022,last_name:_0x276aff,username:_0x5d5ca9,email:_0x21e04b,password:_0x24b484,is_enabled:_0x482c23}=_0x1052ea[_0x543644(0x23a)],_0x39a1e5=_0x1052ea[_0x543644(0x23a)][_0x543644(0x281)]==='admin'?_0x543644(0x34d):_0x1052ea['body'][_0x543644(0x281)]===_0x543644(0x25d)?_0x543644(0x25d):_0x543644(0x326);let _0xd2bcc1;console['log'](_0x543644(0x31e));_0x24b484&&(_0xd2bcc1=await bcrypt[_0x543644(0x311)](_0x24b484,0xa));let _0x339706=null;if(_0x1052ea[_0x543644(0x2fb)]){const _0x53ca9b=_0x543644(0x310)+randomUUID()+_0x543644(0x2e4);fs[_0x543644(0x339)](_0x1052ea['file']['path'],'./'+_0x53ca9b),fs['unlinkSync'](_0x1052ea[_0x543644(0x2fb)]['path']),config['callbackMethod_gatewayUrl_flag']?_0x339706=config[_0x543644(0x2f2)]+'/'+_0x53ca9b:_0x339706=config[_0x543644(0x25c)]+'/'+_0x53ca9b;}if(_0x17d1fa){try{let [_0x3b4ba6]=await conn[_0x543644(0x1db)]()[_0x543644(0x273)](_0x543644(0x248),[_0x21e04b,_0x5d5ca9,_0x17d1fa]);if(_0x3b4ba6[_0x543644(0x301)]>0x0)_0x387846['status'](0x199)[_0x543644(0x28f)]({'error':_0x543644(0x210)});else{!_0x1052ea[_0x543644(0x2fb)]&&([_0x3b4ba6]=await conn[_0x543644(0x1db)]()[_0x543644(0x273)](_0x543644(0x1c1),[_0x17d1fa]),_0x339706=_0x3b4ba6[0x0][_0x543644(0x365)]);const _0x372dd3=_0x543644(0x1dc)+(_0x24b484?_0x543644(0x1c0):'')+'`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?';await conn[_0x543644(0x1db)]()[_0x543644(0x273)](_0x372dd3,_0x24b484?[_0x339706,_0x22d022,_0x276aff,_0x5d5ca9,_0x21e04b,_0xd2bcc1,_0x482c23,_0x39a1e5,_0x17d1fa]:[_0x339706,_0x22d022,_0x276aff,_0x5d5ca9,_0x21e04b,_0x482c23,_0x39a1e5,_0x17d1fa]);}}catch(_0x4e9a5f){console[_0x543644(0x1f4)](_0x4e9a5f),_0x387846[_0x543644(0x332)](0x1f4)[_0x543644(0x28f)]({'error':_0x543644(0x280)});return;}_0x387846[_0x543644(0x332)](0xc8)[_0x543644(0x28f)]({'success':!![],'message':_0x543644(0x28a)});}else{try{const [_0x1388f8]=await conn[_0x543644(0x1db)]()[_0x543644(0x273)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?',[_0x21e04b,_0x5d5ca9]);if(_0x1388f8[_0x543644(0x301)]>0x0)_0x387846['status'](0x199)[_0x543644(0x28f)]({'error':_0x543644(0x210)});else{const _0x100cfa=randomUUID();await conn[_0x543644(0x1db)]()['execute'](_0x543644(0x2e0),[_0x339706,_0x22d022,_0x276aff,_0x5d5ca9,_0x21e04b,_0xd2bcc1,_0x39a1e5,_0x482c23,_0x100cfa]);const _0x4538f5=_0x543644(0x1d6)+_0x100cfa;fs[_0x543644(0x219)](_0x4538f5);}}catch(_0x3b839f){console[_0x543644(0x1f4)](_0x3b839f),_0x387846[_0x543644(0x332)](0x1f4)[_0x543644(0x28f)]({'error':_0x543644(0x280)});return;}_0x387846['status'](0xc8)['json']({'success':!![],'message':_0x543644(0x21c)});}}),router[a27_0x398bba(0x2f0)](a27_0x398bba(0x30a),async(_0x5eebe0,_0x1c8697)=>{const _0xd847c3=a27_0x398bba,{userId:_0x14f1d9}=_0x5eebe0[_0xd847c3(0x23a)];let _0x7c25a2;try{const [_0x337fa3]=await conn[_0xd847c3(0x1db)]()[_0xd847c3(0x273)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x14f1d9]);_0x337fa3[_0xd847c3(0x301)]>0x0&&(_0x7c25a2=_0x337fa3[0x0]);}catch(_0x5c2277){console[_0xd847c3(0x1f4)]({'err':_0x5c2277}),_0x1c8697[_0xd847c3(0x332)](0x1f4)[_0xd847c3(0x28f)]({'error':_0xd847c3(0x280)});return;}if(!_0x7c25a2){_0x1c8697[_0xd847c3(0x332)](0x191)['json']({'error':_0xd847c3(0x27b)});return;}let _0x272105=_0x7c25a2[_0xd847c3(0x2ef)];if(!_0x272105){_0x272105=randomUUID();try{await conn[_0xd847c3(0x1db)]()[_0xd847c3(0x273)](_0xd847c3(0x288),[_0x272105,_0x14f1d9]);}catch(_0x579761){console[_0xd847c3(0x1f4)]({'err':_0x579761}),_0x1c8697[_0xd847c3(0x332)](0x1f4)[_0xd847c3(0x28f)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}const _0x3c1ced=_0xd847c3(0x1d6)+_0x272105;console['log'](_0xd847c3(0x2ed)),console[_0xd847c3(0x1f4)](_0x3c1ced),!fs[_0xd847c3(0x26a)](_0x3c1ced)&&fs[_0xd847c3(0x219)](_0x3c1ced),cleanCacheForUserFiles(_0x3c1ced),fs['rmSync'](_0x3c1ced,{'recursive':!![],'force':!![]}),fs[_0xd847c3(0x219)](_0x3c1ced),_0x1c8697[_0xd847c3(0x332)](0xc8)['json']({'success':!![],'message':_0xd847c3(0x334)});}),router[a27_0x398bba(0x2f0)](a27_0x398bba(0x2c7),async(_0x3f46ff,_0x22a127)=>{const _0x3af324=a27_0x398bba,_0x5dfcf2=_0x3f46ff[_0x3af324(0x2d0)][_0x3af324(0x224)];try{let _0x150939;try{const [_0xc57ca]=await conn[_0x3af324(0x1db)]()[_0x3af324(0x273)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x5dfcf2]);_0xc57ca[_0x3af324(0x301)]>0x0&&(_0x150939=_0xc57ca[0x0]);}catch(_0x425b46){console['log']({'err':_0x425b46}),_0x22a127[_0x3af324(0x332)](0x1f4)[_0x3af324(0x28f)]({'error':_0x3af324(0x280)});return;}if(!_0x150939){_0x22a127['status'](0x191)[_0x3af324(0x28f)]({'error':'Invalid\x20user'});return;}let _0x421a86=_0x150939[_0x3af324(0x2ef)];if(_0x421a86){const _0x1fde00=_0x3af324(0x1d6)+_0x421a86;fs[_0x3af324(0x26a)](_0x1fde00)&&(cleanCacheForUserFiles(_0x1fde00),fs[_0x3af324(0x1ff)](_0x1fde00,{'recursive':!![],'force':!![]}));}await conn[_0x3af324(0x1db)]()['execute'](_0x3af324(0x32a),[_0x5dfcf2]);}catch(_0x2eba97){console[_0x3af324(0x1f4)](_0x2eba97),_0x22a127['status'](0x1f4)[_0x3af324(0x28f)]({'error':_0x3af324(0x280)});return;}_0x22a127[_0x3af324(0x332)](0xc8)['json']({'success':!![],'message':_0x3af324(0x251)});}),router[a27_0x398bba(0x306)](a27_0x398bba(0x22e),async(_0x211de4,_0x41afb4)=>{const _0x1b19d0=a27_0x398bba,_0x4f4871=osu[_0x1b19d0(0x1d1)],_0x1c659a=osu['mem'],_0x18bc27=osu[_0x1b19d0(0x242)],_0x5f9b92=osu['os'],_0x503611={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x41e694=os[_0x1b19d0(0x25a)]()===_0x1b19d0(0x2f8)?'c:':'/';const _0x1daf2=await _0x18bc27['info'](_0x41e694);_0x503611[_0x1b19d0(0x21a)]=_0x1daf2[_0x1b19d0(0x2da)],_0x503611['usedGB']=_0x1daf2['usedGb'],_0x503611[_0x1b19d0(0x2c5)]=_0x1daf2[_0x1b19d0(0x2c5)],_0x503611[_0x1b19d0(0x269)]=_0x1daf2[_0x1b19d0(0x325)];}catch(_0x31a171){console[_0x1b19d0(0x1f4)]('Error\x20getting\x20disk\x20usage',_0x31a171);}const _0x38af63={'usage':0x0,'count':0x0};try{_0x38af63[_0x1b19d0(0x2dc)]=await _0x4f4871[_0x1b19d0(0x2dc)](),_0x38af63[_0x1b19d0(0x225)]=_0x4f4871[_0x1b19d0(0x225)]();}catch(_0x2b3d73){console['log'](_0x1b19d0(0x2ff),_0x2b3d73);}const _0x10ec1a={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x10ec1a['os']=await _0x5f9b92[_0x1b19d0(0x349)](),_0x10ec1a['platform']=_0x5f9b92['platform'](),_0x10ec1a['ip']=_0x5f9b92['ip'](),_0x10ec1a['uptime']=_0x5f9b92[_0x1b19d0(0x25e)](),_0x10ec1a[_0x1b19d0(0x358)]=_0x5f9b92[_0x1b19d0(0x358)](),_0x10ec1a[_0x1b19d0(0x302)]=_0x5f9b92['type'](),_0x10ec1a[_0x1b19d0(0x22f)]=_0x5f9b92[_0x1b19d0(0x22f)](),_0x10ec1a[_0x1b19d0(0x24d)]=await osu[_0x1b19d0(0x2ac)]['who'](),_0x10ec1a[_0x1b19d0(0x343)]=await osu[_0x1b19d0(0x2ac)][_0x1b19d0(0x343)](),_0x10ec1a[_0x1b19d0(0x331)]=await osu[_0x1b19d0(0x2ac)][_0x1b19d0(0x331)]();}catch(_0x19219a){console['log'](_0x1b19d0(0x307),_0x19219a);}const _0x3ed2d1={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x3ed2d1['totalProcesses']=await osu[_0x1b19d0(0x298)]['totalProcesses'](),_0x3ed2d1[_0x1b19d0(0x2d1)]=await osu[_0x1b19d0(0x298)][_0x1b19d0(0x2d1)]();}catch(_0x5e94da){console[_0x1b19d0(0x1f4)](_0x1b19d0(0x31d),_0x5e94da);}let _0x179671={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0xb2c873=await _0x1c659a['info']();_0x179671[_0x1b19d0(0x2a6)]=_0xb2c873[_0x1b19d0(0x2a6)],_0x179671[_0x1b19d0(0x327)]=_0xb2c873[_0x1b19d0(0x22d)]/0x400/0x400,_0x179671['totalMemMb']=_0xb2c873[_0x1b19d0(0x1f7)]/0x400/0x400;}catch(_0x45b1bc){console[_0x1b19d0(0x1f4)](_0x1b19d0(0x1df),_0x45b1bc);}let _0x4ac372=0x0;try{_0x4ac372=await conn[_0x1b19d0(0x1db)]()['query'](_0x1b19d0(0x249))[_0x1b19d0(0x26e)](([_0x2b9265])=>_0x2b9265[0x0]['total']);}catch(_0x331d73){console[_0x1b19d0(0x1f4)](_0x1b19d0(0x28d),_0x331d73);}const _0x5e0b27=getMonitoringData(),_0x406991=_0x5e0b27[_0x1b19d0(0x32c)](_0x39f464=>_0x39f464[_0x1b19d0(0x231)]!==null&&_0x39f464[_0x1b19d0(0x231)]!==undefined),_0x4933d3=_0x5e0b27[_0x1b19d0(0x32c)](_0x783aa6=>_0x783aa6['conversionMemoryUsage']!==null&&_0x783aa6[_0x1b19d0(0x1f6)]!==undefined)[_0x1b19d0(0x1e5)](_0x108cb5=>parseFloat(_0x108cb5[_0x1b19d0(0x1f6)][_0x1b19d0(0x2a2)]('Kb')[_0x1b19d0(0x2a7)]())),_0x2c5bcb=_0x406991['reduce']((_0x38b9aa,_0x456db5)=>_0x38b9aa+parseFloat(_0x456db5['conversionTimeSpend']),0x0)/_0x406991[_0x1b19d0(0x301)],_0x224644=_0x4933d3[_0x1b19d0(0x333)]((_0xeebe70,_0x1cd9dd)=>_0xeebe70+_0x1cd9dd,0x0)/_0x4933d3[_0x1b19d0(0x301)];_0x41afb4['json']({'requestsPerSecond':counter[_0x1b19d0(0x257)](),'diskUsage':_0x503611,'cpus':_0x38af63,'system':_0x10ec1a,'process':_0x3ed2d1,'totalMonitoringData':_0x5e0b27[_0x1b19d0(0x301)],'memory':_0x179671,'totalUsers':_0x4ac372,'avgConvertionTime':_0x2c5bcb,'avgMemoryUsage':_0x224644});}),router[a27_0x398bba(0x1c9)](a27_0x398bba(0x1d3),(_0x44ca58,_0x2aa64e)=>{const _0x1e4433=a27_0x398bba;counter[_0x1e4433(0x33a)](),_0x2aa64e[_0x1e4433(0x28f)]({'message':_0x1e4433(0x2a9)});});const getMonitoringData=()=>{const _0x330bdf=a27_0x398bba,_0x377a86=_0x330bdf(0x201);let _0x540fd8=[];try{_0x540fd8=JSON[_0x330bdf(0x1ce)](fs[_0x330bdf(0x355)](_0x377a86));}catch(_0x1c784d){console['log'](_0x330bdf(0x252));}return _0x540fd8;};router[a27_0x398bba(0x306)]('/conversion/list',async(_0x24b0be,_0x377071)=>{const _0x56ea66=a27_0x398bba,{page:page=0x1,limit:limit=0xa}=_0x24b0be[_0x56ea66(0x35f)],_0x50d2fc=(page-0x1)*limit;try{const _0x508093=getMonitoringData(),_0x1518b3=_0x508093[_0x56ea66(0x301)],_0x530b5f=Math['ceil'](_0x1518b3/limit),_0x39c708=_0x508093[_0x56ea66(0x25b)](_0x50d2fc,_0x50d2fc+limit);_0x377071[_0x56ea66(0x332)](0xc8)[_0x56ea66(0x28f)]({'data':_0x39c708,'page':parseInt(''+page),'totalPages':_0x530b5f,'total':_0x1518b3});}catch(_0x3f3275){console[_0x56ea66(0x1f4)](_0x3f3275),_0x377071[_0x56ea66(0x332)](0x1f4)[_0x56ea66(0x28f)]({'error':_0x56ea66(0x280)});}}),router[a27_0x398bba(0x2f0)](a27_0x398bba(0x1fc),async(_0x1bf5ee,_0x57e62a)=>{const _0x4cd1a8=a27_0x398bba,_0x458240=_0x4cd1a8(0x201);try{fs[_0x4cd1a8(0x258)](_0x458240,JSON['stringify']([],null,0x4)),analyzeConverterFiles(),_0x57e62a[_0x4cd1a8(0x332)](0xc8)[_0x4cd1a8(0x28f)]({'message':_0x4cd1a8(0x2d4)});}catch(_0x347b7b){console[_0x4cd1a8(0x1f4)](_0x347b7b),_0x57e62a[_0x4cd1a8(0x332)](0x1f4)[_0x4cd1a8(0x28f)]({'error':_0x4cd1a8(0x280)});}}),router[a27_0x398bba(0x306)](a27_0x398bba(0x22a),async(_0x3bd561,_0x7db5c6)=>{const _0x29795b=a27_0x398bba,_0x54e5e2=getHotConfig()[_0x29795b(0x2a4)]['replaceAll']('//','/'),{page:page=0x1,limit:limit=0xa}=_0x3bd561[_0x29795b(0x35f)],_0x5ca20f=(page-0x1)*limit;try{const _0x591f8b=_0x54e5e2+_0x29795b(0x2b0);console['log'](_0x591f8b);const _0xd0ec33=fs[_0x29795b(0x355)](_0x591f8b,_0x29795b(0x20b)),_0x5e4ab7=_0xd0ec33[_0x29795b(0x230)]('\x0a'),_0x1eec39=[];_0x5e4ab7['forEach'](_0x3e8d02=>{const _0x4979f0=_0x29795b,_0x5ddd7c=_0x3e8d02[_0x4979f0(0x230)](',');if(_0x5ddd7c['length']<0x4)return;const _0x2bd82b=_0x5ddd7c[0x0],_0x221159=_0x5ddd7c[0x1],_0x21a6cf=parseFloat(_0x5ddd7c[0x2]);_0x1eec39[_0x4979f0(0x35e)]({'file':_0x2bd82b[_0x4979f0(0x2a2)]('\x22',''),'action':_0x221159,'timeSpend':_0x21a6cf,'memoryUsage':_0x5ddd7c[0x3]});});const _0x583294=_0x1eec39[_0x29795b(0x301)],_0x58dd90=Math[_0x29795b(0x35a)](_0x583294/limit),_0x50c1ea=_0x1eec39[_0x29795b(0x25b)](_0x5ca20f,_0x5ca20f+limit);_0x7db5c6[_0x29795b(0x332)](0xc8)['json']({'data':_0x50c1ea,'page':parseInt(''+page),'totalPages':_0x58dd90,'total':_0x583294});}catch(_0x27d18e){console[_0x29795b(0x1f4)](_0x27d18e),_0x7db5c6[_0x29795b(0x332)](0x1f4)['json']({'error':_0x29795b(0x280)});}}),router[a27_0x398bba(0x306)](a27_0x398bba(0x320),async(_0x1feca4,_0x2198a4)=>{const _0x531143=a27_0x398bba,_0x219b83=path['join'](path[_0x531143(0x25f)](require[_0x531143(0x2df)][_0x531143(0x2cb)]),_0x531143(0x1d0),'files');try{let _0x3caa9f=0x0,_0x547546=0x0;function _0x3ca563(_0x46002e){const _0x587b5c=_0x531143;let _0x4307c0=0x0,_0x30451d=0x0;if(fs[_0x587b5c(0x26a)](_0x46002e)){const _0x4f6aa4=fs['readdirSync'](_0x46002e);_0x30451d=0x0;for(const _0x66a25 of _0x4f6aa4){const _0x15d5c8=path[_0x587b5c(0x287)](_0x46002e,_0x66a25),_0x4b3116=fs[_0x587b5c(0x297)](_0x15d5c8);if(_0x4b3116[_0x587b5c(0x1f8)]()&&_0x66a25!==_0x587b5c(0x299))_0x30451d++,_0x4307c0+=_0x4b3116[_0x587b5c(0x2ce)];else{if(_0x4b3116[_0x587b5c(0x227)]()){}}}}return{'size':_0x4307c0,'count':_0x30451d};}const _0x12146f=_0x3ca563(_0x219b83);_0x3caa9f=_0x12146f[_0x531143(0x2ce)],_0x547546=_0x12146f['count'],_0x2198a4['json']({'fileCount':_0x547546,'totalSize':_0x3caa9f});}catch(_0x49033e){console[_0x531143(0x2b8)](_0x531143(0x208),_0x49033e),_0x2198a4[_0x531143(0x332)](0x1f4)[_0x531143(0x28f)]({'error':_0x531143(0x2eb)});}}),router['delete'](a27_0x398bba(0x350),async(_0x35bb52,_0x18e84d)=>{const _0x2320b8=a27_0x398bba,_0x343b6c=path[_0x2320b8(0x287)](path[_0x2320b8(0x25f)](require[_0x2320b8(0x2df)][_0x2320b8(0x2cb)]),_0x2320b8(0x1d0),_0x2320b8(0x283));try{function _0x1209c1(_0x10b723){const _0x297e8d=_0x2320b8;if(fs['existsSync'](_0x10b723)){const _0x254ca6=fs[_0x297e8d(0x200)](_0x10b723);for(const _0x223dbc of _0x254ca6){const _0x28915b=path[_0x297e8d(0x287)](_0x10b723,_0x223dbc),_0x5945c8=fs[_0x297e8d(0x297)](_0x28915b);if(_0x5945c8[_0x297e8d(0x227)]()){}else _0x223dbc!==_0x297e8d(0x299)&&fs['unlinkSync'](_0x28915b);}}}_0x1209c1(_0x343b6c),analyzeConverterFiles(),_0x18e84d['json']({'message':_0x2320b8(0x2e7)});}catch(_0x258bc5){console['error'](_0x2320b8(0x285),_0x258bc5),_0x18e84d['status'](0x1f4)['json']({'error':'Failed\x20to\x20flush\x20cache'});}}),router[a27_0x398bba(0x306)]('/cache-stats.js',async(_0x347887,_0x16d972)=>{const _0x3e055d=a27_0x398bba;_0x16d972[_0x3e055d(0x214)](path['join'](path['dirname'](require[_0x3e055d(0x2df)][_0x3e055d(0x2cb)]),_0x3e055d(0x204)));}),router[a27_0x398bba(0x306)](a27_0x398bba(0x292),protectedRoute,async(_0x22b3ca,_0x5f33d4)=>{const _0x27f35f=a27_0x398bba,_0x125dcf=fs[_0x27f35f(0x355)](path[_0x27f35f(0x287)](path[_0x27f35f(0x25f)](require[_0x27f35f(0x2df)][_0x27f35f(0x2cb)]),_0x27f35f(0x2be)),_0x27f35f(0x20b)),_0x26c1de=_0x125dcf[_0x27f35f(0x2a2)](_0x27f35f(0x255),_0x22b3ca[_0x27f35f(0x2d6)]);_0x5f33d4[_0x27f35f(0x259)](_0x26c1de);}),router[a27_0x398bba(0x306)](a27_0x398bba(0x2ea),async(_0x3ee388,_0x535c5d)=>{const _0x13d47a=a27_0x398bba,{page:page=0x1,limit:limit=0x10}=_0x3ee388[_0x13d47a(0x35f)],_0x49fcf6=JSON[_0x13d47a(0x1ce)](fs[_0x13d47a(0x355)](path['join'](path[_0x13d47a(0x25f)](require['main'][_0x13d47a(0x2cb)]),_0x13d47a(0x2dd)))),_0x256413=(page-0x1)*limit,_0x4964b7=page*limit,_0x296893=_0x49fcf6[_0x13d47a(0x283)][_0x13d47a(0x301)],_0x4239c8=Math[_0x13d47a(0x35a)](_0x296893/limit),_0x3f4414=_0x49fcf6[_0x13d47a(0x283)][_0x13d47a(0x25b)](_0x256413,_0x4964b7);_0x535c5d[_0x13d47a(0x28f)]({'files':_0x3f4414,'pagination':{'total':_0x296893,'totalPages':_0x4239c8,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router[a27_0x398bba(0x306)](a27_0x398bba(0x35c),async(_0x44097c,_0x1291ce)=>{const _0x3cd09f=a27_0x398bba,{file:_0x3ec4b1}=_0x44097c['params'],_0x4619a1=path[_0x3cd09f(0x287)](path[_0x3cd09f(0x25f)](require[_0x3cd09f(0x2df)]['filename']),_0x3cd09f(0x1d0),_0x3cd09f(0x283)),_0x12a7bd=path[_0x3cd09f(0x287)](_0x4619a1,_0x3ec4b1),_0x17e3a2=fs[_0x3cd09f(0x355)](_0x12a7bd,'utf8'),_0x21c5a0=_0x17e3a2[_0x3cd09f(0x230)]('\x0a'),_0x48fc8b=_0x21c5a0[_0x3cd09f(0x1e5)](_0x410547=>{const _0x28b493=_0x3cd09f,_0x21f877=_0x410547[_0x28b493(0x230)](',');return _0x21f877['map'](_0x49b071=>_0x49b071[_0x28b493(0x2a2)]('\x22',''));});_0x1291ce[_0x3cd09f(0x28f)](_0x48fc8b);}),router['get'](a27_0x398bba(0x290),async(_0x53dc37,_0x50e5b7)=>{const _0x439c61=a27_0x398bba,{id:_0x314f95}=_0x53dc37[_0x439c61(0x2d0)],_0xe19823=path[_0x439c61(0x287)](path['dirname'](require[_0x439c61(0x2df)][_0x439c61(0x2cb)]),_0x439c61(0x1d0),_0x439c61(0x283)),_0x3d0ba3=path[_0x439c61(0x287)](_0xe19823,_0x314f95);if(_0x3d0ba3['endsWith'](_0x439c61(0x1da))){var _0x48c176=require(_0x439c61(0x2cd));const _0x2b06f8=fs[_0x439c61(0x355)](_0x3d0ba3),_0x53293c=_0x48c176[_0x439c61(0x1eb)](_0x2b06f8);_0x50e5b7[_0x439c61(0x29c)](_0x439c61(0x220),_0x439c61(0x313)),_0x50e5b7['send'](_0x53293c);}else _0x50e5b7[_0x439c61(0x214)](_0x3d0ba3);}),router['delete']('/cache/files/:id',async(_0x2b8de0,_0x30fbdf)=>{const _0x5b3ba7=a27_0x398bba,{id:_0x40c529}=_0x2b8de0[_0x5b3ba7(0x2d0)],_0x319976=path[_0x5b3ba7(0x287)](path[_0x5b3ba7(0x25f)](require['main'][_0x5b3ba7(0x2cb)]),_0x5b3ba7(0x1d0),'files'),_0x530ff9=JSON['parse'](fs[_0x5b3ba7(0x355)](path[_0x5b3ba7(0x287)](path[_0x5b3ba7(0x25f)](require[_0x5b3ba7(0x2df)][_0x5b3ba7(0x2cb)]),'cadviewer/settings/converter-files-analysis.json'))),_0x4f64b5=_0x530ff9['files']['find'](_0x36e891=>_0x36e891[_0x5b3ba7(0x1c7)]===_0x40c529);if(_0x4f64b5){try{fs[_0x5b3ba7(0x26a)](path[_0x5b3ba7(0x287)](_0x319976,_0x4f64b5['name']))&&fs[_0x5b3ba7(0x366)](path[_0x5b3ba7(0x287)](_0x319976,_0x4f64b5[_0x5b3ba7(0x1c7)]));}catch(_0x467064){console[_0x5b3ba7(0x1f4)]('Error\x20deleting\x20file',{'e':_0x467064});}(_0x4f64b5['availableFormats']??[])[_0x5b3ba7(0x24a)](_0x5302ee=>{const _0x14f1de=_0x5b3ba7;try{fs[_0x14f1de(0x26a)](path[_0x14f1de(0x287)](_0x319976,_0x5302ee['id']))&&fs['unlinkSync'](path[_0x14f1de(0x287)](_0x319976,_0x5302ee['id']));}catch(_0x29c776){console[_0x14f1de(0x1f4)](_0x14f1de(0x1de),{'e':_0x29c776});}});}analyzeConverterFiles(),_0x30fbdf[_0x5b3ba7(0x28f)]({'message':_0x5b3ba7(0x1ee)});});const deleteOldDemoUsers=async()=>{const _0x58d60e=a27_0x398bba;console[_0x58d60e(0x1f4)]('Deleting\x20old\x20demo_user\x20accounts...');const _0x229a52=config[_0x58d60e(0x277)],_0x5a0344=_0x58d60e(0x1ea);try{const [_0x3653ad]=await conn[_0x58d60e(0x1db)]()[_0x58d60e(0x273)](_0x5a0344,[_0x229a52]),_0x1353e1=_0x3653ad[_0x58d60e(0x1e5)](_0x29fdc6=>_0x29fdc6['folder_name']),_0x56698d=_0x3653ad[_0x58d60e(0x1e5)](_0x5519db=>_0x5519db[_0x58d60e(0x1cf)]);console['log'](_0x56698d),await conn[_0x58d60e(0x1db)]()['execute'](_0x58d60e(0x2c2),[_0x229a52]),_0x1353e1[_0x58d60e(0x24a)](_0x549ce2=>{const _0x152215=_0x58d60e;try{const _0xb396de=_0x152215(0x1d6)+_0x549ce2;cleanCacheForUserFiles(_0xb396de),fs['rmdirSync'](_0xb396de);}catch(_0x353a7a){console[_0x152215(0x2b8)]('Error\x20deleting\x20user\x20folder:',_0x353a7a);}}),console[_0x58d60e(0x1f4)]('Old\x20demo_user\x20accounts\x20('+_0x3653ad[_0x58d60e(0x301)]+_0x58d60e(0x2b9)+_0x229a52+_0x58d60e(0x1e4));}catch(_0x3843e9){console[_0x58d60e(0x2b8)](_0x58d60e(0x2a3),_0x3843e9);}};schedule[a27_0x398bba(0x29a)](a27_0x398bba(0x2e5),deleteOldDemoUsers),router[a27_0x398bba(0x306)](a27_0x398bba(0x30c),protectedRoute,async(_0x9ebcbe,_0x22803c)=>{const _0x99234d=a27_0x398bba,_0x1a9a94=fs[_0x99234d(0x355)](path['join'](path[_0x99234d(0x25f)](require['main'][_0x99234d(0x2cb)]),_0x99234d(0x357)),_0x99234d(0x20b)),_0x116fd2=_0x1a9a94['replaceAll'](_0x99234d(0x255),_0x9ebcbe[_0x99234d(0x2d6)]);_0x22803c[_0x99234d(0x259)](_0x116fd2);});const exportUsersList=async()=>{const _0x5c082c=a27_0x398bba;console[_0x5c082c(0x1f4)](_0x5c082c(0x33d));const _0x1951a2=path[_0x5c082c(0x287)](path[_0x5c082c(0x25f)](require[_0x5c082c(0x2df)]['filename']),'exports');!fs['existsSync'](_0x1951a2)&&fs[_0x5c082c(0x219)](_0x1951a2);const _0x2b3021=config[_0x5c082c(0x2b1)]||_0x5c082c(0x348);let _0x3b33a1;const _0x3cde62=path[_0x5c082c(0x287)](_0x1951a2,_0x5c082c(0x264));if(fs[_0x5c082c(0x26a)](_0x3cde62))try{const _0x27fb54=JSON['parse'](fs['readFileSync'](_0x3cde62,_0x5c082c(0x20b)));_0x3b33a1=new Date(_0x27fb54['lastExportDate']);}catch(_0x50ab11){console[_0x5c082c(0x2b8)](_0x5c082c(0x2e1),_0x50ab11),_0x3b33a1=calculateDefaultLastExportDate(_0x2b3021);}else _0x3b33a1=calculateDefaultLastExportDate(_0x2b3021);const _0x58c3ff=new Date(),_0x81ed50=_0x58c3ff[_0x5c082c(0x316)]()+'-'+String(_0x58c3ff[_0x5c082c(0x1e8)]()+0x1)['padStart'](0x2,'0')+'-'+String(_0x58c3ff[_0x5c082c(0x323)]())[_0x5c082c(0x24b)](0x2,'0'),_0x24a445=_0x5c082c(0x275)+_0x81ed50+_0x5c082c(0x321),_0x130ee8=path[_0x5c082c(0x287)](_0x1951a2,_0x24a445);try{const _0x939cdb=_0x5c082c(0x1e2),[_0x5ef3d7]=await conn[_0x5c082c(0x1db)]()[_0x5c082c(0x273)](_0x939cdb,[_0x3b33a1]);if(_0x5ef3d7['length']===0x0){console[_0x5c082c(0x1f4)](_0x5c082c(0x315));return;}let _0x9efbaa=_0x5c082c(0x29b);_0x5ef3d7[_0x5c082c(0x24a)](_0x36dfef=>{const _0x32916e=_0x5c082c,_0x191eb3=_0x36dfef[_0x32916e(0x1cf)]?'\x22'+_0x36dfef[_0x32916e(0x1cf)][_0x32916e(0x30d)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x37207c=_0x36dfef[_0x32916e(0x345)]?'\x22'+_0x36dfef['first_name']['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x3d706e=_0x36dfef[_0x32916e(0x274)]?'\x22'+_0x36dfef['last_name']['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x9efbaa+=_0x191eb3+','+_0x37207c+','+_0x3d706e+'\x0a';}),fs[_0x5c082c(0x258)](_0x130ee8,_0x9efbaa),console[_0x5c082c(0x1f4)]('Exported\x20'+_0x5ef3d7['length']+'\x20users\x20to\x20'+_0x130ee8);const _0x40aacb={'lastExportDate':_0x58c3ff[_0x5c082c(0x2d5)](),'fileName':_0x24a445,'userCount':_0x5ef3d7[_0x5c082c(0x301)]};fs[_0x5c082c(0x258)](_0x3cde62,JSON['stringify'](_0x40aacb,null,0x2));}catch(_0x3bfe62){console[_0x5c082c(0x2b8)](_0x5c082c(0x2d8),_0x3bfe62);}},calculateDefaultLastExportDate=_0x3e7690=>{const _0x3974b8=a27_0x398bba,_0x5e20aa=new Date();return _0x3e7690===_0x3974b8(0x21f)?_0x5e20aa[_0x3974b8(0x309)](_0x5e20aa[_0x3974b8(0x323)]()-0xe):_0x5e20aa[_0x3974b8(0x305)](_0x5e20aa[_0x3974b8(0x1e8)]()-0x1),_0x5e20aa;};router[a27_0x398bba(0x306)](a27_0x398bba(0x2fd),async(_0x4865fc,_0x231275)=>{const _0x4e4a38=a27_0x398bba,_0x27b437=path[_0x4e4a38(0x287)](path[_0x4e4a38(0x25f)](require[_0x4e4a38(0x2df)]['filename']),_0x4e4a38(0x28e));if(!fs[_0x4e4a38(0x26a)](_0x27b437))return _0x231275['status'](0xc8)[_0x4e4a38(0x28f)]({'exports':[]});try{const _0x32645c=fs[_0x4e4a38(0x200)](_0x27b437)['filter'](_0x5bd232=>_0x5bd232['startsWith'](_0x4e4a38(0x275))&&_0x5bd232[_0x4e4a38(0x1fd)](_0x4e4a38(0x321)))[_0x4e4a38(0x1e5)](_0x720138=>{const _0x385913=_0x4e4a38,_0x29d7c9=path['join'](_0x27b437,_0x720138),_0x133da1=fs['statSync'](_0x29d7c9),_0x58b1e1=fs['readFileSync'](_0x29d7c9,_0x385913(0x20b)),_0x4144b4=_0x58b1e1[_0x385913(0x230)]('\x0a')[_0x385913(0x301)]-0x1;return{'fileName':_0x720138,'createdAt':_0x133da1[_0x385913(0x336)],'userCount':_0x4144b4};})[_0x4e4a38(0x20f)]((_0x5a1712,_0x5ed44c)=>_0x5ed44c[_0x4e4a38(0x2b6)]-_0x5a1712[_0x4e4a38(0x2b6)]);_0x231275[_0x4e4a38(0x332)](0xc8)['json']({'exports':_0x32645c});}catch(_0x22fa8a){console[_0x4e4a38(0x2b8)](_0x4e4a38(0x2e3),_0x22fa8a),_0x231275[_0x4e4a38(0x332)](0x1f4)[_0x4e4a38(0x28f)]({'error':_0x4e4a38(0x2c1)});}}),router[a27_0x398bba(0x1c9)](a27_0x398bba(0x342),async(_0x1bf044,_0x100c98)=>{const _0x485fde=a27_0x398bba;try{await exportUsersList(),_0x100c98[_0x485fde(0x332)](0xc8)[_0x485fde(0x28f)]({'message':'Users\x20export\x20triggered\x20successfully'});}catch(_0x535870){console[_0x485fde(0x2b8)](_0x485fde(0x2f3),_0x535870),_0x100c98[_0x485fde(0x332)](0x1f4)[_0x485fde(0x28f)]({'error':'Failed\x20to\x20trigger\x20export'});}}),router[a27_0x398bba(0x306)]('/users-export/download/:fileName',async(_0x244cbb,_0x471d8f)=>{const _0x2236f7=a27_0x398bba,{fileName:_0x316530}=_0x244cbb[_0x2236f7(0x2d0)],_0x65dde6=path[_0x2236f7(0x287)](path[_0x2236f7(0x25f)](require[_0x2236f7(0x2df)][_0x2236f7(0x2cb)]),'exports',_0x316530);if(!fs[_0x2236f7(0x26a)](_0x65dde6))return _0x471d8f[_0x2236f7(0x332)](0x194)['json']({'error':'Export\x20file\x20not\x20found'});_0x471d8f[_0x2236f7(0x253)](_0x65dde6);});const cleanCacheForUserFiles=_0x19f8bc=>{const _0x5495cd=a27_0x398bba;try{if(!fs[_0x5495cd(0x26a)](_0x19f8bc)){console[_0x5495cd(0x1f4)](_0x5495cd(0x2d3)+_0x19f8bc+_0x5495cd(0x239));return;}const _0x261f83=path[_0x5495cd(0x287)](path['dirname'](require[_0x5495cd(0x2df)][_0x5495cd(0x2cb)]),_0x5495cd(0x1d0),_0x5495cd(0x283));if(!fs[_0x5495cd(0x26a)](_0x261f83)){console[_0x5495cd(0x1f4)](_0x5495cd(0x236)+_0x261f83+_0x5495cd(0x239));return;}const _0x20ad5d=JSON[_0x5495cd(0x1ce)](fs[_0x5495cd(0x355)](path['join'](path[_0x5495cd(0x25f)](require['main'][_0x5495cd(0x2cb)]),'cadviewer/settings/converter-files-analysis.json'))),_0x30be48=fs['readdirSync'](_0x19f8bc);_0x30be48[_0x5495cd(0x24a)](_0x15fc8d=>{const _0x247528=_0x5495cd;_0x20ad5d['files'][_0x247528(0x24a)](_0x5c2f91=>{const _0x437086=_0x247528;_0x5c2f91[_0x437086(0x2f4)]===_0x15fc8d&&_0x5c2f91[_0x437086(0x1dd)]['forEach'](_0x3ac192=>{const _0x58da87=_0x437086;try{fs[_0x58da87(0x366)](path[_0x58da87(0x287)](_0x261f83,_0x3ac192['id']));}catch(_0x5350fc){console['error']('Error\x20deleting\x20cache\x20file\x20'+_0x3ac192['id']+':',_0x5350fc);}});});}),analyzeConverterFiles(),console[_0x5495cd(0x1f4)](_0x5495cd(0x203)+_0x19f8bc);}catch(_0x5502a5){console['error'](_0x5495cd(0x207),_0x5502a5);}};schedule[a27_0x398bba(0x29a)](a27_0x398bba(0x300),exportUsersList),schedule[a27_0x398bba(0x29a)]('0\x20*\x20*\x20*\x20*',sendFollowUpEmails),schedule[a27_0x398bba(0x29a)](a27_0x398bba(0x212),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x591419=a27_0x398bba;try{const _0x40d5cb=path[_0x591419(0x287)](path['dirname'](require['main'][_0x591419(0x2cb)]),_0x591419(0x1d0),_0x591419(0x283)),_0x5e4320=path[_0x591419(0x287)](path[_0x591419(0x25f)](require[_0x591419(0x2df)][_0x591419(0x2cb)]),_0x591419(0x245),'settings');if(!fs[_0x591419(0x26a)](_0x40d5cb)){logStream[_0x591419(0x1c8)](_0x591419(0x23f)+_0x40d5cb+_0x591419(0x2c3));return;}if(!fs[_0x591419(0x26a)](_0x5e4320)){logStream['write'](_0x591419(0x23f)+_0x5e4320+'\x20n\x27existe\x20pas.');return;}const _0x3b2705=fs['readdirSync'](_0x40d5cb),_0x4553b7={};_0x3b2705[_0x591419(0x24a)](_0x496c88=>{const _0x5454ee=_0x591419,_0x36cf99=path[_0x5454ee(0x287)](_0x40d5cb,_0x496c88),_0x326ad6=fs[_0x5454ee(0x297)](_0x36cf99),_0x218614=_0x496c88[_0x5454ee(0x230)]('.'),_0x38cb74=_0x218614['slice'](0x0,-0x1)['filter']((_0x53b009,_0xcfeea)=>!([_0x5454ee(0x266),'rl'][_0x5454ee(0x221)](_0x53b009[_0x5454ee(0x328)]())&&_0xcfeea===_0x218614[_0x5454ee(0x301)]-0x2))[_0x5454ee(0x287)]('.');!Object[_0x5454ee(0x278)](_0x4553b7)[_0x5454ee(0x221)](_0x38cb74)?_0x4553b7[_0x38cb74]=[{'file':_0x496c88,'stats':_0x326ad6}]:_0x4553b7[_0x38cb74][_0x5454ee(0x35e)]({'file':_0x496c88,'stats':_0x326ad6});});const _0x28d65f=[];_0x3b2705[_0x591419(0x24a)](_0x5f250c=>{const _0x4d1d26=_0x591419;if(!_0x5f250c[_0x4d1d26(0x1fd)](_0x4d1d26(0x235)))return;let _0x2ab6f6=_0x5f250c;const _0xe32200=path[_0x4d1d26(0x287)](_0x40d5cb,_0x5f250c),_0x2e6f36=fs[_0x4d1d26(0x297)](_0xe32200);let _0x177a1f=_0x2e6f36['size'],_0x34b54f='';const _0x686ce1=fs['readFileSync'](_0xe32200,'utf8'),_0xf28333=JSON[_0x4d1d26(0x1ce)](_0x686ce1),_0x46b3f7=_0xf28333['cachedfiles']?.[_0x4d1d26(0x1e5)](_0x49e3c4=>_0x49e3c4[_0x4d1d26(0x202)])??[];if(_0xf28333[_0x4d1d26(0x2cb)])_0x2ab6f6=_0xf28333[_0x4d1d26(0x2cb)];const _0x1a3f2b=_0x5f250c[_0x4d1d26(0x230)]('.'),_0x3981f5=_0x1a3f2b[_0x4d1d26(0x25b)](0x0,-0x1)[_0x4d1d26(0x32c)]((_0x138e38,_0x11551d)=>!(['dwg','rl'][_0x4d1d26(0x221)](_0x138e38[_0x4d1d26(0x328)]())&&_0x11551d===_0x1a3f2b[_0x4d1d26(0x301)]-0x2))[_0x4d1d26(0x287)]('.'),_0x5b937f=Object[_0x4d1d26(0x278)](_0x4553b7)[_0x4d1d26(0x221)](_0x3981f5)?_0x4553b7[_0x3981f5]:[];for(const _0x19451e of _0x46b3f7){Object[_0x4d1d26(0x278)](_0x4553b7)[_0x4d1d26(0x221)](_0x19451e)&&_0x5b937f[_0x4d1d26(0x35e)](..._0x4553b7[_0x19451e]);}const _0x5d0b2f=_0x5b937f[_0x4d1d26(0x1e5)](({file:_0x1e04f9,stats:_0x489741})=>{const _0x3261fe=_0x4d1d26;return!_0x1e04f9[_0x3261fe(0x1fd)](_0x3261fe(0x235))&&(_0x177a1f+=_0x489741[_0x3261fe(0x2ce)]),{'id':_0x1e04f9,'name':_0x1e04f9['endsWith']('.svg')?_0x3261fe(0x26b):_0x1e04f9[_0x3261fe(0x1fd)](_0x3261fe(0x1da))?_0x3261fe(0x1e9):_0x1e04f9[_0x3261fe(0x1fd)](_0x3261fe(0x356))?_0x3261fe(0x322):_0x1e04f9['endsWith'](_0x3261fe(0x229))?_0x3261fe(0x20d):_0x1e04f9['endsWith'](_0x3261fe(0x321))?_0x3261fe(0x1ca):_0x1e04f9[_0x3261fe(0x1fd)](_0x3261fe(0x272))?_0x3261fe(0x24e):_0x1e04f9['split']('.')[_0x3261fe(0x1e1)]()[_0x3261fe(0x1fb)](),'color':_0x1e04f9[_0x3261fe(0x1fd)](_0x3261fe(0x265))||_0x1e04f9['endsWith']('.svgz')?_0x3261fe(0x28b):_0x1e04f9[_0x3261fe(0x1fd)](_0x3261fe(0x356))?'red':_0x1e04f9['endsWith'](_0x3261fe(0x229))?_0x3261fe(0x211):_0x1e04f9['endsWith']('.csv')?_0x3261fe(0x341):_0x1e04f9[_0x3261fe(0x1fd)](_0x3261fe(0x272))?_0x3261fe(0x260):'purple'};});if(_0x5d0b2f[_0x4d1d26(0x29d)](_0x4bfecf=>_0x4bfecf['id'][_0x4d1d26(0x221)](_0x4d1d26(0x340))))_0x34b54f=_0x4d1d26(0x232);else{if(_0x5d0b2f[_0x4d1d26(0x29d)](_0x4980bb=>[_0x4d1d26(0x1f5),'svgz']['includes'](_0x4980bb['id'][_0x4d1d26(0x230)]('.')[_0x4d1d26(0x1e1)]()))&&_0x5d0b2f[_0x4d1d26(0x29d)](_0xc37762=>[_0x4d1d26(0x312)][_0x4d1d26(0x221)](_0xc37762['id'][_0x4d1d26(0x230)]('.')[_0x4d1d26(0x1e1)]())))_0x34b54f=_0x4d1d26(0x1fa);else{if(_0x5d0b2f['some'](_0xe607db=>[_0x4d1d26(0x1f5),_0x4d1d26(0x367)][_0x4d1d26(0x221)](_0xe607db['id']['split']('.')[_0x4d1d26(0x1e1)]())))_0x34b54f=_0x4d1d26(0x2c0);else{if(_0x5d0b2f[_0x4d1d26(0x29d)](_0x14f66d=>[_0x4d1d26(0x28f)][_0x4d1d26(0x221)](_0x14f66d['id'][_0x4d1d26(0x230)]('.')['pop']()))&&_0x5d0b2f[_0x4d1d26(0x29d)](_0x28ddeb=>[_0x4d1d26(0x266)][_0x4d1d26(0x221)](_0x28ddeb['id'][_0x4d1d26(0x230)]('.')['pop']())))_0x34b54f=_0x4d1d26(0x32f);else{if(_0x5d0b2f[_0x4d1d26(0x29d)](_0x57693e=>[_0x4d1d26(0x2d7)][_0x4d1d26(0x221)](_0x57693e['id'][_0x4d1d26(0x230)]('.')['pop']())))_0x34b54f='DWG\x20to\x20PDF\x20Conversion';else{if(_0x5d0b2f[_0x4d1d26(0x29d)](_0x4bbd62=>['json'][_0x4d1d26(0x221)](_0x4bbd62['id'][_0x4d1d26(0x230)]('.')['pop']()))&&!_0x5d0b2f[_0x4d1d26(0x29d)](_0xc6d579=>[_0x4d1d26(0x266)]['includes'](_0xc6d579['id'][_0x4d1d26(0x230)]('.')[_0x4d1d26(0x1e1)]())))_0x34b54f=_0x4d1d26(0x27e);else _0x5d0b2f['some'](_0x37109c=>[_0x4d1d26(0x28f)][_0x4d1d26(0x221)](_0x37109c['id'][_0x4d1d26(0x230)]('.')[_0x4d1d26(0x1e1)]()))&&(_0x34b54f=_0x4d1d26(0x324));}}}}}_0x28d65f['push']({'name':_0x5f250c,'goodFileName':_0x2ab6f6,'size':_0x177a1f,'createdAt':_0x2e6f36['birthtime'],'updatedAt':_0x2e6f36[_0x4d1d26(0x23e)],'readAt':_0x2e6f36[_0x4d1d26(0x2db)],'action':_0x34b54f,'availableFormats':_0x5d0b2f});}),_0x28d65f['sort']((_0x135712,_0x20ece9)=>_0x20ece9[_0x591419(0x27f)]-_0x135712['updatedAt']);const _0x364b6a={'timestamp':new Date(),'totalFiles':_0x28d65f[_0x591419(0x301)],'files':_0x28d65f},_0x5eb44c=path['join'](_0x5e4320,_0x591419(0x226));fs['writeFileSync'](_0x5eb44c,JSON[_0x591419(0x1f2)](_0x364b6a,null,0x2));}catch(_0x26b7a2){console[_0x591419(0x1f4)](_0x591419(0x296)),console['log'](_0x591419(0x1c2)+_0x26b7a2['message']);}},scheduleFileAnalysis=()=>{const _0x4f4c10=a27_0x398bba;analyzeConverterFiles(),schedule[_0x4f4c10(0x29a)](_0x4f4c10(0x346),analyzeConverterFiles),logStream['write']('Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)');};scheduleFileAnalysis(),router['post'](a27_0x398bba(0x21b),async(_0x242a78,_0x5b6aa1)=>{const _0x5e52a2=a27_0x398bba,{userId:_0x38aa64}=_0x242a78['body'];let _0x1d34d3;try{const [_0x5bfa70]=await conn[_0x5e52a2(0x1db)]()[_0x5e52a2(0x273)](_0x5e52a2(0x1c1),[_0x38aa64]);_0x5bfa70[_0x5e52a2(0x301)]>0x0&&(_0x1d34d3=_0x5bfa70[0x0]);}catch(_0x10014e){console[_0x5e52a2(0x1f4)]({'err':_0x10014e}),_0x5b6aa1[_0x5e52a2(0x332)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x1d34d3){_0x5b6aa1[_0x5e52a2(0x332)](0x191)['json']({'error':_0x5e52a2(0x27b)});return;}if(_0x1d34d3[_0x5e52a2(0x281)]!==_0x5e52a2(0x25d)){_0x5b6aa1['status'](0x190)[_0x5e52a2(0x28f)]({'error':_0x5e52a2(0x2bd)});return;}const _0xef74ea=new Date();try{await conn['promise']()[_0x5e52a2(0x273)](_0x5e52a2(0x244),[_0xef74ea,_0x38aa64]),_0x5b6aa1[_0x5e52a2(0x332)](0xc8)[_0x5e52a2(0x28f)]({'success':!![],'message':_0x5e52a2(0x291)+config[_0x5e52a2(0x277)]+_0x5e52a2(0x1d5)});}catch(_0x5d4968){console[_0x5e52a2(0x1f4)]({'err':_0x5d4968}),_0x5b6aa1[_0x5e52a2(0x332)](0x1f4)['json']({'error':_0x5e52a2(0x280)});return;}}),router[a27_0x398bba(0x306)](a27_0x398bba(0x32e),async(_0x392f63,_0x40bd75)=>{const _0x1d5a79=a27_0x398bba;try{const _0x4d303b=getHotConfig(),_0x44c842={'maxFileSize':(_0x4d303b[_0x1d5a79(0x294)]||0x32)*0x400*0x400,'maxConcurrentUploads':_0x4d303b[_0x1d5a79(0x2ee)]||0x3,'maxFiles':_0x4d303b['maxUploadFiles']||0xa};_0x40bd75['status'](0xc8)[_0x1d5a79(0x28f)](_0x44c842);}catch(_0x17239a){console[_0x1d5a79(0x2b8)]('Error\x20getting\x20upload\x20configuration:',_0x17239a),_0x40bd75[_0x1d5a79(0x332)](0x1f4)[_0x1d5a79(0x28f)]({'message':'Error\x20retrieving\x20upload\x20configuration'});}}),module[a27_0x398bba(0x28e)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
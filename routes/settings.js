function a27_0x3864(){const _0x35ff68=['map','/chart.min.js','mysqlDatabase','1188RroUwh','exports','/restapi-test/parameters/save','linux','CADViewer\x20Settings','linklist_executable','totalGb','Error\x20deleting\x20file','demoUserRetentionDays','Config\x20updated.','mode','/users/flush-dir','windows','/restapi-test','../libs/email-utils','Demo\x20period\x20extended\x20successfully\x20by\x20','folder_name','array','birthtime','/config','converters','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','Error!\x20Something\x20went\x20wrong.','access','toString','monthly','arch','18Lsycto','hostname','length','splity','originalname','copyFileSync','/logs','24697LqXJrC','send','now','Error\x20flushing\x20cache:','cadviewer/settings/doctor.html','.png','endsWith','push','promise','\x20does\x20not\x20exist.','standard','ctime','/users-export/history','../libs/config','Folder\x20not\x20found.','svg','linklist_executable_windows','fontLocation','role','Users\x20export\x20triggered\x20successfully','execute','JSON\x20Data\x20Extraction','maxUploadFiles','statSync','usedPercentage','extname','dwgmerge_executable_windows','cadviewer/settings/conversion-cache.html','cadviewer/settings/icons.js','/logs/clean','status','folderName','readFile','/cache/flush','avatar_url','Error\x20saving\x20parameters.','cadviewer/settings/requests-callapiconversion-monitoring.json','fileLocationUrl','query','callbackMethod','green','mkdir','getFullYear','Error\x20getting\x20memory\x20info','This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users','Failed\x20to\x20flush\x20cache','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','dir','Folder\x20not\x20found','Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)','osCmd','usedGb','4115441SeAJYk','Export\x20file\x20not\x20found','Database\x20Settings','/folders/create','\x20MB','filter','/conversion/list','first_name','formatedSize','Error\x20getting\x20upload\x20configuration:','/vanilla-toast.js','cadviewer/settings/home.html','/metrics/reset','admin','261898IsCVXX','get','File\x20renamed.','createdAt','scheduleJob','isFile','purple','7848YiYuOh','hlall','cpu','size','path','logs','Files\x20uploaded\x20successfully','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','dwgmergeLocation','Router','Error\x20getting\x20disk\x20usage','/style.css','Error\x20triggering\x20Users\x20export:','Error\x20finding\x20log\x20files:','callbackMethod_gatewayUrl','updatedAt','CADViewer_config.json','proc','AutoXchange\x20Settings','platform','autoxchange_executable_windows','version','message','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','dwg','/conversion/clean','boolean','/config/global-update','forEach','some','toISOString','then','PDF','R_OK','User\x20updated\x20successfully','/folders/update','xpathLocation','/folders/upload','0\x20*\x20*\x20*\x20*','used','../libs/counter.js','Error\x20getting\x20total\x20users','dwgmerge_executable','express','totalMemMb','File\x20or\x20Folder\x20not\x20found','Error\x20downloading\x20file.','split','parse','Permission\x20750\x20for\x20the\x20\x22','conversionMemoryUsage','/users/extend-demo','main','/cache/stats','availableFormats','Failed\x20to\x20trigger\x20export','W_OK','Mail\x20Server\x20Settings','put','replace','download','resolve','conversionTimeSpend','usedGB','Error\x20getting\x20os\x20info','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','memorydata.csv','/cache/files','attachment;\x20filename=\x22','gray','./tmp','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','totalProcesses','Exported\x20','\x22\x20executable','constants','linklistLocation','json','sub_dirs','renameSync','\x20GB','ServerUrl','autoxchange_executable','mysqlPassword','biweekly','autodetect_platform','single','./uploads/','maxUploadFileSize','Demo\x20and\x20Base\x20User\x20Settings','delete','Failed\x20to\x20get\x20cache\x20stats','\x20days\x20have\x20been\x20deleted.','globalBearerAutenticationToken','*\x20*\x20*\x20*\x20*','demo_user','usersExportFrequency','who','Content-Type','tmp','ServerLocation','X_OK','darwin','pop','Error\x20getting\x20cpu\x20usage','model','File\x20deleted\x20successfully','type','/folders/download','setHeader','vmstats','licenseLocation','totalGB','autodetect_location','ceil','.pdf','Error\x20getting\x20process\x20info','/logs/content','Folder\x20created.','\x20days','fileLoad_UserName','whoami','../CADViewer_config.json','isFolder','Cache\x20directory\x20','/licences','reset','/converters/autoxchange/linux/','autoxchange_executable_linux','startsWith','.csv','total','CSV','replaceAll','name','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','csv','cadviewer/settings/folders.html','red','radio|','radio|windows,linux','usedMemMb','blue','/icons.js','fileLocation','existsSync','18156uDlmPW','atime','7MaDyWC','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','write','0\x2023\x20*\x20*\x20*','file','getDate','ContentSecurityPolicy','toUpperCase','email','/doctor','/users/list','cadviewer/settings/converter-files-analysis.json','Parameters\x20saved.','cadviewer/settings/vanilla-toast.js','/metrics','Invalid\x20user','cachedfiles','params','/converters/files/merged/','getHotConfig','post','cadviewer/settings/rest-api-parameters.json','Monitoring\x20file\x20cleaned.','mysqlUsername','/users-export/download/:fileName','radio|monthly,biweekly','cadviewer/settings/tailwind.js','stringify','getMonth','SVGZ','utf8','last_name','mimetype','email,firstname,lastname\x0a','File\x20not\x20found','converterpathWin','Cache\x20flushed\x20successfully','settingsPasswordBasicAuth','Config\x20updated\x20successfully','`crypted_password`\x20=\x20?,\x20','cadviewer/settings/users.html','SELECT\x20*\x20FROM\x20users','files','dwgmerge_executable_linux','linklist_executable_linux','cadviewer','../libs/mysql.js','.log\x22','dirname','ContentSecurityPolicyReportOnly','bcrypt','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','Error\x20reading\x20last\x20export\x20info:','filename','folderLocation','includes','clean','/folders/upload-config',')\x20older\x20than\x20','freeGb','Error\x20cleaning\x20cache\x20for\x20user\x20files:','log','usage','Folder\x20already\x20exists.','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','goodFileName','/folders','cvjs_svgz_compress','call-Api_Conversion_','DWG\x20file\x20in\x20multiple\x20files','User\x20directory\x20flushed\x20successfully','converter-files-analysis.json','last-users-export.json','cadviewer/settings/chart.min.js','all','/converters/files/print/','.svgz','writeFileSync','430jaYvJf','body','\x20n\x27existe\x20pas.','number','Le\x20dossier\x20','Folder\x20deleted.','cadviewer/settings/vanilla-toast.css','readdirSync','converterLocation','slice','===================error===================','UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','error','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','gunzipSync','catch','12020iSpdZy','callbackMethod_gatewayUrl_flag','/config/content','.dwg','Error\x20deleting\x20folder.','svgz','DWG\x20to\x20SVG\x20Conversion','968970LmmRmL','setup_mysqlHost','4CkCkjX','drive','\x20\x20\x20','Server\x20Settings','settings','DwgMerge\x20Settings','User\x20deleted\x20successfully','padStart','uptime','sort','pdf','{version}','fileLoad_Password','cadviewer/settings/config.html','win32','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','unlinkSync','.gitkeep','https','keys','mkdirSync','Error\x20deleting\x20file.','toFixed','Log\x20file\x20cleaned.','readFileSync','join','diskStorage','439336gjCRTm','Display\x20of\x20DWG','reduce','node-schedule','test','Read\x20and\x20write\x20permission\x20for\x20folder\x20','user','/config/update','.dwg.json','sendFile','mysqlHost','.log','/converters/files/','isDirectory','maxConcurrentUploads','/cache','.json','avatar','users-export-','zombieProcesses','/cache/csv/:file','info','toLocaleLowerCase','.svg','DWG\x20to\x20PDF\x20Conversion','count'];a27_0x3864=function(){return _0x35ff68;};return a27_0x3864();}const a27_0x5cb7b7=a27_0x4697;(function(_0x555f86,_0x12bb38){const _0x17b580=a27_0x4697,_0x2d0eac=_0x555f86();while(!![]){try{const _0x413633=parseInt(_0x17b580(0x129))/0x1*(-parseInt(_0x17b580(0x122))/0x2)+parseInt(_0x17b580(0x26c))/0x3*(-parseInt(_0x17b580(0x26e))/0x4)+-parseInt(_0x17b580(0x255))/0x5*(parseInt(_0x17b580(0x204))/0x6)+-parseInt(_0x17b580(0x206))/0x7*(-parseInt(_0x17b580(0x289))/0x8)+parseInt(_0x17b580(0x172))/0x9*(-parseInt(_0x17b580(0x265))/0xa)+parseInt(_0x17b580(0x15d))/0xb+-parseInt(_0x17b580(0x107))/0xc*(-parseInt(_0x17b580(0x16b))/0xd);if(_0x413633===_0x12bb38)break;else _0x2d0eac['push'](_0x2d0eac['shift']());}catch(_0x47f23b){_0x2d0eac['push'](_0x2d0eac['shift']());}}}(a27_0x3864,0x8b203));const express=require(a27_0x5cb7b7(0x19d)),router=express[a27_0x5cb7b7(0x17b)](),multer=require('multer'),fs=require('fs'),path=require(a27_0x5cb7b7(0x176)),getHotConfig=require(a27_0x5cb7b7(0x136))[a27_0x5cb7b7(0x21a)],{exec}=require('child_process'),os=require('os'),conn=require(a27_0x5cb7b7(0x235)),bcrypt=require(a27_0x5cb7b7(0x239)),osu=require('node-os-utils'),schedule=require(a27_0x5cb7b7(0x28c)),counter=require(a27_0x5cb7b7(0x19a)),{randomUUID}=require('crypto'),logStream=require('../libs/log'),config=require(a27_0x5cb7b7(0x1ec)),basicAuth=require('express-basic-auth'),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x5cb7b7(0x115)),protectedRoute=basicAuth({'users':{[config['settingsUserBasicAuth']]:config[a27_0x5cb7b7(0x22c)]},'challenge':!![],'realm':a27_0x5cb7b7(0x10b)});router[a27_0x5cb7b7(0x16c)]('/tailwind.js',async(_0x41c0aa,_0x5e886a)=>{const _0x277269=a27_0x5cb7b7;_0x5e886a[_0x277269(0x292)](path[_0x277269(0x287)](path[_0x277269(0x237)](require[_0x277269(0x1a6)][_0x277269(0x23c)]),_0x277269(0x221)));}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x105),async(_0x31ff25,_0x1c48d7)=>{const _0x13184e=a27_0x5cb7b7;_0x1c48d7[_0x13184e(0x292)](path['join'](path['dirname'](require[_0x13184e(0x1a6)][_0x13184e(0x23c)]),_0x13184e(0x250)));}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x17d),async(_0x4daf72,_0x1f809b)=>{const _0xe041d=a27_0x5cb7b7;_0x1f809b[_0xe041d(0x292)](path['join'](path[_0xe041d(0x237)](require[_0xe041d(0x1a6)][_0xe041d(0x23c)]),'cadviewer/settings/style.css'));}),router['get']('/vanilla-toast.css',async(_0x317b27,_0x536e2b)=>{const _0x290eb3=a27_0x5cb7b7;_0x536e2b[_0x290eb3(0x292)](path[_0x290eb3(0x287)](path[_0x290eb3(0x237)](require[_0x290eb3(0x1a6)][_0x290eb3(0x23c)]),_0x290eb3(0x25b)));}),router['get'](a27_0x5cb7b7(0x167),async(_0x2bf652,_0x195154)=>{const _0x1526dd=a27_0x5cb7b7;_0x195154[_0x1526dd(0x292)](path[_0x1526dd(0x287)](path[_0x1526dd(0x237)](require[_0x1526dd(0x1a6)][_0x1526dd(0x23c)]),_0x1526dd(0x214)));}),router['get'](a27_0x5cb7b7(0x201),async(_0xf24a1b,_0x418509)=>{const _0x1fcd80=a27_0x5cb7b7;_0x418509[_0x1fcd80(0x292)](path[_0x1fcd80(0x287)](path['dirname'](require[_0x1fcd80(0x1a6)][_0x1fcd80(0x23c)]),_0x1fcd80(0x145)));}),router[a27_0x5cb7b7(0x16c)]('/',protectedRoute,async(_0x4749ed,_0x3dc8e8)=>{const _0x43c26d=a27_0x5cb7b7,_0x277dd7=fs[_0x43c26d(0x286)](path[_0x43c26d(0x287)](path[_0x43c26d(0x237)](require['main'][_0x43c26d(0x23c)]),_0x43c26d(0x168)),'utf8'),_0xe4452e=_0x277dd7[_0x43c26d(0x1f7)](_0x43c26d(0x279),_0x4749ed[_0x43c26d(0x187)]);_0x3dc8e8[_0x43c26d(0x12a)](_0xe4452e);}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x1ef),protectedRoute,async(_0x199bcf,_0x41e9f5)=>{const _0x25be19=a27_0x5cb7b7,_0x55c9d1=fs[_0x25be19(0x286)](path[_0x25be19(0x287)](path['dirname'](require[_0x25be19(0x1a6)][_0x25be19(0x23c)]),'cadviewer/settings/licences.html'),_0x25be19(0x225)),_0x381be6=_0x55c9d1['replaceAll']('{version}',_0x199bcf[_0x25be19(0x187)]);_0x41e9f5[_0x25be19(0x12a)](_0x381be6);}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x11a),protectedRoute,async(_0xf30a67,_0x57e1d0)=>{const _0x2932bb=a27_0x5cb7b7,_0x312e4e=fs[_0x2932bb(0x286)](path['join'](path[_0x2932bb(0x237)](require['main'][_0x2932bb(0x23c)]),_0x2932bb(0x27b)),'utf8'),_0x4eece2=_0x312e4e[_0x2932bb(0x1f7)](_0x2932bb(0x279),_0xf30a67['version']);_0x57e1d0['send'](_0x4eece2);}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x249),protectedRoute,async(_0x13738c,_0xd634bd)=>{const _0x29da52=a27_0x5cb7b7,_0x2910e0=fs['readFileSync'](path[_0x29da52(0x287)](path['dirname'](require[_0x29da52(0x1a6)][_0x29da52(0x23c)]),_0x29da52(0x1fb)),_0x29da52(0x225)),_0x1d57de=_0x2910e0[_0x29da52(0x1f7)]('{version}',_0x13738c[_0x29da52(0x187)]);_0xd634bd['send'](_0x1d57de);}),router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x249),async(_0xabc460,_0x1f6117)=>{const _0x57f641=a27_0x5cb7b7,_0xc455af=path['join'](path[_0x57f641(0x237)](require['main'][_0x57f641(0x23c)]),_0x57f641(0x182)),_0x4bf341=JSON['parse'](fs[_0x57f641(0x286)](_0xc455af,_0x57f641(0x225))),_0x4e21c=_0x4bf341[_0x57f641(0x23d)];if(!fs[_0x57f641(0x203)](_0x4e21c))return _0x1f6117[_0x57f641(0x147)](0x194)['json']({'message':_0x57f641(0x207)});const _0x53cc7c=_0x550a9=>{let _0x4f70b5=0x0;return _0x550a9['forEach'](_0x293da6=>{const _0x396679=a27_0x4697;_0x293da6[_0x396679(0x1ed)]?_0x4f70b5+=_0x53cc7c(_0x293da6[_0x396679(0x1c0)]):_0x4f70b5+=_0x293da6[_0x396679(0x175)];}),_0x4f70b5;},_0x23d0d8=_0x97a37b=>{const _0x1e360b=_0x57f641;if(_0x97a37b<0x400)return _0x97a37b+'\x20B';else{if(_0x97a37b<0x400*0x400)return(_0x97a37b/0x400)[_0x1e360b(0x284)](0x2)+'\x20KB';else return _0x97a37b<0x400*0x400*0x400?(_0x97a37b/0x400/0x400)[_0x1e360b(0x284)](0x2)+_0x1e360b(0x161):(_0x97a37b/0x400/0x400/0x400)[_0x1e360b(0x284)](0x2)+_0x1e360b(0x1c2);}},_0x222a56=(_0x196a03,_0x43f785='')=>{const _0x125d2a=_0x57f641,_0x1c54ea=fs[_0x125d2a(0x25c)](_0x196a03),_0x482743=[];return _0x1c54ea[_0x125d2a(0x18e)](_0x1f07c4=>{const _0x406f03=_0x125d2a,_0x2e4500=path[_0x406f03(0x287)](_0x196a03,_0x1f07c4)[_0x406f03(0x1f7)]('\x5c','/'),_0x5d706c=fs[_0x406f03(0x140)](_0x2e4500);if(_0x5d706c[_0x406f03(0x296)]()){const _0x3e88e0=_0x222a56(_0x2e4500,_0x43f785+_0x406f03(0x270));_0x482743[_0x406f03(0x130)]({'name':_0x1f07c4,'size':_0x5d706c[_0x406f03(0x175)],'path':_0x2e4500,'permissions':_0x5d706c['mode'],'isFolder':!![],'sub_dirs':_0x3e88e0});}else _0x482743[_0x406f03(0x130)]({'name':_0x1f07c4,'size':_0x5d706c[_0x406f03(0x175)],'path':_0x2e4500,'permissions':_0x5d706c[_0x406f03(0x111)],'isFolder':![]});}),_0x482743;};let _0x332c74=_0x222a56(_0x4e21c);const _0x551597=_0x141a45=>{const _0x4429c9=_0x57f641;return _0x141a45[_0x4429c9(0x18e)](_0x35b9e3=>{const _0x2f0802=_0x4429c9;_0x35b9e3[_0x2f0802(0x1ed)]?(_0x35b9e3[_0x2f0802(0x165)]=_0x23d0d8(_0x53cc7c(_0x35b9e3[_0x2f0802(0x1c0)])),_0x35b9e3[_0x2f0802(0x1c0)]=_0x551597(_0x35b9e3[_0x2f0802(0x1c0)])):_0x35b9e3[_0x2f0802(0x165)]=_0x23d0d8(_0x35b9e3[_0x2f0802(0x175)]);}),_0x141a45;};_0x1f6117[_0x57f641(0x147)](0xc8)[_0x57f641(0x1bf)](_0x551597(_0x332c74));}),router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x1de),async(_0x2560ad,_0x1e8039)=>{const _0x3bc6cc=a27_0x5cb7b7,{path:_0x132961}=_0x2560ad[_0x3bc6cc(0x256)],_0x4dbcb8=_0x132961[_0x3bc6cc(0x1a1)]('/')[_0x3bc6cc(0x1d9)]();if(!fs[_0x3bc6cc(0x203)](_0x132961))return _0x1e8039[_0x3bc6cc(0x147)](0x194)[_0x3bc6cc(0x1bf)]({'message':_0x3bc6cc(0x229)});_0x1e8039[_0x3bc6cc(0x1df)](_0x3bc6cc(0x1d4),'application/octet-stream'),_0x1e8039[_0x3bc6cc(0x1df)]('Content-Disposition',_0x3bc6cc(0x1b6)+_0x4dbcb8+'\x22'),_0x1e8039['download'](_0x132961,_0xea6028=>{const _0x10267d=_0x3bc6cc;_0xea6028&&_0x1e8039[_0x10267d(0x147)](0x1f4)[_0x10267d(0x1bf)]({'message':_0x10267d(0x1a0)});});}),router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x160),async(_0x3f35b9,_0x5f5ba5)=>{const _0x25e9a2=a27_0x5cb7b7,_0x5a655e=_0x3f35b9[_0x25e9a2(0x256)],_0x4dc4f5=getHotConfig()['folderLocation'],_0x4e17e1=path[_0x25e9a2(0x287)](_0x4dc4f5,_0x5a655e[_0x25e9a2(0x176)]);if(!fs['existsSync'](_0x4e17e1))return _0x5f5ba5[_0x25e9a2(0x147)](0x194)[_0x25e9a2(0x1bf)]({'message':_0x25e9a2(0x137)});if(fs['existsSync'](path[_0x25e9a2(0x287)](_0x4e17e1,_0x5a655e[_0x25e9a2(0x148)])))return _0x5f5ba5[_0x25e9a2(0x147)](0x199)[_0x25e9a2(0x1bf)]({'message':_0x25e9a2(0x246)});fs[_0x25e9a2(0x152)](path['join'](_0x4e17e1,_0x5a655e[_0x25e9a2(0x148)]),_0x4be598=>{const _0x1fac92=_0x25e9a2;_0x4be598&&_0x5f5ba5['status'](0x1f4)[_0x1fac92(0x1bf)]({'message':'Error\x20creating\x20folder.'}),_0x5f5ba5[_0x1fac92(0x147)](0xc8)['json']({'message':_0x1fac92(0x1e8)});});}),router[a27_0x5cb7b7(0x1ac)](a27_0x5cb7b7(0x195),async(_0x5e54d6,_0x346977)=>{const _0x2a6c12=a27_0x5cb7b7,{newName:_0x3705d2,isFolder:_0x124ac1,path:_0x3751b5}=_0x5e54d6[_0x2a6c12(0x256)];if(!fs[_0x2a6c12(0x203)](_0x3751b5))return _0x346977['status'](0x194)['json']({'message':_0x124ac1?_0x2a6c12(0x159):_0x2a6c12(0x229)});const _0x40d3db=_0x3751b5[_0x2a6c12(0x1ad)](_0x3751b5[_0x2a6c12(0x1a1)]('/')[_0x2a6c12(0x1d9)](),_0x3705d2),_0x2eccdf=fs[_0x2a6c12(0x140)](_0x3751b5);_0x2eccdf[_0x2a6c12(0x296)]()?fs[_0x2a6c12(0x1c1)](_0x3751b5,_0x40d3db):(fs['copyFileSync'](_0x3751b5,_0x40d3db),fs['unlinkSync'](_0x3751b5)),_0x346977[_0x2a6c12(0x147)](0xc8)['json']({'message':_0x124ac1?'Folder\x20renamed.':_0x2a6c12(0x16d)});}),router[a27_0x5cb7b7(0x1cc)]('/folders/delete',async(_0x514146,_0x5bf0bc)=>{const _0x2977cd=a27_0x5cb7b7,{path:_0x10ec02}=_0x514146[_0x2977cd(0x256)];if(!fs[_0x2977cd(0x203)](_0x10ec02))return _0x5bf0bc[_0x2977cd(0x147)](0x194)[_0x2977cd(0x1bf)]({'message':_0x2977cd(0x19f)});const _0x1d0d52=fs[_0x2977cd(0x140)](_0x10ec02);if(_0x1d0d52[_0x2977cd(0x170)]())fs['unlink'](_0x10ec02,_0xb5fe52=>{const _0x261eda=_0x2977cd;_0xb5fe52&&_0x5bf0bc[_0x261eda(0x147)](0x1f4)[_0x261eda(0x1bf)]({'message':_0x261eda(0x283)}),_0x5bf0bc[_0x261eda(0x147)](0xc8)[_0x261eda(0x1bf)]({'message':'File\x20deleted.'});});else _0x1d0d52['isDirectory']()&&fs['rmdir'](_0x10ec02,{'recursive':!![]},_0x325103=>{const _0x2d1fb4=_0x2977cd;_0x325103&&_0x5bf0bc[_0x2d1fb4(0x147)](0x1f4)[_0x2d1fb4(0x1bf)]({'message':_0x2d1fb4(0x269)}),_0x5bf0bc[_0x2d1fb4(0x147)](0xc8)[_0x2d1fb4(0x1bf)]({'message':_0x2d1fb4(0x25a)});});});!fs[a27_0x5cb7b7(0x203)](a27_0x5cb7b7(0x1b8))&&fs[a27_0x5cb7b7(0x282)](a27_0x5cb7b7(0x1b8));const storage=multer[a27_0x5cb7b7(0x288)]({'destination':(_0x32e172,_0x207ac4,_0x186d89)=>{_0x186d89(null,'tmp');},'filename':(_0x20d1f2,_0x2ea4c0,_0x2a7a52)=>{const _0x4cc5e7=a27_0x5cb7b7;_0x2a7a52(null,Date[_0x4cc5e7(0x12b)]()+path[_0x4cc5e7(0x142)](_0x2ea4c0[_0x4cc5e7(0x126)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()[a27_0x5cb7b7(0x1ca)]?getHotConfig()['maxUploadFileSize']*0x400*0x400:0x32*0x400*0x400}});router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x197),upload[a27_0x5cb7b7(0x118)](a27_0x5cb7b7(0x231)),async(_0x11b3a8,_0x283787)=>{const _0x191fd3=a27_0x5cb7b7,_0x4b5106=_0x11b3a8[_0x191fd3(0x256)];if(!_0x11b3a8[_0x191fd3(0x231)]||_0x11b3a8[_0x191fd3(0x231)][_0x191fd3(0x124)]===0x0)return _0x283787[_0x191fd3(0x147)](0x190)[_0x191fd3(0x1bf)]({'message':'No\x20files\x20uploaded'});const _0xf22563=getHotConfig()[_0x191fd3(0x23d)],_0x35fd83=path['join'](_0xf22563,_0x4b5106['path']);if(!fs[_0x191fd3(0x203)](_0x35fd83))return _0x283787[_0x191fd3(0x147)](0x194)[_0x191fd3(0x1bf)]({'message':_0x191fd3(0x137)});const _0x255972=_0x11b3a8['files'][_0x191fd3(0x104)](_0x185165=>({'originalname':_0x185165['originalname'],'filename':_0x185165[_0x191fd3(0x23c)],'mimetype':_0x185165[_0x191fd3(0x227)],'size':_0x185165[_0x191fd3(0x175)]}));_0x255972[_0x191fd3(0x18e)](_0x4bf735=>{const _0x315671=_0x191fd3;fs[_0x315671(0x127)](path[_0x315671(0x287)](_0x315671(0x1d5),_0x4bf735[_0x315671(0x23c)]),path[_0x315671(0x287)](_0x35fd83,_0x4bf735[_0x315671(0x126)])),fs['unlinkSync'](path[_0x315671(0x287)](_0x315671(0x1d5),_0x4bf735['filename']));}),_0x283787[_0x191fd3(0x147)](0xc8)[_0x191fd3(0x1bf)]({'message':_0x191fd3(0x178),'files':_0x255972});}),router[a27_0x5cb7b7(0x1ac)](a27_0x5cb7b7(0x18d),async(_0x41bd70,_0x5691ac)=>{const _0x52b524=a27_0x5cb7b7,_0x135d1f=path[_0x52b524(0x287)](path[_0x52b524(0x237)](require[_0x52b524(0x1a6)][_0x52b524(0x23c)]),_0x52b524(0x182)),{config:_0x59f3ac}=_0x41bd70['body'];if(!_0x59f3ac)return _0x5691ac[_0x52b524(0x147)](0x190)['json']({'message':'No\x20config\x20object\x20provided'});try{fs['writeFileSync'](_0x135d1f,JSON[_0x52b524(0x222)](_0x59f3ac,null,0x4)),_0x5691ac[_0x52b524(0x147)](0xc8)['json']({'message':_0x52b524(0x22d)});}catch(_0x1fb4cc){_0x5691ac[_0x52b524(0x147)](0x1f4)['json']({'message':'Error\x20updating\x20config'});}}),router[a27_0x5cb7b7(0x1ac)](a27_0x5cb7b7(0x290),async(_0x101f66,_0x59f2ea)=>{const _0x349b9d=a27_0x5cb7b7,{key:_0x502921,value:_0x1115b3}=_0x101f66['body'],_0x4059de=path['join'](path[_0x349b9d(0x237)](require[_0x349b9d(0x1a6)][_0x349b9d(0x23c)]),'CADViewer_config.json');fs[_0x349b9d(0x149)](_0x4059de,_0x349b9d(0x225),function(_0x55a70c,_0x474103){const _0x499814=_0x349b9d;_0x55a70c&&_0x59f2ea['status'](0x1f4)[_0x499814(0x12a)](_0x55a70c);const _0x5d3099=JSON[_0x499814(0x1a2)](_0x474103);_0x5d3099[_0x502921]=_0x1115b3;if(_0x502921==='autodetect_location'){let _0x8cbbe8='';if(_0x5d3099['autodetect_platform']){_0x8cbbe8=os[_0x499814(0x185)]();if(_0x8cbbe8==='win32')_0x8cbbe8='windows';else{if(_0x8cbbe8===_0x499814(0x1d8))_0x8cbbe8='linux';}}else _0x8cbbe8=_0x5d3099[_0x499814(0x185)];if(_0x8cbbe8==='windows'){_0x5d3099[_0x499814(0x1d6)]=path[_0x499814(0x1af)](__dirname,'..')+'/';const _0x311eac=/\\/g;_0x5d3099[_0x499814(0x1d6)]=_0x5d3099[_0x499814(0x1d6)][_0x499814(0x1ad)](_0x311eac,'/');}else _0x5d3099[_0x499814(0x1d6)]=path[_0x499814(0x1af)](__dirname,'..')+'/';}if(_0x502921===_0x499814(0x1c7)){let _0x3c7cf4=os[_0x499814(0x185)]();if(_0x3c7cf4===_0x499814(0x27c))_0x3c7cf4=_0x499814(0x113);else _0x3c7cf4=_0x499814(0x10a);_0x3c7cf4===_0x499814(0x113)?_0x1115b3===!![]&&(_0x5d3099['autoxchange_executable']=_0x5d3099[_0x499814(0x186)],_0x5d3099[_0x499814(0x19c)]=_0x5d3099[_0x499814(0x143)],_0x5d3099[_0x499814(0x10c)]=_0x5d3099[_0x499814(0x139)]):_0x1115b3===!![]&&(_0x5d3099[_0x499814(0x1c4)]=_0x5d3099[_0x499814(0x1f2)],_0x5d3099[_0x499814(0x19c)]=_0x5d3099['dwgmerge_executable_linux'],_0x5d3099[_0x499814(0x10c)]=_0x5d3099[_0x499814(0x233)]),_0x5d3099[_0x499814(0x185)]=_0x3c7cf4;}if(_0x5d3099[_0x499814(0x1c7)]){let _0x5cb8e1=os[_0x499814(0x185)]();if(_0x5cb8e1===_0x499814(0x27c))_0x5cb8e1='windows';else _0x5cb8e1=_0x499814(0x10a);if(_0x5cb8e1===_0x499814(0x113)){if(_0x502921===_0x499814(0x186))_0x5d3099[_0x499814(0x1c4)]=_0x1115b3;else{if(_0x502921===_0x499814(0x143))_0x5d3099[_0x499814(0x19c)]=_0x1115b3;else _0x502921===_0x499814(0x139)&&(_0x5d3099['linklist_executable']=_0x1115b3);}}else{if(_0x502921===_0x499814(0x1f2))_0x5d3099[_0x499814(0x1c4)]=_0x1115b3;else{if(_0x502921===_0x499814(0x232))_0x5d3099[_0x499814(0x19c)]=_0x1115b3;else _0x502921===_0x499814(0x233)&&(_0x5d3099[_0x499814(0x10c)]=_0x1115b3);}}}fs['writeFile'](_0x4059de,JSON[_0x499814(0x222)](_0x5d3099,null,0x4),function(_0x3fdb4d){const _0x7befc1=_0x499814;_0x3fdb4d&&_0x59f2ea[_0x7befc1(0x147)](0x1f4)[_0x7befc1(0x12a)](_0x3fdb4d),_0x59f2ea[_0x7befc1(0x147)](0xc8)['json']({'message':_0x7befc1(0x110)});});});}),router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x267),async(_0x47e587,_0x5706d6)=>{const _0x4b9bbb=a27_0x5cb7b7,_0x6d51c4=getHotConfig(),_0x47714b=(_0x6d51c4[_0x4b9bbb(0x17a)][_0x4b9bbb(0x23e)](_0x6d51c4[_0x4b9bbb(0x1d6)])?'':_0x6d51c4[_0x4b9bbb(0x1d6)])+_0x6d51c4[_0x4b9bbb(0x17a)],_0x4e400f=(_0x6d51c4[_0x4b9bbb(0x17a)]['includes'](_0x6d51c4[_0x4b9bbb(0x1d6)])?'':_0x6d51c4['ServerLocation'])+_0x6d51c4[_0x4b9bbb(0x1be)],_0xae3490=(_0x6d51c4[_0x4b9bbb(0x25d)][_0x4b9bbb(0x23e)](_0x6d51c4[_0x4b9bbb(0x1d6)])?'':_0x6d51c4[_0x4b9bbb(0x1d6)])+_0x6d51c4['converterLocation'],_0x54e3c3=/ax202.*\.exe/,_0x39ff3f=/ax202.*/,_0x407206=/dwgmerge202.*\.exe/,_0x427c1d=/dwgmerge_202.*/,_0x1d3133=/linklist_202.*\.exe/,_0x158e3f=/linklist_202.*/,_0x192c92=[],_0x27e8f7=[],_0x1b271c=[],_0x4f84b6=[],_0x13282c=[],_0x50272d=[];let _0x1cae17='';if(_0x6d51c4['autodetect_platform']){_0x1cae17=os['platform']();if(_0x1cae17==='win32')_0x1cae17=_0x4b9bbb(0x113);else{if(_0x1cae17===_0x4b9bbb(0x1d8))_0x1cae17=_0x4b9bbb(0x10a);}}else _0x1cae17=_0x6d51c4[_0x4b9bbb(0x185)];fs[_0x4b9bbb(0x25c)](_0xae3490[_0x4b9bbb(0x1f7)](_0x4b9bbb(0x10a),_0x4b9bbb(0x113)))[_0x4b9bbb(0x18e)](_0x26fd19=>{const _0x1dd2f4=_0x4b9bbb;if(_0x54e3c3[_0x1dd2f4(0x28d)](_0x26fd19[_0x1dd2f4(0x29f)]()))_0x192c92[_0x1dd2f4(0x130)](_0x26fd19);}),fs[_0x4b9bbb(0x25c)](_0x47714b[_0x4b9bbb(0x1f7)]('linux',_0x4b9bbb(0x113)))[_0x4b9bbb(0x18e)](_0x1f1ac8=>{const _0x150d0a=_0x4b9bbb;if(_0x407206[_0x150d0a(0x28d)](_0x1f1ac8[_0x150d0a(0x29f)]()))_0x27e8f7[_0x150d0a(0x130)](_0x1f1ac8);}),fs['readdirSync'](_0x4e400f[_0x4b9bbb(0x1f7)]('linux',_0x4b9bbb(0x113)))[_0x4b9bbb(0x18e)](_0x3e023a=>{const _0x29e807=_0x4b9bbb;if(_0x1d3133['test'](_0x3e023a['toLocaleLowerCase']()))_0x1b271c[_0x29e807(0x130)](_0x3e023a);}),fs[_0x4b9bbb(0x25c)](_0xae3490[_0x4b9bbb(0x1f7)]('windows',_0x4b9bbb(0x10a)))['forEach'](_0x18da7f=>{const _0xe867c7=_0x4b9bbb;if(_0x39ff3f[_0xe867c7(0x28d)](_0x18da7f[_0xe867c7(0x29f)]()))_0x4f84b6[_0xe867c7(0x130)](_0x18da7f);}),fs[_0x4b9bbb(0x25c)](_0x47714b[_0x4b9bbb(0x1f7)](_0x4b9bbb(0x113),_0x4b9bbb(0x10a)))['forEach'](_0x1edf1a=>{const _0x592046=_0x4b9bbb;if(_0x427c1d['test'](_0x1edf1a[_0x592046(0x29f)]()))_0x13282c[_0x592046(0x130)](_0x1edf1a);}),fs[_0x4b9bbb(0x25c)](_0x4e400f[_0x4b9bbb(0x1f7)](_0x4b9bbb(0x113),_0x4b9bbb(0x10a)))[_0x4b9bbb(0x18e)](_0x416420=>{const _0x4aab8c=_0x4b9bbb;if(_0x158e3f[_0x4aab8c(0x28d)](_0x416420[_0x4aab8c(0x29f)]()))_0x50272d[_0x4aab8c(0x130)](_0x416420);});const _0x1df7f5=['ServerPort',_0x4b9bbb(0x280),_0x4b9bbb(0x22a),'converterpathLin',_0x4b9bbb(0x13a)],_0x582cdb=[_0x4b9bbb(0x202),_0x4b9bbb(0x14e),_0x4b9bbb(0x25d),_0x4b9bbb(0x1e1),_0x4b9bbb(0x196),'temp_print_folder',_0x4b9bbb(0x150),_0x4b9bbb(0x17a),_0x4b9bbb(0x1be),'version'],_0x3dc330=[_0x4b9bbb(0x1c3),_0x4b9bbb(0x293),'mysqlUsername',_0x4b9bbb(0x1c5),_0x4b9bbb(0x106),'cached_conversion',_0x4b9bbb(0x24a)],_0xd37b3e={'ServerUrl':_0x4b9bbb(0x271),'autoxchange_executable':_0x4b9bbb(0x184),'linklist_executable':'LinkList\x20Settings','dwgmerge_executable':_0x4b9bbb(0x273),'setup_mysqlHost':_0x4b9bbb(0x15f),'callbackMethod_gatewayUrl_flag':'Callback\x20and\x20Authentication\x20Settings','userFolderMaximumFiles':_0x4b9bbb(0x1cb),'smtpHost':_0x4b9bbb(0x1ab)},_0x217959={'https':'boolean','ServerFrontEndUrlAsAllowedOriginOnly':_0x4b9bbb(0x18c),'autodetect_platform':_0x4b9bbb(0x18c),'cvjs_svgz_compress':_0x4b9bbb(0x18c),'cached_conversion':'boolean','remainOnServer':_0x4b9bbb(0x18c),'cvjs_debug':_0x4b9bbb(0x18c),'autodetect_location':_0x4b9bbb(0x18c),'platform':_0x4b9bbb(0x1fe),'autoxchange_executable':_0x4b9bbb(0x1fd)+(_0x1cae17==='windows'?_0x192c92[_0x4b9bbb(0x287)](','):_0x4f84b6[_0x4b9bbb(0x287)](',')),'autoxchange_executable_windows':'radio|'+_0x192c92['join'](','),'autoxchange_executable_linux':'radio|'+_0x4f84b6['join'](','),'dwgmerge_executable':'radio|'+(_0x1cae17===_0x4b9bbb(0x113)?_0x27e8f7[_0x4b9bbb(0x287)](','):_0x13282c[_0x4b9bbb(0x287)](',')),'dwgmerge_executable_windows':'radio|'+_0x27e8f7[_0x4b9bbb(0x287)](','),'dwgmerge_executable_linux':_0x4b9bbb(0x1fd)+_0x13282c[_0x4b9bbb(0x287)](','),'linklist_executable':'radio|'+(_0x1cae17===_0x4b9bbb(0x113)?_0x1b271c[_0x4b9bbb(0x287)](','):_0x50272d[_0x4b9bbb(0x287)](',')),'linklist_executable_windows':_0x4b9bbb(0x1fd)+_0x1b271c[_0x4b9bbb(0x287)](','),'linklist_executable_linux':'radio|'+_0x50272d[_0x4b9bbb(0x287)](','),'callbackMethod_gatewayUrl_flag':_0x4b9bbb(0x18c),'setup_mysqlHost':_0x4b9bbb(0x18c),'ContentSecurityPolicyReportOnly':_0x4b9bbb(0x18c),'fileLoad_PasswordAuthentication':_0x4b9bbb(0x18c),'contentLocationCheck':_0x4b9bbb(0x18c),'globalBearerAutentication':_0x4b9bbb(0x18c),'bcryptSaltRounds':_0x4b9bbb(0x258),'userFolderMaximumFiles':_0x4b9bbb(0x258),'userFolderMaximumSizeInMB':_0x4b9bbb(0x258),'recaptchaEnabled':_0x4b9bbb(0x18c),'usersExportFrequency':_0x4b9bbb(0x220),'enableEmailVerification':_0x4b9bbb(0x18c),'demoUserRetentionDaysAlertBeforeDeletion':_0x4b9bbb(0x258),'demoUserRetentionDays':_0x4b9bbb(0x258)},_0x3ee9e1={},_0x3803e6=Object[_0x4b9bbb(0x281)](_0x6d51c4);_0x6d51c4[_0x4b9bbb(0x1c7)]&&_0x1df7f5[_0x4b9bbb(0x130)](_0x4b9bbb(0x185)),_0x6d51c4[_0x4b9bbb(0x1e3)]&&(_0x582cdb[_0x4b9bbb(0x130)](_0x4b9bbb(0x1d6)),_0x582cdb['push'](_0x4b9bbb(0x1c4)),_0x582cdb[_0x4b9bbb(0x130)]('dwgmerge_executable'),_0x582cdb[_0x4b9bbb(0x130)]('linklist_executable')),!_0x6d51c4[_0x4b9bbb(0x266)]&&_0x582cdb['push']('callbackMethod_gatewayUrl'),!_0x6d51c4[_0x4b9bbb(0x26d)]&&(_0x582cdb[_0x4b9bbb(0x130)](_0x4b9bbb(0x293)),_0x582cdb[_0x4b9bbb(0x130)](_0x4b9bbb(0x21e)),_0x582cdb['push'](_0x4b9bbb(0x1c5)),_0x582cdb[_0x4b9bbb(0x130)](_0x4b9bbb(0x106))),!_0x6d51c4[_0x4b9bbb(0x238)]&&_0x582cdb['push'](_0x4b9bbb(0x20d)),!_0x6d51c4['fileLoad_PasswordAuthentication']&&(_0x582cdb['push'](_0x4b9bbb(0x1ea)),_0x582cdb[_0x4b9bbb(0x130)](_0x4b9bbb(0x27a))),!_0x6d51c4['globalBearerAutentication']&&_0x582cdb[_0x4b9bbb(0x130)](_0x4b9bbb(0x1cf)),_0x3803e6[_0x4b9bbb(0x18e)](_0x237d71=>{const _0x41c75d=_0x4b9bbb;!_0x1df7f5[_0x41c75d(0x23e)](_0x237d71)&&(_0x3ee9e1[_0x237d71]=_0x6d51c4[_0x237d71]);}),_0x3ee9e1[_0x4b9bbb(0x14e)]=''+_0x6d51c4['ServerUrl']+_0x6d51c4[_0x4b9bbb(0x202)],_0x5706d6['status'](0xc8)[_0x4b9bbb(0x1bf)]({'notEditableFields':_0x582cdb,'customFieldTypes':_0x217959,'notHotEditableFields':_0x3dc330,'config':_0x3ee9e1,'fieldsTitle':_0xd37b3e,'configData':_0x6d51c4});}),router['get'](a27_0x5cb7b7(0x128),protectedRoute,async(_0xfde3b2,_0x467351)=>{const _0x53aa3d=a27_0x5cb7b7,_0x373c41=fs[_0x53aa3d(0x286)](path['join'](path[_0x53aa3d(0x237)](require[_0x53aa3d(0x1a6)][_0x53aa3d(0x23c)]),'cadviewer/settings/logs.html'),_0x53aa3d(0x225)),_0x37d0f7=_0x373c41['replaceAll'](_0x53aa3d(0x279),_0xfde3b2[_0x53aa3d(0x187)]);_0x467351[_0x53aa3d(0x12a)](_0x37d0f7);});function findMatchingLogFiles(_0x407b42,_0x54eaec=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x5cbac7=a27_0x5cb7b7;try{const _0x4a26e3=fs[_0x5cbac7(0x25c)](_0x407b42);return _0x4a26e3['filter'](_0x25d5db=>_0x54eaec[_0x5cbac7(0x28d)](_0x25d5db))[_0x5cbac7(0x104)](_0x47d6c3=>_0x47d6c3[_0x5cbac7(0x1f7)](_0x5cbac7(0x24b),'')[_0x5cbac7(0x1f7)](_0x5cbac7(0x294),''));}catch(_0x196b7c){return console[_0x5cbac7(0x261)](_0x5cbac7(0x17f),_0x196b7c),[];}}router['post'](a27_0x5cb7b7(0x1e7),async(_0x2e6d72,_0x532b6d)=>{const _0x54ce7f=a27_0x5cb7b7,_0x3c912e=new Date(),_0x37bae1=_0x3c912e['getDate']()[_0x54ce7f(0x11f)]()[_0x54ce7f(0x275)](0x2,'0')+'_'+(_0x3c912e[_0x54ce7f(0x223)]()+0x1)['toString']()['padStart'](0x2,'0')+'_'+_0x3c912e[_0x54ce7f(0x153)](),{displayDay:_0x645d7e}=_0x2e6d72[_0x54ce7f(0x256)],_0x29f34d=path[_0x54ce7f(0x287)](path['dirname'](require[_0x54ce7f(0x1a6)][_0x54ce7f(0x23c)]),_0x54ce7f(0x177),_0x54ce7f(0x24b)+(_0x645d7e??_0x37bae1)+'.log');fs[_0x54ce7f(0x203)](_0x29f34d)?fs['readFile'](_0x29f34d,_0x54ce7f(0x225),function(_0x4457ee,_0x265cb0){const _0xc43649=_0x54ce7f;_0x4457ee&&_0x532b6d[_0xc43649(0x147)](0x1f4)[_0xc43649(0x12a)](_0x4457ee),_0x532b6d[_0xc43649(0x147)](0xc8)[_0xc43649(0x1bf)]({'content':_0x265cb0,'days':findMatchingLogFiles(path['join'](path['dirname'](require[_0xc43649(0x1a6)][_0xc43649(0x23c)]),_0xc43649(0x177)))});}):_0x532b6d[_0x54ce7f(0x147)](0xc8)[_0x54ce7f(0x1bf)]({'content':'','days':findMatchingLogFiles(path[_0x54ce7f(0x287)](path[_0x54ce7f(0x237)](require[_0x54ce7f(0x1a6)][_0x54ce7f(0x23c)]),_0x54ce7f(0x177)))});}),router[a27_0x5cb7b7(0x1cc)](a27_0x5cb7b7(0x146),async(_0x1826dd,_0x2b860c)=>{const _0x57ee78=a27_0x5cb7b7,_0x5e9438=new Date(),_0x522511=_0x5e9438[_0x57ee78(0x20c)]()[_0x57ee78(0x11f)]()[_0x57ee78(0x275)](0x2,'0')+'_'+(_0x5e9438[_0x57ee78(0x223)]()+0x1)[_0x57ee78(0x11f)]()[_0x57ee78(0x275)](0x2,'0')+'_'+_0x5e9438[_0x57ee78(0x153)](),_0x239c4e=findMatchingLogFiles(path[_0x57ee78(0x287)](path[_0x57ee78(0x237)](require['main'][_0x57ee78(0x23c)]),_0x57ee78(0x177)));_0x239c4e[_0x57ee78(0x18e)](_0x161e1b=>{const _0x3e589b=_0x57ee78;if(_0x161e1b!==_0x522511)fs[_0x3e589b(0x27e)](path['join'](path[_0x3e589b(0x237)](require[_0x3e589b(0x1a6)][_0x3e589b(0x23c)]),_0x3e589b(0x177),_0x3e589b(0x24b)+_0x161e1b+_0x3e589b(0x294)));}),logStream[_0x57ee78(0x23f)](),_0x2b860c[_0x57ee78(0x147)](0xc8)['json']({'message':_0x57ee78(0x285)});}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x114),protectedRoute,async(_0x57b90b,_0x4f609e)=>{const _0x3fd5e4=a27_0x5cb7b7,_0xf75837=path[_0x3fd5e4(0x287)](path[_0x3fd5e4(0x237)](require[_0x3fd5e4(0x1a6)][_0x3fd5e4(0x23c)]),'cadviewer/settings/rest-api-parameters.json');if(!fs['existsSync'](_0xf75837)){const _0x3ac540={'jsonDataExtraction':{'standard':[{'paramName':_0x3fd5e4(0x1bf),'paramValue':''},{'paramName':'blocks','paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':_0x3fd5e4(0x1db),'paramValue':''},{'paramName':_0x3fd5e4(0x173),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x3fd5e4(0x278)},{'paramName':_0x3fd5e4(0x1db),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':_0x3fd5e4(0x1db),'paramValue':''},{'paramName':_0x3fd5e4(0x173),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x3fd5e4(0x125),'paramValue':''}]}};fs[_0x3fd5e4(0x254)](_0xf75837,JSON['stringify'](_0x3ac540,null,0x4));}const _0xb2c648=fs[_0x3fd5e4(0x286)](path[_0x3fd5e4(0x287)](path[_0x3fd5e4(0x237)](require[_0x3fd5e4(0x1a6)]['filename']),'cadviewer/settings/rest-api.html'),'utf8'),_0x3560c8=_0xb2c648['replaceAll'](_0x3fd5e4(0x279),_0x57b90b[_0x3fd5e4(0x187)]);_0x4f609e[_0x3fd5e4(0x12a)](_0x3560c8);}),router['post']('/restapi-test/parameters/search',async(_0x521297,_0x40c888)=>{const _0x35145e=a27_0x5cb7b7,{actionName:_0x1bbe1e,contentLocation:_0x258a63}=_0x521297[_0x35145e(0x256)],_0x1451e3=path[_0x35145e(0x287)](path['dirname'](require[_0x35145e(0x1a6)][_0x35145e(0x23c)]),_0x35145e(0x21c));fs['readFile'](_0x1451e3,'utf8',function(_0x49a725,_0x14441c){const _0x5405c5=_0x35145e;if(_0x49a725)_0x40c888['status'](0xc8)[_0x5405c5(0x1bf)]({'parameters':[]});else{const _0x4c7c52=JSON[_0x5405c5(0x1a2)](_0x14441c);if(_0x4c7c52[_0x1bbe1e]&&_0x4c7c52[_0x1bbe1e][_0x258a63])_0x40c888['status'](0xc8)[_0x5405c5(0x1bf)]({'parameters':_0x4c7c52[_0x1bbe1e][_0x258a63]});else _0x4c7c52[_0x1bbe1e]&&_0x4c7c52[_0x1bbe1e][_0x5405c5(0x133)]?_0x40c888[_0x5405c5(0x147)](0xc8)[_0x5405c5(0x1bf)]({'parameters':_0x4c7c52[_0x1bbe1e]['standard']}):_0x40c888['status'](0xc8)[_0x5405c5(0x1bf)]({'parameters':[]});}});}),router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x109),async(_0x220c67,_0x83dfbd)=>{const _0x2d4776=a27_0x5cb7b7,{actionName:_0x4eae92,contentLocation:_0x38bfdf,parameters:_0x57de51}=_0x220c67[_0x2d4776(0x256)],_0x3fb753=path[_0x2d4776(0x287)](path[_0x2d4776(0x237)](require[_0x2d4776(0x1a6)][_0x2d4776(0x23c)]),'cadviewer/settings/rest-api-parameters.json');fs['readFile'](_0x3fb753,_0x2d4776(0x225),function(_0x2dc049,_0x411d79){const _0x1929a4=_0x2d4776;if(_0x2dc049)_0x83dfbd[_0x1929a4(0x147)](0x199)[_0x1929a4(0x1bf)]({'message':_0x1929a4(0x14c)});else{const _0x1b63ea=JSON[_0x1929a4(0x1a2)](_0x411d79);!_0x1b63ea[_0x4eae92]&&(_0x1b63ea[_0x4eae92]={}),_0x1b63ea[_0x4eae92][_0x38bfdf]=_0x57de51,fs['writeFile'](_0x3fb753,JSON[_0x1929a4(0x222)](_0x1b63ea,null,0x4),function(_0x211a2a){const _0x2db52e=_0x1929a4;_0x211a2a&&_0x83dfbd[_0x2db52e(0x147)](0x199)[_0x2db52e(0x1bf)]({'message':_0x2db52e(0x14c)}),_0x83dfbd['status'](0xc8)[_0x2db52e(0x1bf)]({'message':_0x2db52e(0x213)});});}});}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x210),protectedRoute,async(_0x3ac13c,_0x47ae4a)=>{const _0x5d66b9=a27_0x5cb7b7,_0x1be8e2=fs['readFileSync'](path[_0x5d66b9(0x287)](path[_0x5d66b9(0x237)](require[_0x5d66b9(0x1a6)][_0x5d66b9(0x23c)]),_0x5d66b9(0x12d)),_0x5d66b9(0x225)),_0x121467=_0x1be8e2[_0x5d66b9(0x1f7)](_0x5d66b9(0x279),_0x3ac13c[_0x5d66b9(0x187)]);_0x47ae4a['send'](_0x121467);}),router['post']('/doctor/check',async(_0x6eb562,_0xc486c6)=>{const _0x1b1357=a27_0x5cb7b7,_0x150d18=getHotConfig(),_0x4b19ef=_0x150d18['converterLocation'][_0x1b1357(0x1f7)]('//','/'),_0x2c4895=_0x150d18[_0x1b1357(0x17a)]['replaceAll']('//','/'),_0x56859d=_0x150d18[_0x1b1357(0x1be)][_0x1b1357(0x1f7)]('//','/'),_0x1e66fd=''+_0x4b19ef+_0x150d18[_0x1b1357(0x1c4)],_0x3d6658=''+_0x2c4895+_0x150d18['dwgmerge_executable'],_0x51c081=''+_0x56859d+_0x150d18[_0x1b1357(0x10c)],_0x453057=[],_0x12afc9=new Promise(_0x39b0b0=>{const _0x5bf5ac=_0x1b1357;exec(os[_0x5bf5ac(0x185)]()===_0x5bf5ac(0x27c)?_0x5bf5ac(0x158):'ls',_0x51820c=>{const _0x1a82a2=_0x5bf5ac;_0x51820c?_0x453057[_0x1a82a2(0x130)]({'title':_0x1a82a2(0x247),'status':![],'priority':0x1}):_0x453057[_0x1a82a2(0x130)]({'title':'\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','status':!![],'priority':0x1}),_0x39b0b0();});}),_0x3e393d=new Promise(_0x4acfb2=>{const _0x21527e=_0x1b1357;fs['access'](_0x1e66fd,fs[_0x21527e(0x1bd)][_0x21527e(0x1d7)],_0x1b27df=>{const _0x699c26=_0x21527e;_0x1b27df?_0x453057['push']({'title':_0x699c26(0x1a3)+_0x150d18[_0x699c26(0x1c4)]+_0x699c26(0x1bc),'status':![],'priority':0x2}):_0x453057['push']({'title':_0x699c26(0x1a3)+_0x150d18['autoxchange_executable']+_0x699c26(0x1bc),'status':!![],'priority':0x2}),_0x4acfb2();});}),_0x29a2b9=new Promise(_0x1a889a=>{const _0x21cc4f=_0x1b1357;fs[_0x21cc4f(0x11e)](_0x3d6658,fs[_0x21cc4f(0x1bd)][_0x21cc4f(0x1d7)],_0x1d2ba4=>{const _0x5d5f18=_0x21cc4f;_0x1d2ba4?_0x453057['push']({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x150d18[_0x5d5f18(0x19c)]+'\x22\x20executable','status':![],'priority':0x3}):_0x453057[_0x5d5f18(0x130)]({'title':_0x5d5f18(0x1a3)+_0x150d18['dwgmerge_executable']+'\x22\x20executable','status':!![],'priority':0x3}),_0x1a889a();});}),_0xe8455c=new Promise(_0x205c03=>{const _0x125f01=_0x1b1357;fs[_0x125f01(0x11e)](_0x51c081,fs[_0x125f01(0x1bd)]['X_OK'],_0x338b2c=>{const _0xb4517=_0x125f01;_0x338b2c?_0x453057[_0xb4517(0x130)]({'title':_0xb4517(0x1a3)+_0x150d18['linklist_executable']+'\x22\x20executable','status':![],'priority':0x4}):_0x453057[_0xb4517(0x130)]({'title':_0xb4517(0x1a3)+_0x150d18[_0xb4517(0x10c)]+'\x22\x20executable','status':!![],'priority':0x4}),_0x205c03();});}),_0x42d500=new Promise(_0x13e16f=>{const _0x310c83=_0x1b1357,_0x4ac042=new Date(),_0x501b5e=_0x4ac042[_0x310c83(0x20c)]()[_0x310c83(0x11f)]()[_0x310c83(0x275)](0x2,'0')+'_'+(_0x4ac042['getMonth']()+0x1)[_0x310c83(0x11f)]()[_0x310c83(0x275)](0x2,'0')+'_'+_0x4ac042[_0x310c83(0x153)](),{displayDay:_0x4ffdbd}=_0x6eb562['body'];fs[_0x310c83(0x11e)](path[_0x310c83(0x287)](path[_0x310c83(0x237)](require[_0x310c83(0x1a6)][_0x310c83(0x23c)]),_0x310c83(0x177),_0x310c83(0x24b)+(_0x4ffdbd??_0x501b5e)+_0x310c83(0x294)),fs[_0x310c83(0x1bd)][_0x310c83(0x1aa)],_0x14173e=>{const _0x55e2a1=_0x310c83;_0x14173e?_0x453057[_0x55e2a1(0x130)]({'title':_0x55e2a1(0x179)+(_0x4ffdbd??_0x501b5e)+_0x55e2a1(0x236),'status':![],'priority':0x5}):_0x453057['push']({'title':_0x55e2a1(0x179)+(_0x4ffdbd??_0x501b5e)+_0x55e2a1(0x236),'status':!![],'priority':0x5}),_0x13e16f();});}),_0x2ab2c4=(_0xd8a2eb,_0x48b6be)=>{const _0x5afde6=_0x1b1357,_0x490090=path[_0x5afde6(0x287)](path[_0x5afde6(0x237)](require['main']['filename']),_0xd8a2eb);return new Promise(_0x268809=>{const _0xbd02b4=_0x5afde6;fs[_0xbd02b4(0x11e)](path[_0xbd02b4(0x287)](path[_0xbd02b4(0x237)](_0x490090)),fs[_0xbd02b4(0x1bd)][_0xbd02b4(0x193)]|fs[_0xbd02b4(0x1bd)][_0xbd02b4(0x1aa)],_0x4592d9=>{const _0x3088fe=_0xbd02b4;_0x4592d9?_0x453057[_0x3088fe(0x130)]({'title':_0x3088fe(0x28e)+_0xd8a2eb,'status':![],'priority':_0x48b6be+0x6}):_0x453057['push']({'title':_0x3088fe(0x28e)+_0xd8a2eb,'status':!![],'priority':_0x48b6be+0x6}),_0x268809();});});},_0xb2001f=[_0x1b1357(0x295),_0x1b1357(0x1f1),_0x1b1357(0x219),_0x1b1357(0x252),'/converters/files/pdf/','/content/redlines/','/content/redlines/v7/'],_0x28a8a8=_0xb2001f[_0x1b1357(0x104)](_0x2ab2c4);Promise[_0x1b1357(0x251)]([_0x12afc9,_0x3e393d,_0x29a2b9,_0xe8455c,_0x42d500,..._0x28a8a8])['then'](()=>{const _0x53321a=_0x1b1357;_0xc486c6[_0x53321a(0x147)](0xc8)[_0x53321a(0x1bf)]({'checking_list':_0x453057});})[_0x1b1357(0x264)](()=>{const _0x8f1073=_0x1b1357;_0xc486c6[_0x8f1073(0x147)](0x1f4)[_0x8f1073(0x1bf)]({'error':'An\x20error\x20occurred\x20while\x20checking.'});});}),router['get']('/users',protectedRoute,async(_0x2f00d8,_0x5deefa)=>{const _0x29c4b3=a27_0x5cb7b7,_0x1c0202=fs['readFileSync'](path[_0x29c4b3(0x287)](path[_0x29c4b3(0x237)](require[_0x29c4b3(0x1a6)][_0x29c4b3(0x23c)]),_0x29c4b3(0x22f)),_0x29c4b3(0x225)),_0x4a01da=_0x1c0202[_0x29c4b3(0x1f7)](_0x29c4b3(0x279),_0x2f00d8[_0x29c4b3(0x187)]);_0x5deefa[_0x29c4b3(0x12a)](_0x4a01da);}),router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x211),async(_0x43db52,_0x3fc404)=>{const _0x4233a6=a27_0x5cb7b7;let _0x31fbc8;try{const [_0x5691d7]=await conn['promise']()[_0x4233a6(0x13d)](_0x4233a6(0x230),[]);_0x31fbc8=_0x5691d7;}catch(_0x4bbbf8){console['log'](_0x4bbbf8),_0x3fc404[_0x4233a6(0x147)](0x1f4)[_0x4233a6(0x1bf)]({'error':_0x4233a6(0x11d)});return;}_0x3fc404[_0x4233a6(0x147)](0xc8)[_0x4233a6(0x1bf)]({'success':!![],'data':_0x31fbc8});}),router[a27_0x5cb7b7(0x21b)]('/users',upload[a27_0x5cb7b7(0x1c8)](a27_0x5cb7b7(0x29a)),async(_0x58bc59,_0xef2f3f)=>{const _0x40ad50=a27_0x5cb7b7,{id:_0x3d69d7,first_name:_0x3cf308,last_name:_0x2249cd,username:_0x14af01,email:_0x54dbdf,password:_0x5e296e,is_enabled:_0x2dc282}=_0x58bc59['body'],_0x1ce3b=_0x58bc59[_0x40ad50(0x256)]['role']===_0x40ad50(0x16a)?_0x40ad50(0x16a):_0x58bc59[_0x40ad50(0x256)][_0x40ad50(0x13b)]===_0x40ad50(0x1d1)?_0x40ad50(0x1d1):_0x40ad50(0x28f);let _0x1da049;console[_0x40ad50(0x244)]('=============================>');_0x5e296e&&(_0x1da049=await bcrypt['hash'](_0x5e296e,0xa));let _0x245d7e=null;if(_0x58bc59[_0x40ad50(0x20b)]){const _0x46bb50='avatars/'+randomUUID()+_0x40ad50(0x12e);fs[_0x40ad50(0x127)](_0x58bc59[_0x40ad50(0x20b)][_0x40ad50(0x176)],'./'+_0x46bb50),fs[_0x40ad50(0x27e)](_0x58bc59['file']['path']),config[_0x40ad50(0x266)]?_0x245d7e=config[_0x40ad50(0x180)]+'/'+_0x46bb50:_0x245d7e=config['ServerUrl']+'/'+_0x46bb50;}if(_0x3d69d7){try{let [_0x45add8]=await conn[_0x40ad50(0x131)]()[_0x40ad50(0x13d)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?',[_0x54dbdf,_0x14af01,_0x3d69d7]);if(_0x45add8[_0x40ad50(0x124)]>0x0)_0xef2f3f[_0x40ad50(0x147)](0x199)[_0x40ad50(0x1bf)]({'error':_0x40ad50(0x208)});else{!_0x58bc59[_0x40ad50(0x20b)]&&([_0x45add8]=await conn['promise']()[_0x40ad50(0x13d)](_0x40ad50(0x1b3),[_0x3d69d7]),_0x245d7e=_0x45add8[0x0][_0x40ad50(0x14b)]);const _0x4598f8='UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,'+(_0x5e296e?_0x40ad50(0x22e):'')+_0x40ad50(0x1b9);await conn['promise']()[_0x40ad50(0x13d)](_0x4598f8,_0x5e296e?[_0x245d7e,_0x3cf308,_0x2249cd,_0x14af01,_0x54dbdf,_0x1da049,_0x2dc282,_0x1ce3b,_0x3d69d7]:[_0x245d7e,_0x3cf308,_0x2249cd,_0x14af01,_0x54dbdf,_0x2dc282,_0x1ce3b,_0x3d69d7]);}}catch(_0x3dc6fc){console[_0x40ad50(0x244)](_0x3dc6fc),_0xef2f3f['status'](0x1f4)[_0x40ad50(0x1bf)]({'error':_0x40ad50(0x11d)});return;}_0xef2f3f[_0x40ad50(0x147)](0xc8)[_0x40ad50(0x1bf)]({'success':!![],'message':_0x40ad50(0x194)});}else{try{const [_0x49b3bc]=await conn[_0x40ad50(0x131)]()[_0x40ad50(0x13d)](_0x40ad50(0x11c),[_0x54dbdf,_0x14af01]);if(_0x49b3bc[_0x40ad50(0x124)]>0x0)_0xef2f3f[_0x40ad50(0x147)](0x199)[_0x40ad50(0x1bf)]({'error':_0x40ad50(0x208)});else{const _0x2dc062=randomUUID();await conn[_0x40ad50(0x131)]()['execute']('INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)',[_0x245d7e,_0x3cf308,_0x2249cd,_0x14af01,_0x54dbdf,_0x1da049,_0x1ce3b,_0x2dc282,_0x2dc062]);const _0x564e86=_0x40ad50(0x1c9)+_0x2dc062;fs['mkdirSync'](_0x564e86);}}catch(_0x145bce){console[_0x40ad50(0x244)](_0x145bce),_0xef2f3f['status'](0x1f4)['json']({'error':_0x40ad50(0x11d)});return;}_0xef2f3f[_0x40ad50(0x147)](0xc8)[_0x40ad50(0x1bf)]({'success':!![],'message':'User\x20created\x20successfully'});}}),router['delete'](a27_0x5cb7b7(0x112),async(_0x22508e,_0x31667d)=>{const _0x1e193a=a27_0x5cb7b7,{userId:_0x5e6601}=_0x22508e['body'];let _0x2810eb;try{const [_0x531753]=await conn['promise']()[_0x1e193a(0x13d)](_0x1e193a(0x1b3),[_0x5e6601]);_0x531753[_0x1e193a(0x124)]>0x0&&(_0x2810eb=_0x531753[0x0]);}catch(_0x16a774){console[_0x1e193a(0x244)]({'err':_0x16a774}),_0x31667d['status'](0x1f4)[_0x1e193a(0x1bf)]({'error':_0x1e193a(0x11d)});return;}if(!_0x2810eb){_0x31667d[_0x1e193a(0x147)](0x191)[_0x1e193a(0x1bf)]({'error':'Invalid\x20user'});return;}let _0x52fc8b=_0x2810eb[_0x1e193a(0x117)];if(!_0x52fc8b){_0x52fc8b=randomUUID();try{await conn['promise']()[_0x1e193a(0x13d)](_0x1e193a(0x157),[_0x52fc8b,_0x5e6601]);}catch(_0x4da0fe){console[_0x1e193a(0x244)]({'err':_0x4da0fe}),_0x31667d[_0x1e193a(0x147)](0x1f4)[_0x1e193a(0x1bf)]({'error':_0x1e193a(0x11d)});return;}}const _0x49088c=_0x1e193a(0x1c9)+_0x52fc8b;console['log']('===================='),console[_0x1e193a(0x244)](_0x49088c),!fs[_0x1e193a(0x203)](_0x49088c)&&fs['mkdirSync'](_0x49088c),cleanCacheForUserFiles(_0x49088c),fs['rmSync'](_0x49088c,{'recursive':!![],'force':!![]}),fs['mkdirSync'](_0x49088c),_0x31667d[_0x1e193a(0x147)](0xc8)[_0x1e193a(0x1bf)]({'success':!![],'message':_0x1e193a(0x24d)});}),router['delete']('/users/:userId',async(_0x52d8f0,_0x511b9c)=>{const _0x58285d=a27_0x5cb7b7,_0x17adb1=_0x52d8f0[_0x58285d(0x218)]['userId'];try{let _0x57427c;try{const [_0x1b414e]=await conn[_0x58285d(0x131)]()[_0x58285d(0x13d)](_0x58285d(0x1b3),[_0x17adb1]);_0x1b414e[_0x58285d(0x124)]>0x0&&(_0x57427c=_0x1b414e[0x0]);}catch(_0x597200){console[_0x58285d(0x244)]({'err':_0x597200}),_0x511b9c[_0x58285d(0x147)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x57427c){_0x511b9c[_0x58285d(0x147)](0x191)[_0x58285d(0x1bf)]({'error':_0x58285d(0x216)});return;}let _0x11aeff=_0x57427c[_0x58285d(0x117)];if(_0x11aeff){const _0x28a3a5=_0x58285d(0x1c9)+_0x11aeff;fs['existsSync'](_0x28a3a5)&&(cleanCacheForUserFiles(_0x28a3a5),fs['rmSync'](_0x28a3a5,{'recursive':!![],'force':!![]}));}await conn['promise']()[_0x58285d(0x13d)]('DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x17adb1]);}catch(_0x2ec34d){console[_0x58285d(0x244)](_0x2ec34d),_0x511b9c['status'](0x1f4)[_0x58285d(0x1bf)]({'error':_0x58285d(0x11d)});return;}_0x511b9c[_0x58285d(0x147)](0xc8)[_0x58285d(0x1bf)]({'success':!![],'message':_0x58285d(0x274)});}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x215),async(_0x3cae99,_0x58bab1)=>{const _0x2d9a4d=a27_0x5cb7b7,_0xef73da=osu[_0x2d9a4d(0x174)],_0x23d126=osu['mem'],_0x3046b6=osu[_0x2d9a4d(0x26f)],_0x1cf414=osu['os'],_0x42f646={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x4942a6=os['platform']()==='win32'?'c:':'/';const _0x418f50=await _0x3046b6[_0x2d9a4d(0x29e)](_0x4942a6);_0x42f646['percentage']=_0x418f50[_0x2d9a4d(0x141)],_0x42f646[_0x2d9a4d(0x1b1)]=_0x418f50[_0x2d9a4d(0x15c)],_0x42f646[_0x2d9a4d(0x242)]=_0x418f50[_0x2d9a4d(0x242)],_0x42f646[_0x2d9a4d(0x1e2)]=_0x418f50[_0x2d9a4d(0x10d)];}catch(_0x242317){console[_0x2d9a4d(0x244)](_0x2d9a4d(0x17c),_0x242317);}const _0x39d4a9={'usage':0x0,'count':0x0};try{_0x39d4a9[_0x2d9a4d(0x245)]=await _0xef73da[_0x2d9a4d(0x245)](),_0x39d4a9['count']=_0xef73da['count']();}catch(_0x52a61f){console[_0x2d9a4d(0x244)](_0x2d9a4d(0x1da),_0x52a61f);}const _0x8bfd79={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x8bfd79['os']=await _0x1cf414['oos'](),_0x8bfd79[_0x2d9a4d(0x185)]=_0x1cf414[_0x2d9a4d(0x185)](),_0x8bfd79['ip']=_0x1cf414['ip'](),_0x8bfd79['uptime']=_0x1cf414[_0x2d9a4d(0x276)](),_0x8bfd79[_0x2d9a4d(0x123)]=_0x1cf414['hostname'](),_0x8bfd79[_0x2d9a4d(0x1dd)]=_0x1cf414[_0x2d9a4d(0x1dd)](),_0x8bfd79['arch']=_0x1cf414[_0x2d9a4d(0x121)](),_0x8bfd79[_0x2d9a4d(0x1d3)]=await osu['osCmd']['who'](),_0x8bfd79[_0x2d9a4d(0x1eb)]=await osu[_0x2d9a4d(0x15b)]['whoami'](),_0x8bfd79['vmstats']=await osu['osCmd'][_0x2d9a4d(0x1e0)]();}catch(_0x10743a){console[_0x2d9a4d(0x244)](_0x2d9a4d(0x1b2),_0x10743a);}const _0x49a1b8={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x49a1b8['totalProcesses']=await osu[_0x2d9a4d(0x183)][_0x2d9a4d(0x1ba)](),_0x49a1b8[_0x2d9a4d(0x29c)]=await osu['proc'][_0x2d9a4d(0x29c)]();}catch(_0x3e51fe){console[_0x2d9a4d(0x244)](_0x2d9a4d(0x1e6),_0x3e51fe);}let _0x5e83bf={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x565752=await _0x23d126[_0x2d9a4d(0x29e)]();_0x5e83bf['usedMemPercentage']=_0x565752['usedMemPercentage'],_0x5e83bf[_0x2d9a4d(0x1ff)]=_0x565752[_0x2d9a4d(0x199)]/0x400/0x400,_0x5e83bf[_0x2d9a4d(0x19e)]=_0x565752[_0x2d9a4d(0x1f5)]/0x400/0x400;}catch(_0x24d3af){console[_0x2d9a4d(0x244)](_0x2d9a4d(0x154),_0x24d3af);}let _0x592f1c=0x0;try{_0x592f1c=await conn['promise']()[_0x2d9a4d(0x14f)]('SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users')[_0x2d9a4d(0x191)](([_0x13b944])=>_0x13b944[0x0]['total']);}catch(_0x255396){console[_0x2d9a4d(0x244)](_0x2d9a4d(0x19b),_0x255396);}const _0x1c515e=getMonitoringData(),_0x20d095=_0x1c515e['filter'](_0x28ab52=>_0x28ab52[_0x2d9a4d(0x1b0)]!==null&&_0x28ab52['conversionTimeSpend']!==undefined),_0x5ad855=_0x1c515e[_0x2d9a4d(0x162)](_0x46ea54=>_0x46ea54[_0x2d9a4d(0x1a4)]!==null&&_0x46ea54[_0x2d9a4d(0x1a4)]!==undefined)[_0x2d9a4d(0x104)](_0xb1bb2c=>parseFloat(_0xb1bb2c[_0x2d9a4d(0x1a4)]['replaceAll']('Kb')['trim']())),_0xa1cf25=_0x20d095['reduce']((_0x1bfad3,_0x51d015)=>_0x1bfad3+parseFloat(_0x51d015[_0x2d9a4d(0x1b0)]),0x0)/_0x20d095['length'],_0x3a3125=_0x5ad855[_0x2d9a4d(0x28b)]((_0x213306,_0x306922)=>_0x213306+_0x306922,0x0)/_0x5ad855[_0x2d9a4d(0x124)];_0x58bab1['json']({'requestsPerSecond':counter['getStats'](),'diskUsage':_0x42f646,'cpus':_0x39d4a9,'system':_0x8bfd79,'process':_0x49a1b8,'totalMonitoringData':_0x1c515e[_0x2d9a4d(0x124)],'memory':_0x5e83bf,'totalUsers':_0x592f1c,'avgConvertionTime':_0xa1cf25,'avgMemoryUsage':_0x3a3125});}),router[a27_0x5cb7b7(0x21b)](a27_0x5cb7b7(0x169),(_0x3127e0,_0x56ed3a)=>{const _0x309cd6=a27_0x5cb7b7;counter[_0x309cd6(0x1f0)](),_0x56ed3a[_0x309cd6(0x1bf)]({'message':'Counter\x20reset\x20successfully'});});const getMonitoringData=()=>{const _0x2f5d8c=a27_0x5cb7b7,_0x2309e6='cadviewer/settings/requests-callapiconversion-monitoring.json';let _0x484b3=[];try{_0x484b3=JSON[_0x2f5d8c(0x1a2)](fs['readFileSync'](_0x2309e6));}catch(_0x270b06){console[_0x2f5d8c(0x244)]('Error\x20reading\x20monitoring\x20file');}return _0x484b3;};router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x163),async(_0x552eb3,_0x4dab7f)=>{const _0xbe7bb3=a27_0x5cb7b7,{page:page=0x1,limit:limit=0xa}=_0x552eb3['query'],_0x5f2257=(page-0x1)*limit;try{const _0x505d96=getMonitoringData(),_0x35a2e0=_0x505d96[_0xbe7bb3(0x124)],_0x12abd5=Math[_0xbe7bb3(0x1e4)](_0x35a2e0/limit),_0x177d90=_0x505d96[_0xbe7bb3(0x25e)](_0x5f2257,_0x5f2257+limit);_0x4dab7f['status'](0xc8)[_0xbe7bb3(0x1bf)]({'data':_0x177d90,'page':parseInt(''+page),'totalPages':_0x12abd5,'total':_0x35a2e0});}catch(_0x5cc886){console[_0xbe7bb3(0x244)](_0x5cc886),_0x4dab7f[_0xbe7bb3(0x147)](0x1f4)[_0xbe7bb3(0x1bf)]({'error':_0xbe7bb3(0x11d)});}}),router[a27_0x5cb7b7(0x1cc)](a27_0x5cb7b7(0x18b),async(_0x4cadf2,_0x2c5bbd)=>{const _0x352249=a27_0x5cb7b7,_0x204b52=_0x352249(0x14d);try{fs[_0x352249(0x254)](_0x204b52,JSON['stringify']([],null,0x4)),analyzeConverterFiles(),_0x2c5bbd[_0x352249(0x147)](0xc8)[_0x352249(0x1bf)]({'message':_0x352249(0x21d)});}catch(_0x194ae0){console[_0x352249(0x244)](_0x194ae0),_0x2c5bbd[_0x352249(0x147)](0x1f4)['json']({'error':_0x352249(0x11d)});}}),router[a27_0x5cb7b7(0x16c)]('/conversion/memorydata',async(_0x3450d8,_0x86595d)=>{const _0x26f35f=a27_0x5cb7b7,_0x1c78a4=getHotConfig()['converterLocation'][_0x26f35f(0x1f7)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x3450d8[_0x26f35f(0x14f)],_0x5a4416=(page-0x1)*limit;try{const _0x1caf23=_0x1c78a4+_0x26f35f(0x1b4);console['log'](_0x1caf23);const _0x3ebdf0=fs[_0x26f35f(0x286)](_0x1caf23,_0x26f35f(0x225)),_0x22bb3d=_0x3ebdf0['split']('\x0a'),_0x27035c=[];_0x22bb3d[_0x26f35f(0x18e)](_0x2603ec=>{const _0x5065c5=_0x26f35f,_0x4022fb=_0x2603ec[_0x5065c5(0x1a1)](',');if(_0x4022fb[_0x5065c5(0x124)]<0x4)return;const _0x3edcfd=_0x4022fb[0x0],_0x34c6ff=_0x4022fb[0x1],_0x4d6c72=parseFloat(_0x4022fb[0x2]);_0x27035c['push']({'file':_0x3edcfd[_0x5065c5(0x1f7)]('\x22',''),'action':_0x34c6ff,'timeSpend':_0x4d6c72,'memoryUsage':_0x4022fb[0x3]});});const _0x1a8fb7=_0x27035c['length'],_0x4b1b2e=Math[_0x26f35f(0x1e4)](_0x1a8fb7/limit),_0x281046=_0x27035c['slice'](_0x5a4416,_0x5a4416+limit);_0x86595d[_0x26f35f(0x147)](0xc8)[_0x26f35f(0x1bf)]({'data':_0x281046,'page':parseInt(''+page),'totalPages':_0x4b1b2e,'total':_0x1a8fb7});}catch(_0x105261){console[_0x26f35f(0x244)](_0x105261),_0x86595d['status'](0x1f4)[_0x26f35f(0x1bf)]({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x1a7),async(_0x19a101,_0x701109)=>{const _0x20d8b6=a27_0x5cb7b7,_0x4e5d8e=path[_0x20d8b6(0x287)](path['dirname'](require['main'][_0x20d8b6(0x23c)]),_0x20d8b6(0x11b),_0x20d8b6(0x231));try{let _0x47e536=0x0,_0x2dd967=0x0;function _0x4d251c(_0x5ae459){const _0x35cf63=_0x20d8b6;let _0x5f2171=0x0,_0x4d13b2=0x0;if(fs[_0x35cf63(0x203)](_0x5ae459)){const _0x6c91fe=fs[_0x35cf63(0x25c)](_0x5ae459);_0x4d13b2=0x0;for(const _0x5e5137 of _0x6c91fe){const _0x360cec=path[_0x35cf63(0x287)](_0x5ae459,_0x5e5137),_0xedcf3b=fs[_0x35cf63(0x140)](_0x360cec);if(_0xedcf3b['isFile']()&&_0x5e5137!==_0x35cf63(0x27f))_0x4d13b2++,_0x5f2171+=_0xedcf3b['size'];else{if(_0xedcf3b[_0x35cf63(0x296)]()){}}}}return{'size':_0x5f2171,'count':_0x4d13b2};}const _0x3cd8a8=_0x4d251c(_0x4e5d8e);_0x47e536=_0x3cd8a8[_0x20d8b6(0x175)],_0x2dd967=_0x3cd8a8[_0x20d8b6(0x103)],_0x701109['json']({'fileCount':_0x2dd967,'totalSize':_0x47e536});}catch(_0x31d28c){console[_0x20d8b6(0x261)]('Error\x20getting\x20cache\x20stats:',_0x31d28c),_0x701109[_0x20d8b6(0x147)](0x1f4)['json']({'error':_0x20d8b6(0x1cd)});}}),router['delete'](a27_0x5cb7b7(0x14a),async(_0x47aac2,_0x15bb2d)=>{const _0x27d18d=a27_0x5cb7b7,_0x268066=path[_0x27d18d(0x287)](path['dirname'](require['main'][_0x27d18d(0x23c)]),_0x27d18d(0x11b),'files');try{function _0x4523e9(_0x88fd4c){const _0x36cf68=_0x27d18d;if(fs[_0x36cf68(0x203)](_0x88fd4c)){const _0xc41f75=fs[_0x36cf68(0x25c)](_0x88fd4c);for(const _0x4825bd of _0xc41f75){const _0x5b3f63=path[_0x36cf68(0x287)](_0x88fd4c,_0x4825bd),_0x5bf85a=fs['statSync'](_0x5b3f63);if(_0x5bf85a[_0x36cf68(0x296)]()){}else _0x4825bd!==_0x36cf68(0x27f)&&fs[_0x36cf68(0x27e)](_0x5b3f63);}}}_0x4523e9(_0x268066),analyzeConverterFiles(),_0x15bb2d[_0x27d18d(0x1bf)]({'message':_0x27d18d(0x22b)});}catch(_0x226964){console[_0x27d18d(0x261)](_0x27d18d(0x12c),_0x226964),_0x15bb2d['status'](0x1f4)['json']({'error':_0x27d18d(0x156)});}}),router['get']('/cache-stats.js',async(_0x19cc67,_0x3d8b59)=>{const _0x520eba=a27_0x5cb7b7;_0x3d8b59['sendFile'](path[_0x520eba(0x287)](path['dirname'](require['main'][_0x520eba(0x23c)]),'cadviewer/settings/cache-stats.js'));}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x298),protectedRoute,async(_0x52c310,_0x15119a)=>{const _0x1e7a82=a27_0x5cb7b7,_0x7f1e7f=fs[_0x1e7a82(0x286)](path[_0x1e7a82(0x287)](path[_0x1e7a82(0x237)](require[_0x1e7a82(0x1a6)][_0x1e7a82(0x23c)]),_0x1e7a82(0x144)),_0x1e7a82(0x225)),_0x48bdad=_0x7f1e7f[_0x1e7a82(0x1f7)]('{version}',_0x52c310[_0x1e7a82(0x187)]);_0x15119a[_0x1e7a82(0x12a)](_0x48bdad);}),router['get'](a27_0x5cb7b7(0x1b5),async(_0x29fcd8,_0x3d5469)=>{const _0x221cd3=a27_0x5cb7b7,{page:page=0x1,limit:limit=0x10}=_0x29fcd8['query'],_0x4e5e21=JSON[_0x221cd3(0x1a2)](fs[_0x221cd3(0x286)](path[_0x221cd3(0x287)](path['dirname'](require['main'][_0x221cd3(0x23c)]),_0x221cd3(0x212)))),_0xec03d2=(page-0x1)*limit,_0x3f0a74=page*limit,_0x242045=_0x4e5e21[_0x221cd3(0x231)][_0x221cd3(0x124)],_0x2854c6=Math['ceil'](_0x242045/limit),_0x276f72=_0x4e5e21[_0x221cd3(0x231)]['slice'](_0xec03d2,_0x3f0a74);_0x3d5469[_0x221cd3(0x1bf)]({'files':_0x276f72,'pagination':{'total':_0x242045,'totalPages':_0x2854c6,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get'](a27_0x5cb7b7(0x29d),async(_0xe8c1be,_0x4a822a)=>{const _0x83efcd=a27_0x5cb7b7,{file:_0x225f40}=_0xe8c1be[_0x83efcd(0x218)],_0x39c68f=path['join'](path[_0x83efcd(0x237)](require[_0x83efcd(0x1a6)]['filename']),_0x83efcd(0x11b),'files'),_0x424231=path[_0x83efcd(0x287)](_0x39c68f,_0x225f40),_0x410d2=fs[_0x83efcd(0x286)](_0x424231,'utf8'),_0x21e2ca=_0x410d2[_0x83efcd(0x1a1)]('\x0a'),_0x27aab8=_0x21e2ca['map'](_0x55885e=>{const _0x359ff9=_0x83efcd,_0x4d5f82=_0x55885e[_0x359ff9(0x1a1)](',');return _0x4d5f82[_0x359ff9(0x104)](_0x425262=>_0x425262[_0x359ff9(0x1f7)]('\x22',''));});_0x4a822a[_0x83efcd(0x1bf)](_0x27aab8);}),router[a27_0x5cb7b7(0x16c)]('/cache/files/:id',async(_0x536115,_0x552beb)=>{const _0x56ad71=a27_0x5cb7b7,{id:_0xcbe5a8}=_0x536115[_0x56ad71(0x218)],_0x50f812=path[_0x56ad71(0x287)](path['dirname'](require[_0x56ad71(0x1a6)][_0x56ad71(0x23c)]),_0x56ad71(0x11b),_0x56ad71(0x231)),_0x434c85=path['join'](_0x50f812,_0xcbe5a8);if(_0x434c85[_0x56ad71(0x12f)]('.svgz')){var _0x4b3ed4=require('zlib');const _0x295af6=fs[_0x56ad71(0x286)](_0x434c85),_0x190189=_0x4b3ed4[_0x56ad71(0x263)](_0x295af6);_0x552beb[_0x56ad71(0x1df)](_0x56ad71(0x1d4),'image/svg+xml'),_0x552beb['send'](_0x190189);}else _0x552beb[_0x56ad71(0x292)](_0x434c85);}),router[a27_0x5cb7b7(0x1cc)]('/cache/files/:id',async(_0x88ca14,_0x138364)=>{const _0x8a9a2a=a27_0x5cb7b7,{id:_0x3d6287}=_0x88ca14[_0x8a9a2a(0x218)],_0x4c9e9a=path[_0x8a9a2a(0x287)](path[_0x8a9a2a(0x237)](require['main']['filename']),'converters',_0x8a9a2a(0x231)),_0xad88f7=JSON[_0x8a9a2a(0x1a2)](fs[_0x8a9a2a(0x286)](path['join'](path[_0x8a9a2a(0x237)](require[_0x8a9a2a(0x1a6)][_0x8a9a2a(0x23c)]),_0x8a9a2a(0x212)))),_0x2d7107=_0xad88f7['files']['find'](_0x2a5976=>_0x2a5976['name']===_0x3d6287);if(_0x2d7107){try{fs['existsSync'](path[_0x8a9a2a(0x287)](_0x4c9e9a,_0x2d7107['name']))&&fs['unlinkSync'](path['join'](_0x4c9e9a,_0x2d7107[_0x8a9a2a(0x1f8)]));}catch(_0x1bd89c){console[_0x8a9a2a(0x244)](_0x8a9a2a(0x10e),{'e':_0x1bd89c});}(_0x2d7107[_0x8a9a2a(0x1a8)]??[])['forEach'](_0xea619d=>{const _0x5c2c31=_0x8a9a2a;try{fs['existsSync'](path[_0x5c2c31(0x287)](_0x4c9e9a,_0xea619d['id']))&&fs[_0x5c2c31(0x27e)](path[_0x5c2c31(0x287)](_0x4c9e9a,_0xea619d['id']));}catch(_0x8109c9){console['log']('Error\x20deleting\x20file',{'e':_0x8109c9});}});}analyzeConverterFiles(),_0x138364['json']({'message':_0x8a9a2a(0x1dc)});});const deleteOldDemoUsers=async()=>{const _0x56cbd6=a27_0x5cb7b7;console['log']('Deleting\x20old\x20demo_user\x20accounts...');const _0x15da4d=config[_0x56cbd6(0x10f)],_0x59c8c2=_0x56cbd6(0x262);try{const [_0x153646]=await conn['promise']()['execute'](_0x59c8c2,[_0x15da4d]),_0x2f9f43=_0x153646[_0x56cbd6(0x104)](_0x3c53a9=>_0x3c53a9[_0x56cbd6(0x117)]),_0xccf35f=_0x153646[_0x56cbd6(0x104)](_0x1b6330=>_0x1b6330[_0x56cbd6(0x20f)]);console[_0x56cbd6(0x244)](_0xccf35f),await conn[_0x56cbd6(0x131)]()['execute'](_0x56cbd6(0x23a),[_0x15da4d]),_0x2f9f43[_0x56cbd6(0x18e)](_0x80ddac=>{const _0x39b01d=_0x56cbd6;try{const _0x49769e=_0x39b01d(0x1c9)+_0x80ddac;cleanCacheForUserFiles(_0x49769e),fs['rmdirSync'](_0x49769e);}catch(_0x5f35f1){console[_0x39b01d(0x261)]('Error\x20deleting\x20user\x20folder:',_0x5f35f1);}}),console[_0x56cbd6(0x244)]('Old\x20demo_user\x20accounts\x20('+_0x153646['length']+_0x56cbd6(0x241)+_0x15da4d+_0x56cbd6(0x1ce));}catch(_0x592bfc){console['error']('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0x592bfc);}};schedule[a27_0x5cb7b7(0x16f)]('0\x201\x20*\x20*\x20*',deleteOldDemoUsers),router['get']('/export-users',protectedRoute,async(_0x340312,_0x33313a)=>{const _0x3cd312=a27_0x5cb7b7,_0x4a96f5=fs[_0x3cd312(0x286)](path[_0x3cd312(0x287)](path[_0x3cd312(0x237)](require[_0x3cd312(0x1a6)][_0x3cd312(0x23c)]),'cadviewer/settings/users-export.html'),_0x3cd312(0x225)),_0x2fd050=_0x4a96f5[_0x3cd312(0x1f7)](_0x3cd312(0x279),_0x340312[_0x3cd312(0x187)]);_0x33313a[_0x3cd312(0x12a)](_0x2fd050);});function a27_0x4697(_0x617e2,_0x3ddf5b){const _0x3864f8=a27_0x3864();return a27_0x4697=function(_0x46972a,_0x4cf795){_0x46972a=_0x46972a-0x103;let _0x17a53e=_0x3864f8[_0x46972a];return _0x17a53e;},a27_0x4697(_0x617e2,_0x3ddf5b);}const exportUsersList=async()=>{const _0x113ad1=a27_0x5cb7b7;console['log'](_0x113ad1(0x189));const _0x493a58=path[_0x113ad1(0x287)](path['dirname'](require['main']['filename']),_0x113ad1(0x108));!fs[_0x113ad1(0x203)](_0x493a58)&&fs[_0x113ad1(0x282)](_0x493a58);const _0x3f1768=config[_0x113ad1(0x1d2)]||_0x113ad1(0x120);let _0x25cab4;const _0x1eccd6=path[_0x113ad1(0x287)](_0x493a58,_0x113ad1(0x24f));if(fs[_0x113ad1(0x203)](_0x1eccd6))try{const _0x16f60d=JSON[_0x113ad1(0x1a2)](fs[_0x113ad1(0x286)](_0x1eccd6,'utf8'));_0x25cab4=new Date(_0x16f60d['lastExportDate']);}catch(_0x5470e4){console[_0x113ad1(0x261)](_0x113ad1(0x23b),_0x5470e4),_0x25cab4=calculateDefaultLastExportDate(_0x3f1768);}else _0x25cab4=calculateDefaultLastExportDate(_0x3f1768);const _0x3ba8a2=new Date(),_0x1c0e22=_0x3ba8a2['getFullYear']()+'-'+String(_0x3ba8a2[_0x113ad1(0x223)]()+0x1)[_0x113ad1(0x275)](0x2,'0')+'-'+String(_0x3ba8a2[_0x113ad1(0x20c)]())['padStart'](0x2,'0'),_0x3ef9ef=_0x113ad1(0x29b)+_0x1c0e22+'.csv',_0x518908=path[_0x113ad1(0x287)](_0x493a58,_0x3ef9ef);try{const _0x20c1d6=_0x113ad1(0x1f9),[_0xd8658e]=await conn['promise']()[_0x113ad1(0x13d)](_0x20c1d6,[_0x25cab4]);if(_0xd8658e[_0x113ad1(0x124)]===0x0){console['log']('No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads');return;}let _0xb5f3b8=_0x113ad1(0x228);_0xd8658e[_0x113ad1(0x18e)](_0x182d26=>{const _0xf64f7a=_0x113ad1,_0x2fe528=_0x182d26[_0xf64f7a(0x20f)]?'\x22'+_0x182d26[_0xf64f7a(0x20f)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x11fdd9=_0x182d26[_0xf64f7a(0x164)]?'\x22'+_0x182d26[_0xf64f7a(0x164)][_0xf64f7a(0x1ad)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x1384de=_0x182d26[_0xf64f7a(0x226)]?'\x22'+_0x182d26[_0xf64f7a(0x226)][_0xf64f7a(0x1ad)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0xb5f3b8+=_0x2fe528+','+_0x11fdd9+','+_0x1384de+'\x0a';}),fs[_0x113ad1(0x254)](_0x518908,_0xb5f3b8),console[_0x113ad1(0x244)](_0x113ad1(0x1bb)+_0xd8658e[_0x113ad1(0x124)]+'\x20users\x20to\x20'+_0x518908);const _0x5975f0={'lastExportDate':_0x3ba8a2[_0x113ad1(0x190)](),'fileName':_0x3ef9ef,'userCount':_0xd8658e[_0x113ad1(0x124)]};fs[_0x113ad1(0x254)](_0x1eccd6,JSON[_0x113ad1(0x222)](_0x5975f0,null,0x2));}catch(_0x13bb58){console['error'](_0x113ad1(0x27d),_0x13bb58);}},calculateDefaultLastExportDate=_0x4945f3=>{const _0x341e9a=a27_0x5cb7b7,_0x544dba=new Date();return _0x4945f3===_0x341e9a(0x1c6)?_0x544dba['setDate'](_0x544dba['getDate']()-0xe):_0x544dba['setMonth'](_0x544dba['getMonth']()-0x1),_0x544dba;};router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x135),async(_0x3f97dc,_0x208f5e)=>{const _0x5f2c1b=a27_0x5cb7b7,_0x382c7b=path[_0x5f2c1b(0x287)](path[_0x5f2c1b(0x237)](require['main'][_0x5f2c1b(0x23c)]),'exports');if(!fs[_0x5f2c1b(0x203)](_0x382c7b))return _0x208f5e[_0x5f2c1b(0x147)](0xc8)[_0x5f2c1b(0x1bf)]({'exports':[]});try{const _0x468089=fs[_0x5f2c1b(0x25c)](_0x382c7b)[_0x5f2c1b(0x162)](_0x3759a1=>_0x3759a1[_0x5f2c1b(0x1f3)]('users-export-')&&_0x3759a1[_0x5f2c1b(0x12f)]('.csv'))[_0x5f2c1b(0x104)](_0x38dc3f=>{const _0x25c84f=_0x5f2c1b,_0x547ddd=path['join'](_0x382c7b,_0x38dc3f),_0x221cdd=fs[_0x25c84f(0x140)](_0x547ddd),_0x27fafa=fs['readFileSync'](_0x547ddd,_0x25c84f(0x225)),_0x3a4ac2=_0x27fafa[_0x25c84f(0x1a1)]('\x0a')[_0x25c84f(0x124)]-0x1;return{'fileName':_0x38dc3f,'createdAt':_0x221cdd[_0x25c84f(0x119)],'userCount':_0x3a4ac2};})[_0x5f2c1b(0x277)]((_0x2d0297,_0x539ed7)=>_0x539ed7[_0x5f2c1b(0x16e)]-_0x2d0297['createdAt']);_0x208f5e[_0x5f2c1b(0x147)](0xc8)[_0x5f2c1b(0x1bf)]({'exports':_0x468089});}catch(_0x47ecc1){console[_0x5f2c1b(0x261)]('Error\x20getting\x20Users\x20export\x20export\x20history:',_0x47ecc1),_0x208f5e['status'](0x1f4)[_0x5f2c1b(0x1bf)]({'error':'Failed\x20to\x20retrieve\x20export\x20history'});}}),router[a27_0x5cb7b7(0x21b)]('/users-export/trigger',async(_0x182035,_0x4865cb)=>{const _0x3a4348=a27_0x5cb7b7;try{await exportUsersList(),_0x4865cb[_0x3a4348(0x147)](0xc8)[_0x3a4348(0x1bf)]({'message':_0x3a4348(0x13c)});}catch(_0x11c4a2){console['error'](_0x3a4348(0x17e),_0x11c4a2),_0x4865cb[_0x3a4348(0x147)](0x1f4)[_0x3a4348(0x1bf)]({'error':_0x3a4348(0x1a9)});}}),router[a27_0x5cb7b7(0x16c)](a27_0x5cb7b7(0x21f),async(_0x4a6a68,_0x477bc5)=>{const _0x56e01b=a27_0x5cb7b7,{fileName:_0x46f8f3}=_0x4a6a68[_0x56e01b(0x218)],_0x328744=path[_0x56e01b(0x287)](path['dirname'](require['main']['filename']),'exports',_0x46f8f3);if(!fs[_0x56e01b(0x203)](_0x328744))return _0x477bc5[_0x56e01b(0x147)](0x194)[_0x56e01b(0x1bf)]({'error':_0x56e01b(0x15e)});_0x477bc5[_0x56e01b(0x1ae)](_0x328744);});const cleanCacheForUserFiles=_0xb31fb7=>{const _0xe2237e=a27_0x5cb7b7;try{if(!fs[_0xe2237e(0x203)](_0xb31fb7)){console[_0xe2237e(0x244)]('Directory\x20'+_0xb31fb7+_0xe2237e(0x132));return;}const _0x118a4f=path['join'](path[_0xe2237e(0x237)](require['main'][_0xe2237e(0x23c)]),_0xe2237e(0x11b),'files');if(!fs[_0xe2237e(0x203)](_0x118a4f)){console[_0xe2237e(0x244)](_0xe2237e(0x1ee)+_0x118a4f+_0xe2237e(0x132));return;}const _0x34482e=JSON[_0xe2237e(0x1a2)](fs['readFileSync'](path[_0xe2237e(0x287)](path['dirname'](require[_0xe2237e(0x1a6)][_0xe2237e(0x23c)]),_0xe2237e(0x212)))),_0x2dc372=fs[_0xe2237e(0x25c)](_0xb31fb7);_0x2dc372[_0xe2237e(0x18e)](_0x271fda=>{const _0x4bfaff=_0xe2237e;_0x34482e[_0x4bfaff(0x231)]['forEach'](_0x59661b=>{const _0x3e644b=_0x4bfaff;_0x59661b[_0x3e644b(0x248)]===_0x271fda&&_0x59661b[_0x3e644b(0x1a8)]['forEach'](_0x3e8360=>{const _0x29d9bb=_0x3e644b;try{fs['unlinkSync'](path[_0x29d9bb(0x287)](_0x118a4f,_0x3e8360['id']));}catch(_0x44af98){console[_0x29d9bb(0x261)]('Error\x20deleting\x20cache\x20file\x20'+_0x3e8360['id']+':',_0x44af98);}});});}),analyzeConverterFiles(),console[_0xe2237e(0x244)]('Cache\x20cleaned\x20for\x20files\x20in\x20'+_0xb31fb7);}catch(_0x3c269f){console[_0xe2237e(0x261)](_0xe2237e(0x243),_0x3c269f);}};schedule['scheduleJob'](a27_0x5cb7b7(0x20a),exportUsersList),schedule['scheduleJob'](a27_0x5cb7b7(0x198),sendFollowUpEmails),schedule[a27_0x5cb7b7(0x16f)]('0\x200\x20*\x20*\x20*',sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x2fdb68=a27_0x5cb7b7;try{const _0x5c32c3=path['join'](path[_0x2fdb68(0x237)](require[_0x2fdb68(0x1a6)][_0x2fdb68(0x23c)]),_0x2fdb68(0x11b),_0x2fdb68(0x231)),_0xa3c0f2=path[_0x2fdb68(0x287)](path[_0x2fdb68(0x237)](require[_0x2fdb68(0x1a6)][_0x2fdb68(0x23c)]),_0x2fdb68(0x234),_0x2fdb68(0x272));if(!fs['existsSync'](_0x5c32c3)){logStream[_0x2fdb68(0x209)]('Le\x20dossier\x20'+_0x5c32c3+_0x2fdb68(0x257));return;}if(!fs[_0x2fdb68(0x203)](_0xa3c0f2)){logStream['write'](_0x2fdb68(0x259)+_0xa3c0f2+_0x2fdb68(0x257));return;}const _0x30ab92=fs['readdirSync'](_0x5c32c3),_0x1e527f={};_0x30ab92['forEach'](_0x8afc4e=>{const _0x2524ec=_0x2fdb68,_0x2c2de0=path[_0x2524ec(0x287)](_0x5c32c3,_0x8afc4e),_0x42e95c=fs[_0x2524ec(0x140)](_0x2c2de0),_0x1140c6=_0x8afc4e[_0x2524ec(0x1a1)]('.'),_0x479a43=_0x1140c6[_0x2524ec(0x25e)](0x0,-0x1)[_0x2524ec(0x162)]((_0x4d8d65,_0x57722c)=>!([_0x2524ec(0x18a),'rl']['includes'](_0x4d8d65[_0x2524ec(0x29f)]())&&_0x57722c===_0x1140c6['length']-0x2))[_0x2524ec(0x287)]('.');!Object[_0x2524ec(0x281)](_0x1e527f)[_0x2524ec(0x23e)](_0x479a43)?_0x1e527f[_0x479a43]=[{'file':_0x8afc4e,'stats':_0x42e95c}]:_0x1e527f[_0x479a43]['push']({'file':_0x8afc4e,'stats':_0x42e95c});});const _0x3da323=[];_0x30ab92[_0x2fdb68(0x18e)](_0x59621d=>{const _0x1a20ac=_0x2fdb68;if(!_0x59621d['endsWith'](_0x1a20ac(0x291)))return;let _0x5007ed=_0x59621d;const _0x3781f4=path[_0x1a20ac(0x287)](_0x5c32c3,_0x59621d),_0x545f79=fs[_0x1a20ac(0x140)](_0x3781f4);let _0x49d05a=_0x545f79['size'],_0x5b6b4f='';const _0x5c13e8=fs['readFileSync'](_0x3781f4,'utf8'),_0x36eeb4=JSON[_0x1a20ac(0x1a2)](_0x5c13e8),_0xc7d33a=_0x36eeb4[_0x1a20ac(0x217)]?.[_0x1a20ac(0x104)](_0x25201=>_0x25201['fileName'])??[];if(_0x36eeb4['filename'])_0x5007ed=_0x36eeb4[_0x1a20ac(0x23c)];const _0x3ea31b=_0x59621d[_0x1a20ac(0x1a1)]('.'),_0x392818=_0x3ea31b[_0x1a20ac(0x25e)](0x0,-0x1)['filter']((_0x4b9d6f,_0x1fcaa6)=>!([_0x1a20ac(0x18a),'rl'][_0x1a20ac(0x23e)](_0x4b9d6f['toLocaleLowerCase']())&&_0x1fcaa6===_0x3ea31b[_0x1a20ac(0x124)]-0x2))[_0x1a20ac(0x287)]('.'),_0x1414d2=Object[_0x1a20ac(0x281)](_0x1e527f)[_0x1a20ac(0x23e)](_0x392818)?_0x1e527f[_0x392818]:[];for(const _0x1ad2f8 of _0xc7d33a){Object[_0x1a20ac(0x281)](_0x1e527f)['includes'](_0x1ad2f8)&&_0x1414d2['push'](..._0x1e527f[_0x1ad2f8]);}const _0x13de85=_0x1414d2['map'](({file:_0x68edff,stats:_0x2ad236})=>{const _0x4759b7=_0x1a20ac;return!_0x68edff['endsWith']('.dwg.json')&&(_0x49d05a+=_0x2ad236['size']),{'id':_0x68edff,'name':_0x68edff[_0x4759b7(0x12f)]('.svg')?'SVG':_0x68edff[_0x4759b7(0x12f)]('.svgz')?_0x4759b7(0x224):_0x68edff['endsWith'](_0x4759b7(0x1e5))?_0x4759b7(0x192):_0x68edff[_0x4759b7(0x12f)](_0x4759b7(0x299))?'JSON':_0x68edff[_0x4759b7(0x12f)](_0x4759b7(0x1f4))?_0x4759b7(0x1f6):_0x68edff['endsWith'](_0x4759b7(0x268))?'DWG':_0x68edff['split']('.')[_0x4759b7(0x1d9)]()[_0x4759b7(0x20e)](),'color':_0x68edff[_0x4759b7(0x12f)](_0x4759b7(0x2a0))||_0x68edff[_0x4759b7(0x12f)](_0x4759b7(0x253))?'yellow':_0x68edff[_0x4759b7(0x12f)](_0x4759b7(0x1e5))?_0x4759b7(0x1fc):_0x68edff[_0x4759b7(0x12f)](_0x4759b7(0x299))?_0x4759b7(0x1b7):_0x68edff['endsWith'](_0x4759b7(0x1f4))?_0x4759b7(0x151):_0x68edff[_0x4759b7(0x12f)](_0x4759b7(0x268))?_0x4759b7(0x200):_0x4759b7(0x171)};});if(_0x13de85[_0x1a20ac(0x18f)](_0x5da699=>_0x5da699['id'][_0x1a20ac(0x23e)]('.rl.json')))_0x5b6b4f='RL/TL\x20Processing';else{if(_0x13de85[_0x1a20ac(0x18f)](_0x5927d6=>['svg','svgz'][_0x1a20ac(0x23e)](_0x5927d6['id'][_0x1a20ac(0x1a1)]('.')[_0x1a20ac(0x1d9)]()))&&_0x13de85[_0x1a20ac(0x18f)](_0x4dfc67=>[_0x1a20ac(0x1fa)][_0x1a20ac(0x23e)](_0x4dfc67['id'][_0x1a20ac(0x1a1)]('.')[_0x1a20ac(0x1d9)]())))_0x5b6b4f=_0x1a20ac(0x26b);else{if(_0x13de85[_0x1a20ac(0x18f)](_0x195e05=>[_0x1a20ac(0x138),_0x1a20ac(0x26a)]['includes'](_0x195e05['id'][_0x1a20ac(0x1a1)]('.')[_0x1a20ac(0x1d9)]())))_0x5b6b4f=_0x1a20ac(0x28a);else{if(_0x13de85[_0x1a20ac(0x18f)](_0x332949=>[_0x1a20ac(0x1bf)]['includes'](_0x332949['id'][_0x1a20ac(0x1a1)]('.')[_0x1a20ac(0x1d9)]()))&&_0x13de85['some'](_0x4ae4e9=>['dwg'][_0x1a20ac(0x23e)](_0x4ae4e9['id'][_0x1a20ac(0x1a1)]('.')[_0x1a20ac(0x1d9)]())))_0x5b6b4f=_0x1a20ac(0x13e);else{if(_0x13de85['some'](_0x3ef4c8=>[_0x1a20ac(0x278)][_0x1a20ac(0x23e)](_0x3ef4c8['id']['split']('.')[_0x1a20ac(0x1d9)]())))_0x5b6b4f=_0x1a20ac(0x2a1);else{if(_0x13de85['some'](_0x234810=>['json'][_0x1a20ac(0x23e)](_0x234810['id'][_0x1a20ac(0x1a1)]('.')['pop']()))&&!_0x13de85[_0x1a20ac(0x18f)](_0x3fde34=>[_0x1a20ac(0x18a)][_0x1a20ac(0x23e)](_0x3fde34['id']['split']('.')['pop']())))_0x5b6b4f=_0x1a20ac(0x24c);else _0x13de85[_0x1a20ac(0x18f)](_0x1f5cbb=>[_0x1a20ac(0x1bf)][_0x1a20ac(0x23e)](_0x1f5cbb['id']['split']('.')[_0x1a20ac(0x1d9)]()))&&(_0x5b6b4f='Cache\x20conversion');}}}}}_0x3da323[_0x1a20ac(0x130)]({'name':_0x59621d,'goodFileName':_0x5007ed,'size':_0x49d05a,'createdAt':_0x545f79['birthtime'],'updatedAt':_0x545f79[_0x1a20ac(0x134)],'readAt':_0x545f79[_0x1a20ac(0x205)],'action':_0x5b6b4f,'availableFormats':_0x13de85});}),_0x3da323[_0x2fdb68(0x277)]((_0x3dd485,_0x5d27f4)=>_0x5d27f4['updatedAt']-_0x3dd485[_0x2fdb68(0x181)]);const _0x12e14d={'timestamp':new Date(),'totalFiles':_0x3da323[_0x2fdb68(0x124)],'files':_0x3da323},_0x2d0ba9=path[_0x2fdb68(0x287)](_0xa3c0f2,_0x2fdb68(0x24e));fs['writeFileSync'](_0x2d0ba9,JSON[_0x2fdb68(0x222)](_0x12e14d,null,0x2));}catch(_0x4868db){console[_0x2fdb68(0x244)](_0x2fdb68(0x25f)),console[_0x2fdb68(0x244)]('Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20'+_0x4868db[_0x2fdb68(0x188)]);}},scheduleFileAnalysis=()=>{const _0x5621e5=a27_0x5cb7b7;analyzeConverterFiles(),schedule[_0x5621e5(0x16f)](_0x5621e5(0x1d0),analyzeConverterFiles),logStream[_0x5621e5(0x209)](_0x5621e5(0x15a));};scheduleFileAnalysis(),router['post'](a27_0x5cb7b7(0x1a5),async(_0x124b8c,_0x1daed2)=>{const _0x88b011=a27_0x5cb7b7,{userId:_0x17ed27}=_0x124b8c[_0x88b011(0x256)];let _0x45ad31;try{const [_0x2101c2]=await conn[_0x88b011(0x131)]()['execute'](_0x88b011(0x1b3),[_0x17ed27]);_0x2101c2[_0x88b011(0x124)]>0x0&&(_0x45ad31=_0x2101c2[0x0]);}catch(_0x47197f){console[_0x88b011(0x244)]({'err':_0x47197f}),_0x1daed2[_0x88b011(0x147)](0x1f4)[_0x88b011(0x1bf)]({'error':_0x88b011(0x11d)});return;}if(!_0x45ad31){_0x1daed2[_0x88b011(0x147)](0x191)['json']({'error':_0x88b011(0x216)});return;}if(_0x45ad31[_0x88b011(0x13b)]!==_0x88b011(0x1d1)){_0x1daed2['status'](0x190)[_0x88b011(0x1bf)]({'error':_0x88b011(0x155)});return;}const _0x555c3e=new Date();try{await conn[_0x88b011(0x131)]()['execute'](_0x88b011(0x260),[_0x555c3e,_0x17ed27]),_0x1daed2[_0x88b011(0x147)](0xc8)[_0x88b011(0x1bf)]({'success':!![],'message':_0x88b011(0x116)+config[_0x88b011(0x10f)]+_0x88b011(0x1e9)});}catch(_0x59b2f4){console[_0x88b011(0x244)]({'err':_0x59b2f4}),_0x1daed2[_0x88b011(0x147)](0x1f4)[_0x88b011(0x1bf)]({'error':_0x88b011(0x11d)});return;}}),router['get'](a27_0x5cb7b7(0x240),async(_0xef7a90,_0x39dca9)=>{const _0x3e5101=a27_0x5cb7b7;try{const _0x31af50=getHotConfig(),_0x1bc390={'maxFileSize':(_0x31af50[_0x3e5101(0x1ca)]||0x32)*0x400*0x400,'maxConcurrentUploads':_0x31af50[_0x3e5101(0x297)]||0x3,'maxFiles':_0x31af50[_0x3e5101(0x13f)]||0xa};_0x39dca9[_0x3e5101(0x147)](0xc8)[_0x3e5101(0x1bf)](_0x1bc390);}catch(_0x5850b5){console['error'](_0x3e5101(0x166),_0x5850b5),_0x39dca9[_0x3e5101(0x147)](0x1f4)[_0x3e5101(0x1bf)]({'message':'Error\x20retrieving\x20upload\x20configuration'});}}),module['exports']={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
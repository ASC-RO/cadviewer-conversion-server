function a3_0x16b9(){const _0x38375e=['2staynP','Initialization\x20configuration\x20file\x20not\x20found','exports','10cQaFQF','split','string','parse','join','Update\x20configuration\x20file\x20not\x20found','cvjs_debug','json','../libs/config','8hkpbxx','1207080aRUZuM','post','618147acgOtl','existsSync','json/property','pop','configData','20152VYhMvd','VizQuery_Space','1237875TyLEni','initialization','replace','../libs/autoexchange','Missing\x20required\x20parameters:\x20jsonConfigFilename,\x20contentLocation\x20or\x20configData','svg','695964xkHuJb','stringify','Error\x20saving\x20configuration\x20file:','VizQuery_ID','message','/config-file','update','352349qatfrd','dwg','express','body','status','../CADViewer_config.json','length','writeFileSync','Configuration\x20file\x20saved\x20successfully','3161284hBQKvW','extraction','error','createDrawing','8590hLkDQq','Failed\x20to\x20save\x20configuration\x20file','mkdirSync','slice'];a3_0x16b9=function(){return _0x38375e;};return a3_0x16b9();}const a3_0x43e15f=a3_0xb7c3;(function(_0x36ff69,_0x13390f){const _0x38164d=a3_0xb7c3,_0x3c4158=_0x36ff69();while(!![]){try{const _0x28efe7=parseInt(_0x38164d(0x1d2))/0x1+-parseInt(_0x38164d(0x1e3))/0x2*(-parseInt(_0x38164d(0x1c5))/0x3)+parseInt(_0x38164d(0x1cb))/0x4+parseInt(_0x38164d(0x1e6))/0x5*(parseInt(_0x38164d(0x1bc))/0x6)+parseInt(_0x38164d(0x1db))/0x7*(parseInt(_0x38164d(0x1bb))/0x8)+parseInt(_0x38164d(0x1be))/0x9+-parseInt(_0x38164d(0x1df))/0xa*(parseInt(_0x38164d(0x1c3))/0xb);if(_0x28efe7===_0x13390f)break;else _0x3c4158['push'](_0x3c4158['shift']());}catch(_0x569494){_0x3c4158['push'](_0x3c4158['shift']());}}}(a3_0x16b9,0x464bc));function a3_0xb7c3(_0x468350,_0x5c1837){const _0x16b913=a3_0x16b9();return a3_0xb7c3=function(_0xb7c3c4,_0x1c04dd){_0xb7c3c4=_0xb7c3c4-0x1b3;let _0x39d52b=_0x16b913[_0xb7c3c4];return _0x39d52b;},a3_0xb7c3(_0x468350,_0x5c1837);}const config=require(a3_0x43e15f(0x1d7)),cvjs_debug=config[a3_0x43e15f(0x1b8)],fs=require('fs'),path=require('path'),{dwgToSvg,initializeFloorplan,updateFloorplan,extractFloorplan}=require(a3_0x43e15f(0x1c8)),express=require(a3_0x43e15f(0x1d4)),router=express['Router'](),{getHotConfig}=require(a3_0x43e15f(0x1ba));router[a3_0x43e15f(0x1bd)]('',(_0x2cf096,_0x1b0b0f)=>{const _0x7dc2b6=a3_0x43e15f,{filename:_0x10d9e9,action:_0xabf0da,contentLocation:_0x4b9c8c,initOutputFilename:_0x4ddf03,initConfigFilename:_0x4ab0c8,updateOutputFilename:_0x198690,updateConfigFilename:_0x4f58ba,extractConfigFilename:_0x8a9efc,extractOutputFilename:_0x22fd54,drawingOutputFilename:_0x108916}=_0x2cf096[_0x7dc2b6(0x1d5)];_0xabf0da[_0x7dc2b6(0x1c6)]&&(_0xabf0da[_0x7dc2b6(0x1dc)]=![]);const _0x2d2751=_0x4b9c8c[_0x7dc2b6(0x1b3)]('/'),_0x106a7b=_0x2d2751[_0x2d2751[_0x7dc2b6(0x1d8)]-0x1],_0x518e61=_0x106a7b[_0x7dc2b6(0x1b3)]('.')[_0x7dc2b6(0x1c1)](),_0x304fd1=_0x2d2751[_0x7dc2b6(0x1e2)](0x0,-0x1)[_0x7dc2b6(0x1b6)]('/');if(_0xabf0da[_0x7dc2b6(0x1c6)]){if(!fs[_0x7dc2b6(0x1bf)](path[_0x7dc2b6(0x1b6)](_0x304fd1,_0x4ab0c8)))return _0x1b0b0f[_0x7dc2b6(0x1d6)](0x190)[_0x7dc2b6(0x1b9)]({'error':_0x7dc2b6(0x1e4)});}if(_0xabf0da[_0x7dc2b6(0x1d1)]){if(!fs['existsSync'](path['join'](_0x304fd1,_0x4f58ba)))return _0x1b0b0f[_0x7dc2b6(0x1d6)](0x190)[_0x7dc2b6(0x1b9)]({'error':_0x7dc2b6(0x1b7)});}if(_0xabf0da[_0x7dc2b6(0x1dc)]){if(!fs[_0x7dc2b6(0x1bf)](path[_0x7dc2b6(0x1b6)](_0x304fd1,_0x8a9efc)))return _0x1b0b0f['status'](0x190)[_0x7dc2b6(0x1b9)]({'error':'Extraction\x20configuration\x20file\x20not\x20found'});}const _0x5c8982=path[_0x7dc2b6(0x1b6)](_0x304fd1,''+_0x4ddf03);_0xabf0da['initialization']&&initializeFloorplan(_0x4b9c8c,_0x5c8982,{'cde':path[_0x7dc2b6(0x1b6)](_0x304fd1,_0x4ab0c8)});const _0x4b1d31=_0xabf0da[_0x7dc2b6(0x1c6)]?_0x5c8982:_0x4b9c8c,_0x22c9c2=path[_0x7dc2b6(0x1b6)](_0x304fd1,''+_0x198690);_0xabf0da[_0x7dc2b6(0x1d1)]&&updateFloorplan(_0x4b1d31,_0x22c9c2,{'du2':path[_0x7dc2b6(0x1b6)](_0x304fd1,_0x4f58ba)});const _0x4573bf=_0xabf0da['initialization']?_0x5c8982:_0xabf0da[_0x7dc2b6(0x1d1)]?_0x22c9c2:_0x4b9c8c,_0x3fefa4=path['join'](_0x304fd1[_0x7dc2b6(0x1c7)](_0x7dc2b6(0x1d3),_0x7dc2b6(0x1c0)),''+_0x22fd54);_0xabf0da[_0x7dc2b6(0x1dc)]&&(!fs[_0x7dc2b6(0x1bf)](_0x304fd1[_0x7dc2b6(0x1c7)](_0x7dc2b6(0x1d3),'json/property'))&&fs['mkdirSync'](_0x304fd1[_0x7dc2b6(0x1c7)](_0x7dc2b6(0x1d3),'json/property'),{'recursive':!![]}),extractFloorplan(_0x4573bf,_0x3fefa4,{'dx2':path[_0x7dc2b6(0x1b6)](_0x304fd1,_0x8a9efc)}));const _0x667345=_0xabf0da[_0x7dc2b6(0x1c6)]?_0x5c8982:_0xabf0da['update']?_0x22c9c2:_0x4b9c8c,_0x216ee7=path[_0x7dc2b6(0x1b6)](_0x304fd1['replace']('dwg',_0x7dc2b6(0x1ca)),''+_0x108916);_0xabf0da['createDrawing']&&(!fs['existsSync'](_0x304fd1['replace']('dwg',_0x7dc2b6(0x1ca)))&&fs[_0x7dc2b6(0x1e1)](_0x304fd1[_0x7dc2b6(0x1c7)]('dwg',_0x7dc2b6(0x1ca)),{'recursive':!![]}),dwgToSvg(_0x667345,_0x216ee7,{'f':'svg','last':'','extents':'','rl':_0x7dc2b6(0x1c4),'tl':_0x7dc2b6(0x1ce)})),_0x1b0b0f[_0x7dc2b6(0x1d6)](0xc8)[_0x7dc2b6(0x1b9)]({'initial_output_path':_0xabf0da[_0x7dc2b6(0x1c6)]?_0x5c8982:_0xabf0da[_0x7dc2b6(0x1d1)]?_0x22c9c2:_0x4b9c8c,'update_output_path':_0xabf0da[_0x7dc2b6(0x1d1)]?_0x22c9c2:null,'extracted_output_path':_0xabf0da['extraction']?_0x3fefa4:null,'drawing_output_path':_0xabf0da[_0x7dc2b6(0x1de)]?_0x216ee7:null});}),router[a3_0x43e15f(0x1bd)](a3_0x43e15f(0x1d0),(_0x498f05,_0x1ceec2)=>{const _0x3edff3=a3_0x43e15f,{jsonConfigFilename:_0x2e9140,contentLocation:_0x1a5c69}=_0x498f05[_0x3edff3(0x1d5)],_0x2e121b=_0x498f05['body'][_0x3edff3(0x1c2)];if(!_0x2e9140||!_0x1a5c69||!_0x2e121b)return _0x1ceec2[_0x3edff3(0x1d6)](0x190)[_0x3edff3(0x1b9)]({'error':_0x3edff3(0x1c9)});try{let _0x220929;try{_0x220929=typeof _0x2e121b===_0x3edff3(0x1b4)?JSON[_0x3edff3(0x1b5)](_0x2e121b):_0x2e121b;}catch(_0x28fdd6){return _0x1ceec2[_0x3edff3(0x1d6)](0x190)['json']({'error':'Invalid\x20JSON\x20data'});}const _0x1cd09d=_0x1a5c69[_0x3edff3(0x1b3)]('/'),_0x3df393=_0x1cd09d['slice'](0x0,-0x1)[_0x3edff3(0x1b6)]('/'),_0x2a0560=_0x2e9140,_0x10a95b=path[_0x3edff3(0x1b6)](_0x3df393,_0x2a0560);fs[_0x3edff3(0x1d9)](_0x10a95b,JSON[_0x3edff3(0x1cc)](_0x220929,null,0x2)),_0x1ceec2[_0x3edff3(0x1d6)](0xc8)[_0x3edff3(0x1b9)]({'success':!![],'message':_0x3edff3(0x1da),'filePath':_0x10a95b});}catch(_0x4ee5d4){console[_0x3edff3(0x1dd)](_0x3edff3(0x1cd),_0x4ee5d4),_0x1ceec2[_0x3edff3(0x1d6)](0x1f4)[_0x3edff3(0x1b9)]({'error':_0x3edff3(0x1e0),'details':_0x4ee5d4[_0x3edff3(0x1cf)]});}}),module[a3_0x43e15f(0x1e5)]=router;
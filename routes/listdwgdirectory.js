function a16_0x5630(_0x51b94a,_0xb9a986){const _0x1a0022=a16_0x1a00();return a16_0x5630=function(_0x56301d,_0x10ba25){_0x56301d=_0x56301d-0x1f3;let _0x1904b9=_0x1a0022[_0x56301d];return _0x1904b9;},a16_0x5630(_0x51b94a,_0xb9a986);}const a16_0x147911=a16_0x5630;(function(_0x10c874,_0x1c8436){const _0x5052c7=a16_0x5630,_0x4f6ca8=_0x10c874();while(!![]){try{const _0x4d071b=parseInt(_0x5052c7(0x220))/0x1*(parseInt(_0x5052c7(0x1f5))/0x2)+parseInt(_0x5052c7(0x230))/0x3+parseInt(_0x5052c7(0x224))/0x4*(parseInt(_0x5052c7(0x1fb))/0x5)+parseInt(_0x5052c7(0x215))/0x6*(-parseInt(_0x5052c7(0x20b))/0x7)+-parseInt(_0x5052c7(0x21a))/0x8+-parseInt(_0x5052c7(0x1f4))/0x9*(-parseInt(_0x5052c7(0x21d))/0xa)+-parseInt(_0x5052c7(0x222))/0xb;if(_0x4d071b===_0x1c8436)break;else _0x4f6ca8['push'](_0x4f6ca8['shift']());}catch(_0x2c07e7){_0x4f6ca8['push'](_0x4f6ca8['shift']());}}}(a16_0x1a00,0x624b2));const fs=require('fs'),path=require(a16_0x147911(0x1fe)),config=require(a16_0x147911(0x22a)),verifyTokenOptional=require('../libs/jwt')[a16_0x147911(0x216)],show_folders=![],express=require(a16_0x147911(0x218)),router=express['Router'](),conn=require(a16_0x147911(0x203)),{randomUUID}=require(a16_0x147911(0x227)),dir=a16_0x147911(0x202);!fs[a16_0x147911(0x201)](dir)&&fs[a16_0x147911(0x20e)](dir);const sortFoldersFirst=(_0x569f47,_0x3291c5)=>{const _0x531275=a16_0x147911;if(_0x569f47[_0x531275(0x217)]&&!_0x3291c5[_0x531275(0x217)])return-0x1;else return!_0x569f47[_0x531275(0x217)]&&_0x3291c5[_0x531275(0x217)]?0x1:0x0;},listFolderStructure=(_0x3e9f80,_0x2958b1='')=>{const _0x4b5434=a16_0x147911,_0x593d11=fs['readdirSync'](_0x3e9f80),_0xb8807a=[];return _0x593d11[_0x4b5434(0x1f9)](_0x5579dc=>{const _0x469a34=_0x4b5434,_0x5afef8=path[_0x469a34(0x221)](_0x3e9f80,_0x5579dc),_0x5142e3=fs[_0x469a34(0x22d)](_0x5afef8);if(_0x5142e3[_0x469a34(0x206)]()){if(config[_0x469a34(0x21b)]&&show_folders)console[_0x469a34(0x211)](_0x2958b1+_0x469a34(0x1f8)+_0x5579dc);const _0x1cf6b5=listFolderStructure(_0x5afef8,_0x2958b1+_0x469a34(0x214));_0xb8807a['push']({'name':_0x5579dc,'path':_0x5afef8,'size':_0x5142e3[_0x469a34(0x219)],'created':_0x5142e3[_0x469a34(0x204)],'modified':_0x5142e3[_0x469a34(0x1f3)],'isFolder':!![],'children':_0x1cf6b5});}else{_0xb8807a['push']({'name':_0x5579dc,'path':_0x5afef8,'size':_0x5142e3[_0x469a34(0x219)],'created':_0x5142e3[_0x469a34(0x204)],'modified':_0x5142e3['mtime'],'isFolder':![]});if(config['cvjs_debug']&&show_folders)console[_0x469a34(0x211)](_0x2958b1+_0x469a34(0x20a)+_0x5579dc);}}),_0xb8807a[_0x4b5434(0x226)](sortFoldersFirst);};function a16_0x1a00(){const _0x1b599e=['../CADViewer_config.json','execute','email','statSync','json','status','1815072VMhIqH','mtime','1292823RRyFFo','8bKBJEl','query','CADViewer_config.json','└──\x20','forEach','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','197255WzYxCE','./uploads/','Invalid\x20user','path','length','exports','existsSync','./uploads','../libs/mysql','birthtime','resolve','isDirectory','Error!\x20Something\x20went\x20wrong.','cvhs_debug:','loginFeatureEnabled','├──\x20','429289rlOmap','utf8','folderLocationDemoUser','mkdirSync','in\x20listFolderStructure\x20folderLocation=','folderLocation','log','send','false','\x20\x20\x20','24UsVwgS','verifyTokenOptional','children','express','size','2214560gPVSTs','cvjs_debug','parse','40RXkfAn','admin','dirname','175903PsLXpU','join','10977307GNrbxb','user','4nHroTm','folder_name','sort','crypto','main','promise'];a16_0x1a00=function(){return _0x1b599e;};return a16_0x1a00();}router['get']('',verifyTokenOptional,async(_0x942e49,_0x8f4af2)=>{const _0x170d07=a16_0x147911,_0x3d36f2=path[_0x170d07(0x221)](path[_0x170d07(0x21f)](require[_0x170d07(0x228)]['filename']),_0x170d07(0x1f7)),_0x538ee7=JSON[_0x170d07(0x21c)](fs['readFileSync'](_0x3d36f2,_0x170d07(0x20c))),_0x7bc32=_0x942e49[_0x170d07(0x1f6)][_0x170d07(0x209)];let _0x34156f=_0x538ee7[_0x170d07(0x20d)];_0x7bc32===_0x170d07(0x213)&&(_0x34156f=_0x538ee7[_0x170d07(0x210)]);console[_0x170d07(0x211)](_0x170d07(0x20f)+_0x34156f+'\x20show_folders:'+show_folders+_0x170d07(0x208)+config[_0x170d07(0x21b)]);if(_0x942e49['user']){let _0x15afbb;try{const [_0x4ff536]=await conn[_0x170d07(0x229)]()['execute']('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?',[_0x942e49[_0x170d07(0x223)][_0x170d07(0x22c)]]);_0x4ff536[_0x170d07(0x1ff)]>0x0&&(_0x15afbb=_0x4ff536[0x0]);}catch(_0x2f08a3){console[_0x170d07(0x211)]({'err':_0x2f08a3}),_0x8f4af2[_0x170d07(0x22f)](0x1f4)['json']({'error':_0x170d07(0x207)});return;}if(!_0x15afbb){_0x8f4af2[_0x170d07(0x22f)](0x191)[_0x170d07(0x22e)]({'error':_0x170d07(0x1fd)});return;}_0x15afbb['role']===_0x170d07(0x21e)&&(_0x34156f=_0x538ee7[_0x170d07(0x210)]);let _0x2d108a=_0x15afbb[_0x170d07(0x225)];if(!_0x2d108a){_0x2d108a=randomUUID();try{await conn[_0x170d07(0x229)]()[_0x170d07(0x22b)](_0x170d07(0x1fa),[_0x2d108a,_0x942e49[_0x170d07(0x223)]['email']]);}catch(_0x5749f3){console[_0x170d07(0x211)]({'err':_0x5749f3}),_0x8f4af2[_0x170d07(0x22f)](0x1f4)[_0x170d07(0x22e)]({'error':_0x170d07(0x207)});return;}}const _0x5dccf9=_0x170d07(0x1fc)+_0x2d108a;!fs['existsSync'](_0x5dccf9)&&fs['mkdirSync'](_0x5dccf9);const _0x5629cc=path[_0x170d07(0x205)](_0x5dccf9),_0x1fa59c=listFolderStructure(_0x5629cc);!fs[_0x170d07(0x201)](_0x34156f)&&fs['mkdirSync'](_0x34156f),dirs=[{'own':!![],'name':'MY\x20FOLDER','path':_0x5dccf9,'isFolder':!![],'children':_0x1fa59c},...listFolderStructure(_0x34156f)],_0x8f4af2[_0x170d07(0x212)](dirs);}else!fs[_0x170d07(0x201)](_0x34156f)&&fs[_0x170d07(0x20e)](_0x34156f),_0x8f4af2[_0x170d07(0x212)](listFolderStructure(_0x34156f));}),module[a16_0x147911(0x200)]=router;
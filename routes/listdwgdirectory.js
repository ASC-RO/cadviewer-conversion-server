function a16_0x7bfd(_0xa6dc89,_0x2cf574){const _0x536b7a=a16_0x536b();return a16_0x7bfd=function(_0x7bfd2a,_0x36f97d){_0x7bfd2a=_0x7bfd2a-0x19e;let _0x58646c=_0x536b7a[_0x7bfd2a];return _0x58646c;},a16_0x7bfd(_0xa6dc89,_0x2cf574);}const a16_0x28a376=a16_0x7bfd;(function(_0x13e419,_0x19320b){const _0xe5583f=a16_0x7bfd,_0x4659a8=_0x13e419();while(!![]){try{const _0x1765e4=parseInt(_0xe5583f(0x1cc))/0x1+parseInt(_0xe5583f(0x1c6))/0x2+-parseInt(_0xe5583f(0x1b7))/0x3+-parseInt(_0xe5583f(0x1ac))/0x4+parseInt(_0xe5583f(0x1b8))/0x5+parseInt(_0xe5583f(0x1a6))/0x6*(parseInt(_0xe5583f(0x1b2))/0x7)+-parseInt(_0xe5583f(0x1a3))/0x8;if(_0x1765e4===_0x19320b)break;else _0x4659a8['push'](_0x4659a8['shift']());}catch(_0x5abff2){_0x4659a8['push'](_0x4659a8['shift']());}}}(a16_0x536b,0xb7dd5));const fs=require('fs'),path=require(a16_0x28a376(0x1bb)),config=require('../CADViewer_config.json'),verifyTokenOptional=require(a16_0x28a376(0x1ad))[a16_0x28a376(0x1a2)],show_folders=![],express=require(a16_0x28a376(0x1cb)),router=express[a16_0x28a376(0x1c5)](),conn=require(a16_0x28a376(0x1ae)),{randomUUID}=require(a16_0x28a376(0x1ba)),dir=a16_0x28a376(0x1b3);!fs['existsSync'](dir)&&fs['mkdirSync'](dir);function a16_0x536b(){const _0xba424=['forEach','Router','1085450VMsZCl','cvhs_debug:','children','main','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','express','634340gQkbyy','utf8','cvjs_debug','promise','├──\x20','existsSync','size','email','sort','└──\x20','push','MY\x20FOLDER','filename','exports','resolve','admin','user','verifyTokenOptional','17324816QTpFMD','folder_name','false','60wpvikN','parse','dirname','Error!\x20Something\x20went\x20wrong.','mtime','in\x20listFolderStructure\x20folderLocation=','420364nQzWgJ','../libs/jwt','../libs/mysql','mkdirSync','readdirSync','execute','574567JMtWMN','./uploads','Invalid\x20user','folderLocation','birthtime','1117713RlssuC','6992490xuEwrJ','status','crypto','path','query','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','isDirectory','loginFeatureEnabled','send','log','json','join'];a16_0x536b=function(){return _0xba424;};return a16_0x536b();}const sortFoldersFirst=(_0x7cade8,_0x5065ff)=>{const _0x4fa812=a16_0x28a376;if(_0x7cade8[_0x4fa812(0x1c8)]&&!_0x5065ff[_0x4fa812(0x1c8)])return-0x1;else return!_0x7cade8['children']&&_0x5065ff[_0x4fa812(0x1c8)]?0x1:0x0;},listFolderStructure=(_0x53f4c5,_0x312db3='')=>{const _0x240f6d=a16_0x28a376,_0x4fe46f=fs[_0x240f6d(0x1b0)](_0x53f4c5),_0x54ef09=[];return _0x4fe46f[_0x240f6d(0x1c4)](_0x2e2320=>{const _0x5f1250=_0x240f6d,_0x342827=path['join'](_0x53f4c5,_0x2e2320),_0x1c46dd=fs['statSync'](_0x342827);if(_0x1c46dd[_0x5f1250(0x1be)]()){if(config[_0x5f1250(0x1ce)]&&show_folders)console[_0x5f1250(0x1c1)](_0x312db3+_0x5f1250(0x1d5)+_0x2e2320);const _0x578573=listFolderStructure(_0x342827,_0x312db3+'\x20\x20\x20');_0x54ef09[_0x5f1250(0x1d6)]({'name':_0x2e2320,'path':_0x342827,'size':_0x1c46dd[_0x5f1250(0x1d2)],'created':_0x1c46dd[_0x5f1250(0x1b6)],'modified':_0x1c46dd[_0x5f1250(0x1aa)],'isFolder':!![],'children':_0x578573});}else{_0x54ef09[_0x5f1250(0x1d6)]({'name':_0x2e2320,'path':_0x342827,'size':_0x1c46dd['size'],'created':_0x1c46dd[_0x5f1250(0x1b6)],'modified':_0x1c46dd[_0x5f1250(0x1aa)],'isFolder':![]});if(config['cvjs_debug']&&show_folders)console[_0x5f1250(0x1c1)](_0x312db3+_0x5f1250(0x1d0)+_0x2e2320);}}),_0x54ef09[_0x240f6d(0x1d4)](sortFoldersFirst);};router['get']('',verifyTokenOptional,async(_0x1268c3,_0x43f33e)=>{const _0x352d2e=a16_0x28a376,_0x59196b=path[_0x352d2e(0x1c3)](path[_0x352d2e(0x1a8)](require[_0x352d2e(0x1c9)][_0x352d2e(0x1d8)]),'CADViewer_config.json'),_0xc91f93=JSON[_0x352d2e(0x1a7)](fs['readFileSync'](_0x59196b,_0x352d2e(0x1cd))),_0x111f53=_0x1268c3[_0x352d2e(0x1bc)][_0x352d2e(0x1bf)];let _0x2fa887=_0xc91f93['folderLocationDemoUser'];_0x111f53===_0x352d2e(0x1a5)&&(_0x2fa887=_0xc91f93[_0x352d2e(0x1b5)]);console[_0x352d2e(0x1c1)](_0x352d2e(0x1ab)+_0x2fa887+'\x20show_folders:'+show_folders+_0x352d2e(0x1c7)+config['cvjs_debug']);if(_0x1268c3[_0x352d2e(0x1a1)]){let _0x21793a;try{const [_0x4c9a9f]=await conn['promise']()['execute'](_0x352d2e(0x1bd),[_0x1268c3[_0x352d2e(0x1a1)][_0x352d2e(0x1d3)]]);_0x4c9a9f['length']>0x0&&(_0x21793a=_0x4c9a9f[0x0]);}catch(_0x44803e){console[_0x352d2e(0x1c1)]({'err':_0x44803e}),_0x43f33e[_0x352d2e(0x1b9)](0x1f4)[_0x352d2e(0x1c2)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x21793a){_0x43f33e[_0x352d2e(0x1b9)](0x191)[_0x352d2e(0x1c2)]({'error':_0x352d2e(0x1b4)});return;}_0x21793a['role']===_0x352d2e(0x1a0)&&(_0x2fa887=_0xc91f93[_0x352d2e(0x1b5)]);let _0x51701a=_0x21793a[_0x352d2e(0x1a4)];if(!_0x51701a){_0x51701a=randomUUID();try{await conn[_0x352d2e(0x1cf)]()[_0x352d2e(0x1b1)](_0x352d2e(0x1ca),[_0x51701a,_0x1268c3[_0x352d2e(0x1a1)][_0x352d2e(0x1d3)]]);}catch(_0x2af7ba){console[_0x352d2e(0x1c1)]({'err':_0x2af7ba}),_0x43f33e[_0x352d2e(0x1b9)](0x1f4)['json']({'error':_0x352d2e(0x1a9)});return;}}const _0x546577='./uploads/'+_0x51701a;!fs[_0x352d2e(0x1d1)](_0x546577)&&fs[_0x352d2e(0x1af)](_0x546577);const _0x2b854b=path[_0x352d2e(0x19f)](_0x546577),_0x22c48e=listFolderStructure(_0x2b854b);!fs[_0x352d2e(0x1d1)](_0x2fa887)&&fs['mkdirSync'](_0x2fa887),dirs=[{'own':!![],'name':_0x352d2e(0x1d7),'path':_0x546577,'isFolder':!![],'children':_0x22c48e},...listFolderStructure(_0x2fa887)],_0x43f33e[_0x352d2e(0x1c0)](dirs);}else!fs[_0x352d2e(0x1d1)](_0x2fa887)&&fs['mkdirSync'](_0x2fa887),_0x43f33e['send'](listFolderStructure(_0x2fa887));}),module[a16_0x28a376(0x19e)]=router;
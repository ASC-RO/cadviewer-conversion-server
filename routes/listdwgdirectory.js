const a16_0x4ad289=a16_0x2ed5;(function(_0x5b1369,_0x17e82a){const _0x157feb=a16_0x2ed5,_0x12445b=_0x5b1369();while(!![]){try{const _0x43a5bb=-parseInt(_0x157feb(0x1ed))/0x1*(-parseInt(_0x157feb(0x1c7))/0x2)+-parseInt(_0x157feb(0x1cb))/0x3+-parseInt(_0x157feb(0x1ce))/0x4+parseInt(_0x157feb(0x1eb))/0x5*(parseInt(_0x157feb(0x1f5))/0x6)+-parseInt(_0x157feb(0x1d7))/0x7*(parseInt(_0x157feb(0x1da))/0x8)+parseInt(_0x157feb(0x1d6))/0x9*(-parseInt(_0x157feb(0x1d5))/0xa)+-parseInt(_0x157feb(0x1e8))/0xb*(-parseInt(_0x157feb(0x1ea))/0xc);if(_0x43a5bb===_0x17e82a)break;else _0x12445b['push'](_0x12445b['shift']());}catch(_0x2123b0){_0x12445b['push'](_0x12445b['shift']());}}}(a16_0x2b0a,0x779dd));const fs=require('fs'),path=require(a16_0x4ad289(0x1bb)),config=require(a16_0x4ad289(0x1db)),verifyTokenOptional=require(a16_0x4ad289(0x1be))[a16_0x4ad289(0x1e4)],show_folders=![],express=require(a16_0x4ad289(0x1e6)),router=express[a16_0x4ad289(0x1f4)](),conn=require(a16_0x4ad289(0x1d3)),{randomUUID}=require(a16_0x4ad289(0x1f0)),dir=a16_0x4ad289(0x1c2);!fs[a16_0x4ad289(0x1c9)](dir)&&fs[a16_0x4ad289(0x1cf)](dir);function a16_0x2ed5(_0x2c454d,_0x2c8d32){const _0x2b0a02=a16_0x2b0a();return a16_0x2ed5=function(_0x2ed5d1,_0x53558b){_0x2ed5d1=_0x2ed5d1-0x1b4;let _0x3e632b=_0x2b0a02[_0x2ed5d1];return _0x3e632b;},a16_0x2ed5(_0x2c454d,_0x2c8d32);}function a16_0x2b0a(){const _0x60618a=['user','\x20\x20\x20','verifyTokenOptional','folder_name','express','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','4745257VgRlkE','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','48FXMdmL','89065pBWJYp','role','3VpRJAx','./uploads/','email','crypto','send','├──\x20','mtime','Router','24bXtwkF','join','size','status','utf8','cvhs_debug:','readFileSync','loginFeatureEnabled','isDirectory','path','birthtime','get','../libs/jwt','filename','children','json','./uploads','folderLocationDemoUser','statSync','main','parse','599954shPQcb','exports','existsSync','cvjs_debug','2281827mruDGr','readdirSync','log','2584380IdZbsl','mkdirSync','length','push','execute','../libs/mysql','dirname','230zGDaQp','61029PRYvaY','21cCICbF','sort','Error!\x20Something\x20went\x20wrong.','1717640isalgy','../CADViewer_config.json','CADViewer_config.json','MY\x20FOLDER','admin','folderLocation','\x20show_folders:','in\x20listFolderStructure\x20folderLocation='];a16_0x2b0a=function(){return _0x60618a;};return a16_0x2b0a();}const sortFoldersFirst=(_0x94f4d5,_0x4a8823)=>{const _0x2711dd=a16_0x4ad289;if(_0x94f4d5[_0x2711dd(0x1c0)]&&!_0x4a8823['children'])return-0x1;else return!_0x94f4d5[_0x2711dd(0x1c0)]&&_0x4a8823[_0x2711dd(0x1c0)]?0x1:0x0;},listFolderStructure=(_0x4af8fb,_0x211189='')=>{const _0x4645af=a16_0x4ad289,_0x1705ab=fs[_0x4645af(0x1cc)](_0x4af8fb),_0x32788c=[];return _0x1705ab['forEach'](_0x394b58=>{const _0x3191f1=_0x4645af,_0x5520c6=path['join'](_0x4af8fb,_0x394b58),_0x3c46d4=fs[_0x3191f1(0x1c4)](_0x5520c6);if(_0x3c46d4[_0x3191f1(0x1ba)]()){if(config[_0x3191f1(0x1ca)]&&show_folders)console[_0x3191f1(0x1cd)](_0x211189+'└──\x20'+_0x394b58);const _0x3d069c=listFolderStructure(_0x5520c6,_0x211189+_0x3191f1(0x1e3));_0x32788c['push']({'name':_0x394b58,'path':_0x5520c6,'size':_0x3c46d4[_0x3191f1(0x1b4)],'created':_0x3c46d4[_0x3191f1(0x1bc)],'modified':_0x3c46d4[_0x3191f1(0x1f3)],'isFolder':!![],'children':_0x3d069c});}else{_0x32788c[_0x3191f1(0x1d1)]({'name':_0x394b58,'path':_0x5520c6,'size':_0x3c46d4[_0x3191f1(0x1b4)],'created':_0x3c46d4[_0x3191f1(0x1bc)],'modified':_0x3c46d4[_0x3191f1(0x1f3)],'isFolder':![]});if(config['cvjs_debug']&&show_folders)console[_0x3191f1(0x1cd)](_0x211189+_0x3191f1(0x1f2)+_0x394b58);}}),_0x32788c[_0x4645af(0x1d8)](sortFoldersFirst);};router[a16_0x4ad289(0x1bd)]('',verifyTokenOptional,async(_0x3f877b,_0x334b8d)=>{const _0x20e426=a16_0x4ad289,_0x3c008e=path[_0x20e426(0x1f6)](path[_0x20e426(0x1d4)](require[_0x20e426(0x1c5)][_0x20e426(0x1bf)]),_0x20e426(0x1dc)),_0x4eb0e9=JSON[_0x20e426(0x1c6)](fs[_0x20e426(0x1b8)](_0x3c008e,_0x20e426(0x1b6))),_0x754405=_0x3f877b['query'][_0x20e426(0x1b9)];let _0x522fde=_0x4eb0e9[_0x20e426(0x1c3)];_0x754405==='false'&&(_0x522fde=_0x4eb0e9[_0x20e426(0x1df)]);console[_0x20e426(0x1cd)](_0x20e426(0x1e1)+_0x522fde+_0x20e426(0x1e0)+show_folders+_0x20e426(0x1b7)+config[_0x20e426(0x1ca)]);if(_0x3f877b[_0x20e426(0x1e2)]){let _0x4d5287;try{const [_0x1c459a]=await conn['promise']()[_0x20e426(0x1d2)](_0x20e426(0x1e7),[_0x3f877b[_0x20e426(0x1e2)][_0x20e426(0x1ef)]]);_0x1c459a[_0x20e426(0x1d0)]>0x0&&(_0x4d5287=_0x1c459a[0x0]);}catch(_0x3376ad){console[_0x20e426(0x1cd)]({'err':_0x3376ad}),_0x334b8d['status'](0x1f4)[_0x20e426(0x1c1)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x4d5287){_0x334b8d[_0x20e426(0x1b5)](0x191)['json']({'error':'Invalid\x20user'});return;}_0x4d5287[_0x20e426(0x1ec)]===_0x20e426(0x1de)&&(_0x522fde=_0x4eb0e9[_0x20e426(0x1df)]);let _0x565569=_0x4d5287[_0x20e426(0x1e5)];if(!_0x565569){_0x565569=randomUUID();try{await conn['promise']()[_0x20e426(0x1d2)](_0x20e426(0x1e9),[_0x565569,_0x3f877b[_0x20e426(0x1e2)][_0x20e426(0x1ef)]]);}catch(_0x70787e){console[_0x20e426(0x1cd)]({'err':_0x70787e}),_0x334b8d[_0x20e426(0x1b5)](0x1f4)[_0x20e426(0x1c1)]({'error':_0x20e426(0x1d9)});return;}}const _0x45bc10=_0x20e426(0x1ee)+_0x565569;!fs[_0x20e426(0x1c9)](_0x45bc10)&&fs[_0x20e426(0x1cf)](_0x45bc10);const _0x1d556f=path['resolve'](_0x45bc10),_0x11e92c=listFolderStructure(_0x1d556f);!fs[_0x20e426(0x1c9)](_0x522fde)&&fs[_0x20e426(0x1cf)](_0x522fde),dirs=[{'own':!![],'name':_0x20e426(0x1dd),'path':_0x45bc10,'isFolder':!![],'children':_0x11e92c},...listFolderStructure(_0x522fde)],_0x334b8d[_0x20e426(0x1f1)](dirs);}else!fs[_0x20e426(0x1c9)](_0x522fde)&&fs[_0x20e426(0x1cf)](_0x522fde),_0x334b8d['send'](listFolderStructure(_0x522fde));}),module[a16_0x4ad289(0x1c8)]=router;
const a16_0x36ca0b=a16_0x4e2e;(function(_0x445501,_0x5b3447){const _0x2d33d4=a16_0x4e2e,_0x2bf3aa=_0x445501();while(!![]){try{const _0x596fc8=parseInt(_0x2d33d4(0x136))/0x1*(parseInt(_0x2d33d4(0x13e))/0x2)+-parseInt(_0x2d33d4(0x160))/0x3*(-parseInt(_0x2d33d4(0x15c))/0x4)+-parseInt(_0x2d33d4(0x167))/0x5*(-parseInt(_0x2d33d4(0x12c))/0x6)+parseInt(_0x2d33d4(0x158))/0x7*(parseInt(_0x2d33d4(0x150))/0x8)+parseInt(_0x2d33d4(0x130))/0x9*(parseInt(_0x2d33d4(0x15a))/0xa)+-parseInt(_0x2d33d4(0x12d))/0xb*(parseInt(_0x2d33d4(0x138))/0xc)+-parseInt(_0x2d33d4(0x156))/0xd;if(_0x596fc8===_0x5b3447)break;else _0x2bf3aa['push'](_0x2bf3aa['shift']());}catch(_0x400ac5){_0x2bf3aa['push'](_0x2bf3aa['shift']());}}}(a16_0x1941,0x53d01));const fs=require('fs'),path=require(a16_0x36ca0b(0x145)),config=require(a16_0x36ca0b(0x161)),verifyTokenOptional=require(a16_0x36ca0b(0x131))['verifyTokenOptional'],show_folders=![],express=require(a16_0x36ca0b(0x15b)),router=express[a16_0x36ca0b(0x140)](),conn=require(a16_0x36ca0b(0x13b)),{randomUUID}=require(a16_0x36ca0b(0x15f)),dir=a16_0x36ca0b(0x154);!fs[a16_0x36ca0b(0x13c)](dir)&&fs[a16_0x36ca0b(0x152)](dir);function a16_0x1941(){const _0x25a118=['mtime','user','512iWXCyJ','children','mkdirSync','role','./uploads','json','9946131zpCwqh','admin','45703VlYptM','push','10KiDHuA','express','897564SZeAVV','parse','├──\x20','crypto','3FJVsQM','../CADViewer_config.json','length','MY\x20FOLDER','readdirSync','size','exports','5WPGHjV','sort','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','execute','286578SXYdgE','11KnbgGi','folder_name','folderLocation','938439sJmYRA','../libs/jwt','statSync','loginFeatureEnabled','forEach','main','342208rWISNN','email','4443756cpKfkV','join','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','../libs/mysql','existsSync','status','4pSPZXr','cvjs_debug','Router','filename','./uploads/','readFileSync','folderLocationDemoUser','path','\x20show_folders:','log','birthtime','\x20\x20\x20','promise','send','└──\x20','false'];a16_0x1941=function(){return _0x25a118;};return a16_0x1941();}function a16_0x4e2e(_0x48d730,_0x583365){const _0x1941d1=a16_0x1941();return a16_0x4e2e=function(_0x4e2e32,_0x23d3f2){_0x4e2e32=_0x4e2e32-0x12b;let _0x659dee=_0x1941d1[_0x4e2e32];return _0x659dee;},a16_0x4e2e(_0x48d730,_0x583365);}const sortFoldersFirst=(_0xabf002,_0x40383b)=>{const _0x2772c6=a16_0x36ca0b;if(_0xabf002[_0x2772c6(0x151)]&&!_0x40383b[_0x2772c6(0x151)])return-0x1;else return!_0xabf002['children']&&_0x40383b['children']?0x1:0x0;},listFolderStructure=(_0x9d9b90,_0x20680c='')=>{const _0x4ff80f=a16_0x36ca0b,_0x578430=fs[_0x4ff80f(0x164)](_0x9d9b90),_0x58c7a6=[];return _0x578430[_0x4ff80f(0x134)](_0x38c58b=>{const _0xbef33a=_0x4ff80f,_0x235f41=path[_0xbef33a(0x139)](_0x9d9b90,_0x38c58b),_0x220bca=fs[_0xbef33a(0x132)](_0x235f41);if(_0x220bca['isDirectory']()){if(config[_0xbef33a(0x13f)]&&show_folders)console['log'](_0x20680c+_0xbef33a(0x14c)+_0x38c58b);const _0x1f0fa8=listFolderStructure(_0x235f41,_0x20680c+_0xbef33a(0x149));_0x58c7a6[_0xbef33a(0x159)]({'name':_0x38c58b,'path':_0x235f41,'size':_0x220bca[_0xbef33a(0x165)],'created':_0x220bca[_0xbef33a(0x148)],'modified':_0x220bca[_0xbef33a(0x14e)],'isFolder':!![],'children':_0x1f0fa8});}else{_0x58c7a6[_0xbef33a(0x159)]({'name':_0x38c58b,'path':_0x235f41,'size':_0x220bca['size'],'created':_0x220bca[_0xbef33a(0x148)],'modified':_0x220bca[_0xbef33a(0x14e)],'isFolder':![]});if(config[_0xbef33a(0x13f)]&&show_folders)console[_0xbef33a(0x147)](_0x20680c+_0xbef33a(0x15e)+_0x38c58b);}}),_0x58c7a6[_0x4ff80f(0x168)](sortFoldersFirst);};router['get']('',verifyTokenOptional,async(_0x59022e,_0x3eef46)=>{const _0x1b9e15=a16_0x36ca0b,_0x2c81a1=path['join'](path['dirname'](require[_0x1b9e15(0x135)][_0x1b9e15(0x141)]),'CADViewer_config.json'),_0x314550=JSON[_0x1b9e15(0x15d)](fs[_0x1b9e15(0x143)](_0x2c81a1,'utf8')),_0x3cd715=_0x59022e['query'][_0x1b9e15(0x133)];let _0x39e2e4=_0x314550[_0x1b9e15(0x144)];_0x3cd715===_0x1b9e15(0x14d)&&(_0x39e2e4=_0x314550[_0x1b9e15(0x12f)]);console[_0x1b9e15(0x147)]('in\x20listFolderStructure\x20folderLocation='+_0x39e2e4+_0x1b9e15(0x146)+show_folders+'cvhs_debug:'+config['cvjs_debug']);if(_0x59022e[_0x1b9e15(0x14f)]){let _0x386fbb;try{const [_0x33b448]=await conn[_0x1b9e15(0x14a)]()[_0x1b9e15(0x12b)](_0x1b9e15(0x13a),[_0x59022e['user']['email']]);_0x33b448[_0x1b9e15(0x162)]>0x0&&(_0x386fbb=_0x33b448[0x0]);}catch(_0x2951a5){console[_0x1b9e15(0x147)]({'err':_0x2951a5}),_0x3eef46['status'](0x1f4)[_0x1b9e15(0x155)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x386fbb){_0x3eef46[_0x1b9e15(0x13d)](0x191)['json']({'error':'Invalid\x20user'});return;}_0x386fbb[_0x1b9e15(0x153)]===_0x1b9e15(0x157)&&(_0x39e2e4=_0x314550[_0x1b9e15(0x12f)]);let _0x34a464=_0x386fbb[_0x1b9e15(0x12e)];if(!_0x34a464){_0x34a464=randomUUID();try{await conn[_0x1b9e15(0x14a)]()['execute'](_0x1b9e15(0x169),[_0x34a464,_0x59022e[_0x1b9e15(0x14f)][_0x1b9e15(0x137)]]);}catch(_0x47f08f){console['log']({'err':_0x47f08f}),_0x3eef46['status'](0x1f4)[_0x1b9e15(0x155)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}const _0x59d57d=_0x1b9e15(0x142)+_0x34a464;!fs[_0x1b9e15(0x13c)](_0x59d57d)&&fs[_0x1b9e15(0x152)](_0x59d57d);const _0x5f4a25=path['resolve'](_0x59d57d),_0xa58f60=listFolderStructure(_0x5f4a25);!fs[_0x1b9e15(0x13c)](_0x39e2e4)&&fs[_0x1b9e15(0x152)](_0x39e2e4),dirs=[{'own':!![],'name':_0x1b9e15(0x163),'path':_0x59d57d,'isFolder':!![],'children':_0xa58f60},...listFolderStructure(_0x39e2e4)],_0x3eef46[_0x1b9e15(0x14b)](dirs);}else!fs['existsSync'](_0x39e2e4)&&fs[_0x1b9e15(0x152)](_0x39e2e4),_0x3eef46[_0x1b9e15(0x14b)](listFolderStructure(_0x39e2e4));}),module[a16_0x36ca0b(0x166)]=router;
function a16_0x5e51(_0x2dda65,_0x1f6410){const _0x33c812=a16_0x33c8();return a16_0x5e51=function(_0x5e51a9,_0x395a5f){_0x5e51a9=_0x5e51a9-0x13a;let _0x4fdfcd=_0x33c812[_0x5e51a9];return _0x4fdfcd;},a16_0x5e51(_0x2dda65,_0x1f6410);}const a16_0x26b25e=a16_0x5e51;(function(_0x2967e8,_0x3e93ae){const _0x22ffbf=a16_0x5e51,_0x177b7d=_0x2967e8();while(!![]){try{const _0xf4d8f0=parseInt(_0x22ffbf(0x173))/0x1*(-parseInt(_0x22ffbf(0x15a))/0x2)+parseInt(_0x22ffbf(0x170))/0x3+-parseInt(_0x22ffbf(0x154))/0x4+-parseInt(_0x22ffbf(0x16d))/0x5+-parseInt(_0x22ffbf(0x16b))/0x6+-parseInt(_0x22ffbf(0x15f))/0x7+parseInt(_0x22ffbf(0x13f))/0x8;if(_0xf4d8f0===_0x3e93ae)break;else _0x177b7d['push'](_0x177b7d['shift']());}catch(_0x10d652){_0x177b7d['push'](_0x177b7d['shift']());}}}(a16_0x33c8,0xdcca6));const fs=require('fs'),path=require(a16_0x26b25e(0x16f)),config=require(a16_0x26b25e(0x151)),verifyTokenOptional=require(a16_0x26b25e(0x166))[a16_0x26b25e(0x13a)],show_folders=![],express=require(a16_0x26b25e(0x163)),router=express[a16_0x26b25e(0x15e)](),conn=require('../libs/mysql'),{randomUUID}=require(a16_0x26b25e(0x153)),dir=a16_0x26b25e(0x169);!fs[a16_0x26b25e(0x155)](dir)&&fs[a16_0x26b25e(0x140)](dir);const sortFoldersFirst=(_0x1ae6fd,_0x477b7c)=>{const _0x31bac5=a16_0x26b25e;if(_0x1ae6fd['children']&&!_0x477b7c['children'])return-0x1;else return!_0x1ae6fd[_0x31bac5(0x168)]&&_0x477b7c[_0x31bac5(0x168)]?0x1:0x0;},listFolderStructure=(_0x538249,_0x2b1e5f='')=>{const _0x445b06=a16_0x26b25e,_0x30f549=fs[_0x445b06(0x14e)](_0x538249),_0x17f45f=[];return _0x30f549[_0x445b06(0x16a)](_0x2d1e36=>{const _0x277d07=_0x445b06,_0x37f82f=path[_0x277d07(0x16c)](_0x538249,_0x2d1e36),_0x4fd4b7=fs[_0x277d07(0x160)](_0x37f82f);if(_0x4fd4b7[_0x277d07(0x14b)]()){if(config[_0x277d07(0x16e)]&&show_folders)console[_0x277d07(0x13e)](_0x2b1e5f+'└──\x20'+_0x2d1e36);const _0x400a76=listFolderStructure(_0x37f82f,_0x2b1e5f+_0x277d07(0x164));_0x17f45f[_0x277d07(0x15c)]({'name':_0x2d1e36,'path':_0x37f82f,'size':_0x4fd4b7[_0x277d07(0x157)],'created':_0x4fd4b7[_0x277d07(0x13c)],'modified':_0x4fd4b7[_0x277d07(0x14f)],'isFolder':!![],'children':_0x400a76});}else{_0x17f45f[_0x277d07(0x15c)]({'name':_0x2d1e36,'path':_0x37f82f,'size':_0x4fd4b7[_0x277d07(0x157)],'created':_0x4fd4b7[_0x277d07(0x13c)],'modified':_0x4fd4b7[_0x277d07(0x14f)],'isFolder':![]});if(config['cvjs_debug']&&show_folders)console[_0x277d07(0x13e)](_0x2b1e5f+_0x277d07(0x15d)+_0x2d1e36);}}),_0x17f45f['sort'](sortFoldersFirst);};function a16_0x33c8(){const _0x45f2a7=['express','\x20\x20\x20','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','../libs/jwt','\x20show_folders:','children','./uploads','forEach','5050386vgtkWb','join','1847335gOiUhK','cvjs_debug','path','2021388AbBBuP','status','readFileSync','104341OeHVPw','user','verifyTokenOptional','Invalid\x20user','birthtime','exports','log','44755480LyiHgx','mkdirSync','folderLocation','admin','filename','Error!\x20Something\x20went\x20wrong.','main','json','folderLocationDemoUser','promise','length','in\x20listFolderStructure\x20folderLocation=','isDirectory','loginFeatureEnabled','resolve','readdirSync','mtime','folder_name','../CADViewer_config.json','cvhs_debug:','crypto','5636720sbFoyn','existsSync','CADViewer_config.json','size','false','email','32TavEWB','execute','push','├──\x20','Router','7518273uibcIP','statSync','parse','send'];a16_0x33c8=function(){return _0x45f2a7;};return a16_0x33c8();}router['get']('',verifyTokenOptional,async(_0x368c54,_0x1bcce3)=>{const _0x198f69=a16_0x26b25e,_0x3e74e9=path['join'](path['dirname'](require[_0x198f69(0x145)][_0x198f69(0x143)]),_0x198f69(0x156)),_0xd12304=JSON[_0x198f69(0x161)](fs[_0x198f69(0x172)](_0x3e74e9,'utf8')),_0x2915f4=_0x368c54['query'][_0x198f69(0x14c)];let _0x408ae0=_0xd12304[_0x198f69(0x147)];_0x2915f4===_0x198f69(0x158)&&(_0x408ae0=_0xd12304[_0x198f69(0x141)]);console['log'](_0x198f69(0x14a)+_0x408ae0+_0x198f69(0x167)+show_folders+_0x198f69(0x152)+config['cvjs_debug']);if(_0x368c54[_0x198f69(0x174)]){let _0x1d6c1c;try{const [_0x50f811]=await conn[_0x198f69(0x148)]()[_0x198f69(0x15b)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?',[_0x368c54[_0x198f69(0x174)][_0x198f69(0x159)]]);_0x50f811[_0x198f69(0x149)]>0x0&&(_0x1d6c1c=_0x50f811[0x0]);}catch(_0x5d29c5){console[_0x198f69(0x13e)]({'err':_0x5d29c5}),_0x1bcce3[_0x198f69(0x171)](0x1f4)[_0x198f69(0x146)]({'error':_0x198f69(0x144)});return;}if(!_0x1d6c1c){_0x1bcce3[_0x198f69(0x171)](0x191)[_0x198f69(0x146)]({'error':_0x198f69(0x13b)});return;}_0x1d6c1c['role']===_0x198f69(0x142)&&(_0x408ae0=_0xd12304[_0x198f69(0x141)]);let _0x5d8458=_0x1d6c1c[_0x198f69(0x150)];if(!_0x5d8458){_0x5d8458=randomUUID();try{await conn[_0x198f69(0x148)]()['execute'](_0x198f69(0x165),[_0x5d8458,_0x368c54['user'][_0x198f69(0x159)]]);}catch(_0x41d1ec){console['log']({'err':_0x41d1ec}),_0x1bcce3[_0x198f69(0x171)](0x1f4)['json']({'error':_0x198f69(0x144)});return;}}const _0x396152='./uploads/'+_0x5d8458;!fs[_0x198f69(0x155)](_0x396152)&&fs['mkdirSync'](_0x396152);const _0x1a4659=path[_0x198f69(0x14d)](_0x396152),_0x24d2a7=listFolderStructure(_0x1a4659);!fs[_0x198f69(0x155)](_0x408ae0)&&fs['mkdirSync'](_0x408ae0),dirs=[{'own':!![],'name':'MY\x20FOLDER','path':_0x396152,'isFolder':!![],'children':_0x24d2a7},...listFolderStructure(_0x408ae0)],_0x1bcce3[_0x198f69(0x162)](dirs);}else!fs['existsSync'](_0x408ae0)&&fs[_0x198f69(0x140)](_0x408ae0),_0x1bcce3[_0x198f69(0x162)](listFolderStructure(_0x408ae0));}),module[a16_0x26b25e(0x13d)]=router;
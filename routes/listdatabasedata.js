const a13_0x26d8e2=a13_0x57cb;(function(_0x201bee,_0x2350e6){const _0x3b096f=a13_0x57cb,_0x179b8d=_0x201bee();while(!![]){try{const _0x134455=-parseInt(_0x3b096f(0x198))/0x1*(parseInt(_0x3b096f(0x18a))/0x2)+-parseInt(_0x3b096f(0x18b))/0x3+-parseInt(_0x3b096f(0x19c))/0x4*(parseInt(_0x3b096f(0x1a4))/0x5)+-parseInt(_0x3b096f(0x1a6))/0x6+parseInt(_0x3b096f(0x199))/0x7+-parseInt(_0x3b096f(0x1a8))/0x8+parseInt(_0x3b096f(0x19e))/0x9;if(_0x134455===_0x2350e6)break;else _0x179b8d['push'](_0x179b8d['shift']());}catch(_0x103a33){_0x179b8d['push'](_0x179b8d['shift']());}}}(a13_0x41b2,0x9d19c));function a13_0x57cb(_0x2b8ef5,_0x23a0a2){const _0x41b27d=a13_0x41b2();return a13_0x57cb=function(_0x57cbb2,_0x492ea2){_0x57cbb2=_0x57cbb2-0x187;let _0x2ce9fd=_0x41b27d[_0x57cbb2];return _0x2ce9fd;},a13_0x57cb(_0x2b8ef5,_0x23a0a2);}const fs=require('fs'),path=require(a13_0x26d8e2(0x189)),config=require(a13_0x26d8e2(0x19b)),conn=require('../libs/mysql.js'),express=require('express'),router=express[a13_0x26d8e2(0x18d)]();function a13_0x41b2(){const _0x469679=['push','path','608tAjzYp','1735485pchJjW','split','Router','image_file_size','employee_number','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','image_file_name','/original/','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','params','updated_at','hex','DB\x20/employees\x20error','3085Wxtefi','1208571rJgaQd','color_id','../CADViewer_config.json','8ZJpRwo','org2_id','45325314MUVoAQ','/org2s','log','length','send','employeeName','2200210JeaJeO','created_at','5304462LAjiDD','image_updated_at','10278552BccmpH','name','image_content_type','promise','query','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','SELECT\x20id,\x20hex\x20FROM\x20colors','floor_id','get','DB\x20/org2s\x20error','room_id'];a13_0x41b2=function(){return _0x469679;};return a13_0x41b2();}router[a13_0x26d8e2(0x1b0)]('/photos/:room_id',async(_0x3d051c,_0x1c88ff)=>{const _0x364923=a13_0x26d8e2;try{const _0x8cc516=_0x3d051c[_0x364923(0x194)][_0x364923(0x187)],_0x442438=_0x364923(0x193)+_0x8cc516,_0x43cf9f=[],[_0x4a211c]=await conn[_0x364923(0x1ab)]()[_0x364923(0x1ac)](_0x442438);for(let _0x4c55be=0x0;_0x4c55be<_0x4a211c[_0x364923(0x1a1)];_0x4c55be++){const _0x5cb37f=_0x4a211c[_0x4c55be];_0x43cf9f['push']({'id':_0x5cb37f['id'],'image_file_name':'/photos/'+_0x5cb37f['id']+_0x364923(0x192)+_0x5cb37f[_0x364923(0x191)],'image_content_type':_0x5cb37f[_0x364923(0x1aa)],'image_file_size':_0x5cb37f[_0x364923(0x18e)],'image_updated_at':_0x5cb37f[_0x364923(0x1a7)],'created_at':_0x5cb37f[_0x364923(0x1a5)],'updated_at':_0x5cb37f[_0x364923(0x195)]});}_0x1c88ff[_0x364923(0x1a2)](_0x43cf9f);}catch(_0x439d19){console[_0x364923(0x1a0)](_0x439d19),_0x1c88ff[_0x364923(0x1a2)]([]);}}),router['get'](a13_0x26d8e2(0x19f),async(_0x300f91,_0x4fb2ed)=>{const _0x48c862=a13_0x26d8e2;try{const _0x91e08c=_0x48c862(0x1ad),_0x26a976=_0x48c862(0x190),_0x17d03c=_0x48c862(0x1ae),_0x13c6ab=[],_0x3b2ff3={},_0x43e748={},[_0x9d1cf7]=await conn[_0x48c862(0x1ab)]()['query'](_0x17d03c);for(let _0x309360=0x0;_0x309360<_0x9d1cf7[_0x48c862(0x1a1)];_0x309360++){const _0x5c4e74=_0x9d1cf7[_0x309360];_0x43e748[_0x5c4e74['id']]={'id':_0x5c4e74['id'],'hex':'#'+_0x5c4e74[_0x48c862(0x196)]};}const [_0x39896a]=conn[_0x48c862(0x1ab)]()['query'](_0x26a976);for(let _0x36cb3b=0x0;_0x36cb3b<_0x39896a[_0x48c862(0x1a1)];_0x36cb3b++){const _0x1799df=_0x39896a[_0x36cb3b];_0x3b2ff3[_0x1799df['id']]={'id':_0x1799df['id'],'name':_0x1799df[_0x48c862(0x1a9)],'color_id':_0x1799df['color_id'],'color':_0x43e748[_0x1799df[_0x48c862(0x19a)]][_0x48c862(0x196)]};}return _0x4fb2ed[_0x48c862(0x1a2)](_0x3b2ff3);}catch(_0x258871){console[_0x48c862(0x1a0)](_0x48c862(0x1b1)+_0x258871),_0x4fb2ed[_0x48c862(0x1a2)]('[]');}}),router[a13_0x26d8e2(0x1b0)]('/employees',async(_0x19cee4,_0x58a80f)=>{const _0x2f8aae=a13_0x26d8e2;try{const _0x27aefc=_0x2f8aae(0x1ad),_0x52bf1a=_0x2f8aae(0x190),_0x43b5de=_0x2f8aae(0x1ae),_0x405b5f=[],_0x48d798={},_0x539dd6={};let [_0x3a5eac]=await conn['promise']()['query'](_0x43b5de);for(let _0x26c2df=0x0;_0x26c2df<_0x3a5eac[_0x2f8aae(0x1a1)];_0x26c2df++){const _0x2f2289=_0x3a5eac[_0x26c2df];_0x539dd6[_0x2f2289['id']]={'id':_0x2f2289['id'],'hex':'#'+_0x2f2289[_0x2f8aae(0x196)]};}console[_0x2f8aae(0x1a0)]({'colors':_0x539dd6});const [_0x594c9a]=await conn[_0x2f8aae(0x1ab)]()[_0x2f8aae(0x1ac)](_0x52bf1a);for(let _0x14f4bd=0x0;_0x14f4bd<_0x594c9a[_0x2f8aae(0x1a1)];_0x14f4bd++){const _0x1c2028=_0x594c9a[_0x14f4bd];_0x48d798[_0x1c2028['id']]={'id':_0x1c2028['id'],'name':_0x1c2028[_0x2f8aae(0x1a9)],'color_id':_0x1c2028['color_id'],'color':_0x539dd6[_0x1c2028[_0x2f8aae(0x19a)]][_0x2f8aae(0x196)]};}const [_0x12cf84]=await conn[_0x2f8aae(0x1ab)]()[_0x2f8aae(0x1ac)](_0x27aefc);for(let _0x2d8ff9=0x0;_0x2d8ff9<_0x12cf84[_0x2f8aae(0x1a1)];_0x2d8ff9++){const _0x2e6896=_0x12cf84[_0x2d8ff9];_0x405b5f[_0x2f8aae(0x188)]({'id':_0x2e6896['id'],'room_id':_0x2e6896[_0x2f8aae(0x187)],'employee_number':_0x2e6896[_0x2f8aae(0x18f)],'phone':_0x2e6896['phone'],'floor_id':_0x2e6896[_0x2f8aae(0x1af)],'org2_id':_0x2e6896[_0x2f8aae(0x19d)],'firstname':_0x2e6896['employeeName'][_0x2f8aae(0x18c)]('\x20')[0x0],'lastname':_0x2e6896['employeeName']['split']('\x20')[0x1],'employeeName':_0x2e6896[_0x2f8aae(0x1a3)],'department':_0x48d798[_0x2e6896['org2_id']]});}_0x58a80f[_0x2f8aae(0x1a2)](_0x405b5f);}catch(_0x2b933a){console[_0x2f8aae(0x1a0)](_0x2f8aae(0x197)+_0x2b933a),_0x58a80f[_0x2f8aae(0x1a2)]('[]');}}),module['exports']=router;
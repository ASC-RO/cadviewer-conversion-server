function a9_0x6efd(_0x2b5fc6,_0x599971){const _0x16e255=a9_0x16e2();return a9_0x6efd=function(_0x6efd0d,_0x4e6f14){_0x6efd0d=_0x6efd0d-0x122;let _0x1740c8=_0x16e255[_0x6efd0d];return _0x1740c8;},a9_0x6efd(_0x2b5fc6,_0x599971);}const a9_0x2e8b1a=a9_0x6efd;(function(_0x12db28,_0x4f5d2e){const _0x815c7e=a9_0x6efd,_0xf84625=_0x12db28();while(!![]){try{const _0xe18138=parseInt(_0x815c7e(0x153))/0x1*(parseInt(_0x815c7e(0x159))/0x2)+parseInt(_0x815c7e(0x150))/0x3*(-parseInt(_0x815c7e(0x152))/0x4)+-parseInt(_0x815c7e(0x123))/0x5*(-parseInt(_0x815c7e(0x154))/0x6)+-parseInt(_0x815c7e(0x137))/0x7*(parseInt(_0x815c7e(0x14a))/0x8)+parseInt(_0x815c7e(0x156))/0x9+parseInt(_0x815c7e(0x135))/0xa+-parseInt(_0x815c7e(0x134))/0xb*(parseInt(_0x815c7e(0x14f))/0xc);if(_0xe18138===_0x4f5d2e)break;else _0xf84625['push'](_0xf84625['shift']());}catch(_0x16d441){_0xf84625['push'](_0xf84625['shift']());}}}(a9_0x16e2,0xc6dbe));const multer=require(a9_0x2e8b1a(0x13e)),fs=require('fs'),{randomUUID}=require(a9_0x2e8b1a(0x145)),{userFolderMaximumFiles,userFolderMaximumSizeInMB}=require('../CADViewer_config.json'),conn=require(a9_0x2e8b1a(0x12f)),verifyToken=require(a9_0x2e8b1a(0x149))['verifyToken'],dir='./uploads';!fs[a9_0x2e8b1a(0x12e)](dir)&&fs['mkdirSync'](dir);const express=require(a9_0x2e8b1a(0x13f)),router=express[a9_0x2e8b1a(0x14b)](),config=require(a9_0x2e8b1a(0x125)),storage=multer['diskStorage']({'destination':function(_0x58b6db,_0x3cf40c,_0x4c5cef){const _0x517309=a9_0x2e8b1a;_0x4c5cef(null,_0x517309(0x12a));}}),upload=multer({'storage':storage});router[a9_0x2e8b1a(0x144)](a9_0x2e8b1a(0x141),upload[a9_0x2e8b1a(0x124)]('files'),verifyToken,async(_0x59b47d,_0x294a9e,_0x560109)=>{const _0x27a70f=a9_0x2e8b1a,_0x25f719=_0x59b47d[_0x27a70f(0x155)],{global:_0x369019,path:_0x50909d}=_0x59b47d['body'],_0x15c43a=config[_0x27a70f(0x142)];console['log']({'global':_0x369019}),console[_0x27a70f(0x15d)](_0x25f719),console[_0x27a70f(0x15d)]({'user':_0x59b47d[_0x27a70f(0x131)]});if(_0x369019){_0x25f719[_0x27a70f(0x12c)](_0x417aaf=>{const _0x3a4754=_0x27a70f;fs[_0x3a4754(0x15a)](_0x417aaf[_0x3a4754(0x13a)],(_0x50909d||_0x15c43a)+'/'+_0x417aaf['originalname']),fs[_0x3a4754(0x147)](_0x417aaf[_0x3a4754(0x13a)]);}),_0x294a9e[_0x27a70f(0x15f)]({'files':_0x25f719[_0x27a70f(0x136)](_0xfdebb6=>({..._0xfdebb6,'path':(_0x50909d||_0x15c43a)+'/'+_0xfdebb6[_0x27a70f(0x146)]}))});return;}let _0x291bce;try{const [_0x2136da]=await conn['promise']()['execute'](_0x27a70f(0x15b),[_0x59b47d[_0x27a70f(0x131)][_0x27a70f(0x15c)]]);_0x2136da['length']>0x0&&(_0x291bce=_0x2136da[0x0]);}catch(_0x46f69c){console[_0x27a70f(0x15d)]({'err':_0x46f69c}),_0x294a9e[_0x27a70f(0x158)](0x1f4)[_0x27a70f(0x12b)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x291bce){_0x294a9e[_0x27a70f(0x158)](0x191)[_0x27a70f(0x12b)]({'error':_0x27a70f(0x140)});return;}let _0xcdaec4=_0x291bce['folder_name'];if(!_0xcdaec4){_0xcdaec4=randomUUID();try{await conn[_0x27a70f(0x15e)]()['execute'](_0x27a70f(0x14c),[_0xcdaec4,_0x59b47d[_0x27a70f(0x131)][_0x27a70f(0x15c)]]);}catch(_0x3ad007){console[_0x27a70f(0x15d)]({'err':_0x3ad007}),_0x294a9e[_0x27a70f(0x158)](0x1f4)[_0x27a70f(0x12b)]({'error':_0x27a70f(0x133)});return;}}const _0x2e5842=_0x27a70f(0x138)+_0xcdaec4;!fs[_0x27a70f(0x12e)](_0x2e5842)&&fs[_0x27a70f(0x14d)](_0x2e5842);if(!_0x25f719){const _0x5269ae=new Error(_0x27a70f(0x12d));return _0x5269ae[_0x27a70f(0x130)]=0x190,_0x560109(_0x5269ae);}const _0x2a8384=fs[_0x27a70f(0x13b)](_0x2e5842)[_0x27a70f(0x14e)]+_0x25f719[_0x27a70f(0x14e)];console[_0x27a70f(0x15d)]({'numberOfSize':_0x2a8384});if(_0x2a8384>userFolderMaximumFiles)return _0x294a9e[_0x27a70f(0x158)](0x190)[_0x27a70f(0x12b)]({'error':_0x27a70f(0x13c)+userFolderMaximumFiles+_0x27a70f(0x128)});const _0xfee078=fs[_0x27a70f(0x13b)](_0x2e5842)[_0x27a70f(0x129)]((_0x4e9e78,_0xb358bd)=>_0x4e9e78+fs[_0x27a70f(0x122)](_0x2e5842+'/'+_0xb358bd)['size'],0x0),_0xc9fa94=_0x25f719[_0x27a70f(0x129)]((_0x2e4898,_0x4b680f)=>_0x2e4898+_0x4b680f[_0x27a70f(0x132)],0x0);console['log']({'totalSize':_0xfee078,'uploadedSize':_0xc9fa94});if(_0xc9fa94+_0xfee078>userFolderMaximumSizeInMB*0x400*0x400)return _0x294a9e[_0x27a70f(0x158)](0x190)['json']({'error':_0x27a70f(0x13c)+userFolderMaximumSizeInMB+_0x27a70f(0x157)});_0x25f719['forEach'](_0x528d61=>{const _0x4913bd=_0x27a70f;fs['copyFileSync'](_0x528d61[_0x4913bd(0x13a)],_0x2e5842+'/'+_0x528d61['originalname']),fs[_0x4913bd(0x147)](_0x528d61[_0x4913bd(0x13a)]);}),_0x294a9e[_0x27a70f(0x15f)]({'files':_0x25f719[_0x27a70f(0x136)](_0x1f5252=>({..._0x1f5252,'path':_0x2e5842+'/'+_0x1f5252[_0x27a70f(0x146)]}))});}),router['post'](a9_0x2e8b1a(0x126),verifyToken,async(_0x264d94,_0x35a177)=>{const _0x212c72=a9_0x2e8b1a,{path:_0x51d328,folder_name:_0x3a2714}=_0x264d94[_0x212c72(0x143)];console[_0x212c72(0x15d)]({'path':_0x51d328,'folder_name':_0x3a2714});if(!_0x51d328)return _0x35a177[_0x212c72(0x158)](0x190)[_0x212c72(0x12b)]({'error':_0x212c72(0x148)});if(!_0x3a2714)return _0x35a177[_0x212c72(0x158)](0x190)['json']({'error':_0x212c72(0x13d)});const _0x58cdf4=_0x51d328+'/'+_0x3a2714;!fs[_0x212c72(0x12e)](_0x58cdf4)&&fs[_0x212c72(0x14d)](_0x58cdf4),_0x35a177[_0x212c72(0x15f)]({'path':_0x58cdf4});}),router[a9_0x2e8b1a(0x151)](a9_0x2e8b1a(0x139),verifyToken,async(_0x4f4542,_0x58600f)=>{const _0x5c2764=a9_0x2e8b1a,{isFolder:_0x19c1b6,path:_0x2df934}=_0x4f4542['body'];!_0x19c1b6?fs[_0x5c2764(0x147)](_0x2df934):fs['rmdirSync'](_0x2df934,{'recursive':!![]}),_0x58600f[_0x5c2764(0x15f)]({'success':!![]});}),module[a9_0x2e8b1a(0x127)]=router;function a9_0x16e2(){const _0x57ca02=['json','forEach','Please\x20upload\x20a\x20file','existsSync','../libs/mysql.js','httpStatusCode','user','size','Error!\x20Something\x20went\x20wrong.','33jxduKE','14389130fEMIhb','map','21LGflgb','./uploads/','/remove','path','readdirSync','You\x20can\x20only\x20upload\x20a\x20maximum\x20of\x20','Folder\x20name\x20is\x20required','multer','express','Invalid\x20user','/files','folderLocation','body','post','crypto','originalname','unlinkSync','Path\x20is\x20required','../libs/jwt','996104AxUQRI','Router','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','mkdirSync','length','3708804qXEwDo','18mmwjeo','delete','921136cPFima','1kaiupt','6XHyNOI','files','13188969SDfNza','\x20MB\x20of\x20files','status','787322KiDtqN','copyFileSync','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','email','log','promise','send','statSync','994775QmyDCx','array','../CADViewer_config.json','/folder','exports','\x20files','reduce','uploads'];a9_0x16e2=function(){return _0x57ca02;};return a9_0x16e2();}